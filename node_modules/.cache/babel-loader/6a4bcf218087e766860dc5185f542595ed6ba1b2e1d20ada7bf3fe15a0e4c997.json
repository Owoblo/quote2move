{"ast":null,"code":"/**\n * Quote Service for managing quotes in Supabase\n */import{supabase}from'./supabase';export class QuoteService{static async createQuote(quoteData){const{data,error}=await supabase.from('quotes').insert({customer_name:quoteData.customerName,customer_email:quoteData.customerEmail,customer_phone:quoteData.customerPhone,move_date:quoteData.moveDate,origin_address:quoteData.originAddress,destination_address:quoteData.destinationAddress,detections:quoteData.detections,estimate:quoteData.estimate,upsells:quoteData.upsells,total_amount:quoteData.totalAmount,photos:quoteData.photos||[],status:quoteData.status||'pending',questions:quoteData.questions||[]}).select().single();if(error)throw error;return{id:data.id,customerName:data.customer_name,customerEmail:data.customer_email,customerPhone:data.customer_phone,moveDate:data.move_date,originAddress:data.origin_address,destinationAddress:data.destination_address,detections:data.detections,estimate:data.estimate,upsells:data.upsells,totalAmount:data.total_amount,photos:data.photos,status:data.status,questions:data.questions};}static async getQuote(quoteId){const{data,error}=await supabase.from('quotes').select('*').eq('id',quoteId).single();if(error){if(error.code==='PGRST116')return null;// Not found\nthrow error;}return{id:data.id,customerName:data.customer_name,customerEmail:data.customer_email,customerPhone:data.customer_phone,moveDate:data.move_date,originAddress:data.origin_address,destinationAddress:data.destination_address,detections:data.detections,estimate:data.estimate,upsells:data.upsells,totalAmount:data.total_amount,photos:data.photos,status:data.status,questions:data.questions};}static async updateQuoteStatus(quoteId,status){const{error}=await supabase.from('quotes').update({status}).eq('id',quoteId);if(error)throw error;}static async getUserQuotes(){const{data,error}=await supabase.from('quotes').select('*').order('created_at',{ascending:false});if(error)throw error;return data.map(quote=>({id:quote.id,customerName:quote.customer_name,customerEmail:quote.customer_email,customerPhone:quote.customer_phone,moveDate:quote.move_date,originAddress:quote.origin_address,destinationAddress:quote.destination_address,detections:quote.detections,estimate:quote.estimate,upsells:quote.upsells,totalAmount:quote.total_amount,photos:quote.photos,status:quote.status,questions:quote.questions}));}}","map":{"version":3,"names":["supabase","QuoteService","createQuote","quoteData","data","error","from","insert","customer_name","customerName","customer_email","customerEmail","customer_phone","customerPhone","move_date","moveDate","origin_address","originAddress","destination_address","destinationAddress","detections","estimate","upsells","total_amount","totalAmount","photos","status","questions","select","single","id","getQuote","quoteId","eq","code","updateQuoteStatus","update","getUserQuotes","order","ascending","map","quote"],"sources":["/Users/admin/random/src/lib/quoteService.ts"],"sourcesContent":["/**\n * Quote Service for managing quotes in Supabase\n */\n\nimport { supabase } from './supabase';\n\nexport interface QuoteData {\n  id?: string;\n  customerName: string;\n  customerEmail: string;\n  customerPhone: string;\n  moveDate: string;\n  originAddress: string;\n  destinationAddress: string;\n  detections: any[];\n  estimate: any;\n  upsells: any[];\n  totalAmount: number;\n  photos?: any[];\n  status?: 'pending' | 'accepted' | 'declined';\n  questions?: string[];\n}\n\nexport class QuoteService {\n  static async createQuote(quoteData: QuoteData): Promise<QuoteData> {\n    const { data, error } = await supabase\n      .from('quotes')\n      .insert({\n        customer_name: quoteData.customerName,\n        customer_email: quoteData.customerEmail,\n        customer_phone: quoteData.customerPhone,\n        move_date: quoteData.moveDate,\n        origin_address: quoteData.originAddress,\n        destination_address: quoteData.destinationAddress,\n        detections: quoteData.detections,\n        estimate: quoteData.estimate,\n        upsells: quoteData.upsells,\n        total_amount: quoteData.totalAmount,\n        photos: quoteData.photos || [],\n        status: quoteData.status || 'pending',\n        questions: quoteData.questions || []\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    return {\n      id: data.id,\n      customerName: data.customer_name,\n      customerEmail: data.customer_email,\n      customerPhone: data.customer_phone,\n      moveDate: data.move_date,\n      originAddress: data.origin_address,\n      destinationAddress: data.destination_address,\n      detections: data.detections,\n      estimate: data.estimate,\n      upsells: data.upsells,\n      totalAmount: data.total_amount,\n      photos: data.photos,\n      status: data.status,\n      questions: data.questions\n    };\n  }\n\n  static async getQuote(quoteId: string): Promise<QuoteData | null> {\n    const { data, error } = await supabase\n      .from('quotes')\n      .select('*')\n      .eq('id', quoteId)\n      .single();\n\n    if (error) {\n      if (error.code === 'PGRST116') return null; // Not found\n      throw error;\n    }\n\n    return {\n      id: data.id,\n      customerName: data.customer_name,\n      customerEmail: data.customer_email,\n      customerPhone: data.customer_phone,\n      moveDate: data.move_date,\n      originAddress: data.origin_address,\n      destinationAddress: data.destination_address,\n      detections: data.detections,\n      estimate: data.estimate,\n      upsells: data.upsells,\n      totalAmount: data.total_amount,\n      photos: data.photos,\n      status: data.status,\n      questions: data.questions\n    };\n  }\n\n  static async updateQuoteStatus(quoteId: string, status: 'pending' | 'accepted' | 'declined'): Promise<void> {\n    const { error } = await supabase\n      .from('quotes')\n      .update({ status })\n      .eq('id', quoteId);\n\n    if (error) throw error;\n  }\n\n  static async getUserQuotes(): Promise<QuoteData[]> {\n    const { data, error } = await supabase\n      .from('quotes')\n      .select('*')\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n\n    return data.map(quote => ({\n      id: quote.id,\n      customerName: quote.customer_name,\n      customerEmail: quote.customer_email,\n      customerPhone: quote.customer_phone,\n      moveDate: quote.move_date,\n      originAddress: quote.origin_address,\n      destinationAddress: quote.destination_address,\n      detections: quote.detections,\n      estimate: quote.estimate,\n      upsells: quote.upsells,\n      totalAmount: quote.total_amount,\n      photos: quote.photos,\n      status: quote.status,\n      questions: quote.questions\n    }));\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}