{"ast":null,"code":"import _objectSpread from\"/Users/admin/random/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import{calculateEstimate}from'../lib/estimate';import{GoogleMapsService}from'../lib/googleMapsService';import{SimplePDFService}from'../lib/simplePDFService';import{SaturnGPTService}from'../lib/saturnGPTService';import ThemeToggle from'../components/ThemeToggle';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function EstimatePage(){const navigate=useNavigate();const location=useLocation();const state=location.state;const[customerInfo,setCustomerInfo]=useState({name:'',email:'',phone:'',moveDate:''});const[originAddress,setOriginAddress]=useState((state===null||state===void 0?void 0:state.address)||'');const[destinationAddress,setDestinationAddress]=useState('');const[detections]=useState((state===null||state===void 0?void 0:state.detections)||[]);const[mapping]=useState((state===null||state===void 0?void 0:state.mapping)||{});const[baseEstimate]=useState((state===null||state===void 0?void 0:state.estimate)||{crew:3,rate:75,travelMins:30,stairs:false,elevator:false,wrapping:false,safetyPct:10,hours:0,total:0});// Generate upsells based on detected items - auto-select items that need special care\nconst[upsells,setUpsells]=useState(()=>{var _state$estimate;const initialUpsells=[{id:'insurance',name:'Moving Insurance',description:'Protect your belongings during the move',price:((state===null||state===void 0?void 0:(_state$estimate=state.estimate)===null||_state$estimate===void 0?void 0:_state$estimate.total)||0)*0.05,// 5% of total\nrecommended:true,selected:false},{id:'packing',name:'Packing Service',description:'Professional packing of your items',price:detections.reduce((sum,d)=>sum+d.qty*25,0),// $25 per item\nrecommended:detections.length>10,selected:false},{id:'unpacking',name:'Unpacking Service',description:'We unpack and organize at your new location',price:detections.reduce((sum,d)=>sum+d.qty*15,0),// $15 per item\nrecommended:false,selected:false}];// Detect TVs - AUTO-SELECT TV boxes (they NEED special boxes)\nconst tvDetections=detections.filter(d=>d.label.toLowerCase().includes('tv')||d.label.toLowerCase().includes('television')||d.label.toLowerCase().includes('flat screen'));const tvCount=tvDetections.reduce((sum,d)=>sum+d.qty,0);if(tvCount>0){initialUpsells.push({id:'tv-boxes',name:\"TV Boxes (\".concat(tvCount,\" TV\").concat(tvCount>1?'s':'',\")\"),description:'Specialty boxes and protective wrapping - Required for safe transport',price:tvCount*35,recommended:true,selected:true// AUTO-SELECTED - TVs need boxes!\n});}// Detect fragile items (art, pictures, mirrors) - recommend fragile packing\nconst fragileDetections=detections.filter(d=>d.label.toLowerCase().includes('art')||d.label.toLowerCase().includes('picture')||d.label.toLowerCase().includes('painting')||d.label.toLowerCase().includes('mirror')||d.label.toLowerCase().includes('glass'));const fragileCount=fragileDetections.reduce((sum,d)=>sum+d.qty,0);if(fragileCount>0){initialUpsells.push({id:'fragile-packing',name:\"Fragile Item Packing (\".concat(fragileCount,\" item\").concat(fragileCount>1?'s':'',\")\"),description:'Special wrapping and cushioning for fragile items',price:fragileCount*20,recommended:true,selected:false});}// Detect specialty items - recommend specialty handling\nconst specialtyDetections=detections.filter(d=>d.label.toLowerCase().includes('piano')||d.label.toLowerCase().includes('treadmill')||d.label.toLowerCase().includes('pool table')||d.label.toLowerCase().includes('safe')||d.label.toLowerCase().includes('grandfather clock'));const specialtyCount=specialtyDetections.reduce((sum,d)=>sum+d.qty,0);if(specialtyCount>0){initialUpsells.push({id:'specialty-handling',name:\"Specialty Item Handling (\".concat(specialtyCount,\" item\").concat(specialtyCount>1?'s':'',\")\"),description:'Expert handling for heavy or delicate specialty items',price:specialtyCount*100,recommended:true,selected:false});}return initialUpsells;});const[travelDistance,setTravelDistance]=useState(0);const[travelTime,setTravelTime]=useState(0);const[isCalculatingDistance,setIsCalculatingDistance]=useState(false);const[isCalculatingGPT,setIsCalculatingGPT]=useState(false);const[distanceError,setDistanceError]=useState(null);const[gptError,setGptError]=useState(null);const[finalEstimate,setFinalEstimate]=useState(_objectSpread({},baseEstimate));const[gptReasoning,setGptReasoning]=useState(null);const[gptBreakdown,setGptBreakdown]=useState(null);// Building/Parking details for GPT calculation\nconst[originType,setOriginType]=useState('house');const[destinationType,setDestinationType]=useState('house');const[stairsDestination,setStairsDestination]=useState(false);const[elevatorDestination,setElevatorDestination]=useState(false);const[floorOrigin,setFloorOrigin]=useState();const[floorDestination,setFloorDestination]=useState();const[parkingOrigin,setParkingOrigin]=useState('driveway');const[parkingDestination,setParkingDestination]=useState('driveway');// Auto-calculate distance and GPT estimate when both addresses are provided\nuseEffect(()=>{const calculateGPTEstimate=async()=>{if(!originAddress||!destinationAddress||destinationAddress.length<10){return;// Wait for complete addresses\n}if(detections.length===0){return;// Need inventory first\n}setIsCalculatingDistance(true);setIsCalculatingGPT(true);setDistanceError(null);setGptError(null);try{// Step 1: Get distance first\nconst distanceResult=await GoogleMapsService.getDistance(originAddress,destinationAddress);setTravelDistance(Math.round(distanceResult.distance));setTravelTime(distanceResult.duration);// Step 2: Calculate total cubic feet and weight from detections\nconst totalCubicFeet=detections.reduce((sum,d)=>{var _mapping$d$label;// Priority: detected value > mapping > 0 (shouldn't happen with estimator)\nconst cf=d.cubicFeet||((_mapping$d$label=mapping[d.label])===null||_mapping$d$label===void 0?void 0:_mapping$d$label.cf)||0;return sum+cf*d.qty;},0);const totalWeight=detections.reduce((sum,d)=>{var _mapping$d$label2;// Priority: detected weight > calculated from cubicFeet > mapping table > 0\nlet weight=0;if(d.weight&&d.weight>0){weight=d.weight;}else if(d.cubicFeet&&d.cubicFeet>0){weight=d.cubicFeet*7;}else if((_mapping$d$label2=mapping[d.label])!==null&&_mapping$d$label2!==void 0&&_mapping$d$label2.cf){weight=mapping[d.label].cf*7;}return sum+weight*d.qty;},0);console.log(\"\\uD83D\\uDCCA Volume Calculation: \".concat(totalCubicFeet.toFixed(1),\" cu ft, \").concat(totalWeight.toFixed(0),\" lbs total from \").concat(detections.length,\" items\"));// Step 3: Call GPT for accurate move time calculation\nconst gptResult=await SaturnGPTService.calculateMoveTime({detections:detections.map(d=>{var _mapping$d$label3,_mapping$d$label4;return{label:d.label,qty:d.qty,cubicFeet:d.cubicFeet||((_mapping$d$label3=mapping[d.label])===null||_mapping$d$label3===void 0?void 0:_mapping$d$label3.cf),weight:d.weight||((_mapping$d$label4=mapping[d.label])!==null&&_mapping$d$label4!==void 0&&_mapping$d$label4.cf?mapping[d.label].cf*7:undefined),size:d.size,room:d.room};}),distance:distanceResult.distance,travelTime:distanceResult.duration,originType,destinationType,stairsOrigin:baseEstimate.stairs,stairsDestination,elevatorOrigin:baseEstimate.elevator,elevatorDestination,floorOrigin,floorDestination,parkingOrigin,parkingDestination});// Step 4: Update estimate with GPT results\nsetFinalEstimate(_objectSpread(_objectSpread({},baseEstimate),{},{hours:gptResult.hoursStandard,crew:gptResult.recommendedCrew,rate:gptResult.crewRate/gptResult.recommendedCrew,total:gptResult.totalBeforeTax-gptResult.surchargesTotal,travelMins:distanceResult.duration}));// Step 5: Auto-apply detected upsells from GPT\nconst newUpsells=[...upsells];// Update existing upsells with GPT recommendations\ngptResult.detectedUpsells.forEach(gptUpsell=>{const existingIndex=newUpsells.findIndex(u=>u.id===gptUpsell.id);if(existingIndex>=0){newUpsells[existingIndex]=_objectSpread(_objectSpread({},newUpsells[existingIndex]),{},{price:gptUpsell.price,description:gptUpsell.reason,recommended:true,selected:gptUpsell.required||newUpsells[existingIndex].selected});}else{// Add new upsell from GPT\nnewUpsells.push({id:gptUpsell.id,name:gptUpsell.name,description:gptUpsell.reason,price:gptUpsell.price,recommended:true,selected:gptUpsell.required});}});// Add specialty item surcharges as separate upsells\nif(gptResult.specialtyItems.length>0){gptResult.specialtyItems.forEach(item=>{const existingSpecialtyIndex=newUpsells.findIndex(u=>u.id===\"specialty-\".concat(item.category));if(existingSpecialtyIndex<0){newUpsells.push({id:\"specialty-\".concat(item.category),name:\"\".concat(item.item,\" Specialty Handling\"),description:\"Specialty handling for \".concat(item.item,\" (+\").concat(item.extraTime,\" min)\"),price:item.surcharge,recommended:true,selected:true});}});}setUpsells(newUpsells);setGptReasoning(gptResult.reasoning);setGptBreakdown(gptResult.breakdown);}catch(error){console.error('GPT Estimate Error:',error);setGptError(error.message||'Could not calculate estimate with GPT');// Fallback to simple calculation if GPT fails\ntry{const distanceResult=await GoogleMapsService.getDistance(originAddress,destinationAddress);const updatedEstimate=_objectSpread(_objectSpread({},baseEstimate),{},{travelMins:distanceResult.duration});const result=calculateEstimate(detections,mapping,updatedEstimate);setFinalEstimate(_objectSpread(_objectSpread({},updatedEstimate),result));}catch(fallbackError){setDistanceError(fallbackError.message||'Could not calculate distance');}}finally{setIsCalculatingDistance(false);setIsCalculatingGPT(false);}};// Debounce to avoid too many API calls\nconst timer=setTimeout(()=>{calculateGPTEstimate();},1500);return()=>clearTimeout(timer);},[originAddress,destinationAddress,detections,mapping,baseEstimate,originType,destinationType,stairsDestination,elevatorDestination,floorOrigin,floorDestination,parkingOrigin,parkingDestination]);const handleUpsellToggle=id=>{setUpsells(prev=>prev.map(u=>u.id===id?_objectSpread(_objectSpread({},u),{},{selected:!u.selected}):u));};const handleSendQuote=()=>{const totalUpsells=upsells.filter(u=>u.selected).reduce((sum,u)=>sum+u.price,0);const finalTotal=finalEstimate.total+totalUpsells;navigate('/quote-preview',{state:{customerName:customerInfo.name,customerEmail:customerInfo.email,customerPhone:customerInfo.phone,moveDate:customerInfo.moveDate,originAddress,destinationAddress,detections,estimate:finalEstimate,upsells:upsells.filter(u=>u.selected),totalAmount:finalTotal,photos:[]// Add photos if available\n}});};const handleDownloadPDF=async()=>{const totalUpsells=upsells.filter(u=>u.selected).reduce((sum,u)=>sum+u.price,0);const finalTotal=finalEstimate.total+totalUpsells;try{await SimplePDFService.downloadQuote({customerName:customerInfo.name,customerEmail:customerInfo.email,customerPhone:customerInfo.phone,moveDate:customerInfo.moveDate,originAddress,destinationAddress,detections,estimate:finalEstimate,upsells:upsells.filter(u=>u.selected),totalAmount:finalTotal,photos:[],id:'preview'});}catch(error){console.error('PDF download error:',error);alert('Failed to download PDF. Please try again.');}};const handleContinue=()=>{navigate('/dashboard');};const totalUpsells=upsells.filter(u=>u.selected).reduce((sum,u)=>sum+u.price,0);const finalTotal=finalEstimate.total+totalUpsells;const totalItems=detections.reduce((sum,d)=>sum+d.qty,0);const totalCubicFeet=detections.reduce((sum,detection)=>{var _mapping$detection$la,_mapping$detection$la2;const cf=detection.cubicFeet||((_mapping$detection$la=mapping[detection.label])===null||_mapping$detection$la===void 0?void 0:_mapping$detection$la.cf)||0;const totalCf=cf*detection.qty;if(!detection.cubicFeet&&!((_mapping$detection$la2=mapping[detection.label])!==null&&_mapping$detection$la2!==void 0&&_mapping$detection$la2.cf)){console.warn(\"\\u26A0\\uFE0F Missing cubicFeet for \\\"\".concat(detection.label,\"\\\" - using 0 as fallback\"));}return sum+totalCf;},0);const totalWeight=detections.reduce((sum,detection)=>{var _mapping$detection$la3,_mapping$detection$la4;let weight=0;if(detection.weight&&detection.weight>0){weight=detection.weight;}else if(detection.cubicFeet&&detection.cubicFeet>0){weight=detection.cubicFeet*7;}else if((_mapping$detection$la3=mapping[detection.label])!==null&&_mapping$detection$la3!==void 0&&_mapping$detection$la3.cf){weight=mapping[detection.label].cf*7;}const totalWeight=weight*detection.qty;if(!detection.weight&&!detection.cubicFeet&&!((_mapping$detection$la4=mapping[detection.label])!==null&&_mapping$detection$la4!==void 0&&_mapping$detection$la4.cf)){console.warn(\"\\u26A0\\uFE0F Missing weight for \\\"\".concat(detection.label,\"\\\" - using 0 as fallback\"));}return sum+totalWeight;},0);// Truck capacity check: 26ft truck = ~1,700 cubic feet\nconst TRUCK_CAPACITY=1700;const needsMultipleTrucks=totalCubicFeet>TRUCK_CAPACITY;const estimatedTrucks=needsMultipleTrucks?Math.ceil(totalCubicFeet/TRUCK_CAPACITY):1;return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 transition-colors duration-200\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-b border-gray-200/50 dark:border-gray-700/50 sticky top-0 z-50 shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between h-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent\",children:\"Complete Your Quote\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\",children:\"Review and finalize your moving estimate\"})]})]}),/*#__PURE__*/_jsx(ThemeToggle,{})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 p-6 lg:p-8 hover:shadow-xl transition-all duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 dark:text-gray-100\",children:\"Customer Information\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"Enter customer details for the quote\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\",children:[\"Full Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:customerInfo.name,onChange:e=>setCustomerInfo(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value})),className:\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\",placeholder:\"John Doe\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\",children:[\"Email Address \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:customerInfo.email,onChange:e=>setCustomerInfo(prev=>_objectSpread(_objectSpread({},prev),{},{email:e.target.value})),className:\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\",placeholder:\"john@example.com\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\",children:[\"Phone Number \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:customerInfo.phone,onChange:e=>setCustomerInfo(prev=>_objectSpread(_objectSpread({},prev),{},{phone:e.target.value})),className:\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\",placeholder:\"(555) 123-4567\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\",children:[\"Move Date \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:customerInfo.moveDate,onChange:e=>setCustomerInfo(prev=>_objectSpread(_objectSpread({},prev),{},{moveDate:e.target.value})),className:\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100\",min:new Date().toISOString().split('T')[0],required:true})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 p-6 lg:p-8 hover:shadow-xl transition-all duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsxs(\"svg\",{className:\"w-5 h-5 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 dark:text-gray-100\",children:\"Origin & Destination\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"Moving from and to locations\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\",children:\"Origin Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:originAddress,onChange:e=>setOriginAddress(e.target.value),className:\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\",placeholder:\"123 Main St, City, State\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Origin Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:originType,onChange:e=>setOriginType(e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"house\",children:\"House\"}),/*#__PURE__*/_jsx(\"option\",{value:\"apartment\",children:\"Apartment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"condo\",children:\"Condo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"business\",children:\"Business\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Origin Floor (if applicable)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:floorOrigin||'',onChange:e=>setFloorOrigin(e.target.value?parseInt(e.target.value):undefined),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\",placeholder:\"e.g. 3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:baseEstimate.stairs,disabled:true,className:\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Origin has stairs\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:baseEstimate.elevator,disabled:true,className:\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Origin has elevator\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Origin Parking\"}),/*#__PURE__*/_jsxs(\"select\",{value:parkingOrigin,onChange:e=>setParkingOrigin(e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"driveway\",children:\"Driveway\"}),/*#__PURE__*/_jsx(\"option\",{value:\"street\",children:\"Street Parking\"}),/*#__PURE__*/_jsx(\"option\",{value:\"parking_lot\",children:\"Parking Lot\"}),/*#__PURE__*/_jsx(\"option\",{value:\"difficult\",children:\"Difficult/Limited\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-5 mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:[\"Destination Address \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:destinationAddress,onChange:e=>setDestinationAddress(e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\",placeholder:\"456 Oak Ave, City, State\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Destination Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:destinationType,onChange:e=>setDestinationType(e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"house\",children:\"House\"}),/*#__PURE__*/_jsx(\"option\",{value:\"apartment\",children:\"Apartment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"condo\",children:\"Condo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"business\",children:\"Business\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Destination Floor (if applicable)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:floorDestination||'',onChange:e=>setFloorDestination(e.target.value?parseInt(e.target.value):undefined),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\",placeholder:\"e.g. 5\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 mt-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:stairsDestination,onChange:e=>setStairsDestination(e.target.checked),className:\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Destination has stairs\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:elevatorDestination,onChange:e=>setElevatorDestination(e.target.checked),className:\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Destination has elevator\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Destination Parking\"}),/*#__PURE__*/_jsxs(\"select\",{value:parkingDestination,onChange:e=>setParkingDestination(e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"driveway\",children:\"Driveway\"}),/*#__PURE__*/_jsx(\"option\",{value:\"street\",children:\"Street Parking\"}),/*#__PURE__*/_jsx(\"option\",{value:\"parking_lot\",children:\"Parking Lot\"}),/*#__PURE__*/_jsx(\"option\",{value:\"difficult\",children:\"Difficult/Limited\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-4 mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-semibold text-gray-700\",children:\"Travel Distance\"}),isCalculatingDistance?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mt-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-600\",children:\"Calculating...\"})]}):travelDistance>0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-gray-900 mt-1\",children:[travelDistance,\" miles\"]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:\"Enter addresses to calculate\"})]}),travelTime>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-semibold text-gray-700\",children:\"Travel Time\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-gray-900 mt-1\",children:[travelTime,\" min\"]})]})]}),distanceError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-red-600 mt-2\",children:distanceError})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 p-6 lg:p-8 hover:shadow-xl transition-all duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Detected Inventory\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[totalItems,\" items \\u2022 \",totalCubicFeet.toFixed(0),\" cu ft \\u2022 \",totalWeight.toFixed(0),\" lbs\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-semibold text-blue-700 uppercase mb-1\",children:\"Total Items\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-blue-900\",children:totalItems})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-semibold text-purple-700 uppercase mb-1\",children:\"Total Volume\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-purple-900\",children:[totalCubicFeet.toFixed(0),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"cu ft\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border border-orange-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-semibold text-orange-700 uppercase mb-1\",children:\"Total Weight\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-orange-900\",children:[totalWeight.toFixed(0),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"lbs\"})]})]})]}),needsMultipleTrucks&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-50 border-2 border-orange-300 rounded-xl p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-orange-900 text-sm mb-1\",children:\"\\u26A0\\uFE0F Truck Capacity Exceeded\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-orange-800 leading-relaxed\",children:[\"Total volume (\",totalCubicFeet.toFixed(0),\" cu ft) exceeds 26ft truck capacity (\",TRUCK_CAPACITY,\" cu ft).\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"Required: \",estimatedTrucks,\" truck\",estimatedTrucks>1?'s':'',\" or multiple trips.\"]})]})]})]})}),!needsMultipleTrucks&&totalCubicFeet>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 border border-green-200 rounded-xl p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-sm\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-green-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-green-800 font-medium\",children:[\"\\u2713 Fits in single 26ft truck (\",totalCubicFeet.toFixed(0),\" / \",TRUCK_CAPACITY,\" cu ft)\"]})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 p-6 lg:p-8 hover:shadow-xl transition-all duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Additional Services\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Enhance your move with these services\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:upsells.map(upsell=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-start p-4 border-2 rounded-xl cursor-pointer transition-all duration-200 \".concat(upsell.selected?'border-green-500 bg-gradient-to-r from-green-50 to-emerald-50 shadow-md':upsell.recommended?'border-yellow-300 bg-gradient-to-r from-yellow-50 to-amber-50 hover:border-yellow-400':'border-gray-200 bg-white/50 hover:border-gray-300 hover:bg-white'),children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:upsell.selected,onChange:()=>handleUpsellToggle(upsell.id),className:\"mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3 flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 flex-wrap\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-gray-900\",children:upsell.name}),upsell.selected&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs bg-green-200 text-green-800 px-2 py-0.5 rounded-full font-medium\",children:\"\\u2713 Selected\"}),upsell.recommended&&!upsell.selected&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs bg-yellow-200 text-yellow-800 px-2 py-0.5 rounded-full font-medium\",children:\"\\u2B50 Recommended\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:upsell.description})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-gray-900 ml-4 text-lg\",children:[\"$\",upsell.price.toFixed(2)]})]})})]},upsell.id))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 p-6 sticky top-24\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Quote Summary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Final pricing breakdown\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[needsMultipleTrucks&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-50 border-2 border-orange-400 rounded-xl p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-bold text-orange-900 mb-1\",children:\"Multiple Trucks Required\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-orange-800\",children:[\"Volume: \",/*#__PURE__*/_jsxs(\"strong\",{children:[totalCubicFeet.toFixed(0),\" cu ft\"]}),\" exceeds single truck capacity.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"strong\",{children:[estimatedTrucks,\" truck\",estimatedTrucks>1?'s':'',\" needed\"]})]})]})]})}),gptBreakdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200 rounded-xl p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-3\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-purple-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-purple-900\",children:\"AI-Powered Estimate\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Loading:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[gptBreakdown.loadingHours.toFixed(1),\"h\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Travel:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[gptBreakdown.travelHours.toFixed(1),\"h\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Unloading:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[gptBreakdown.unloadingHours.toFixed(1),\"h\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Setup:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[gptBreakdown.setupHours.toFixed(1),\"h\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between border-t pt-1 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Buffer:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[gptBreakdown.bufferHours.toFixed(1),\"h\"]})]})]})]}),gptReasoning&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-xl p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-semibold text-blue-900 mb-2\",children:\"\\uD83E\\uDD16 AI Analysis\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-800 leading-relaxed\",children:gptReasoning})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Base Moving Cost:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900\",children:[\"$\",finalEstimate.total.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Estimated Time:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900\",children:[finalEstimate.hours.toFixed(1),\" hours\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Crew Size:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900\",children:[finalEstimate.crew,\" people\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Travel Time:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900\",children:[finalEstimate.travelMins,\" min\"]})]})]}),totalUpsells>0&&/*#__PURE__*/_jsx(\"div\",{className:\"pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Additional Services:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900\",children:[\"$\",totalUpsells.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-4 border-t-2 border-gray-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold text-gray-900\",children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\",children:[\"$\",finalTotal.toFixed(2)]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSendQuote,disabled:!destinationAddress||!customerInfo.name||!customerInfo.email||!customerInfo.phone||!customerInfo.moveDate||isCalculatingGPT,className:\"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold py-3.5 px-4 rounded-xl transition-all duration-200 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl disabled:shadow-none\",children:isCalculatingGPT?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Calculating...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Send Quote via Email\"})]})}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleDownloadPDF,disabled:!destinationAddress||!customerInfo.name||!customerInfo.email||!customerInfo.phone||!customerInfo.moveDate,className:\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold py-3.5 px-4 rounded-xl transition-all duration-200 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl disabled:shadow-none\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Download PDF Quote\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleContinue,disabled:!destinationAddress||!customerInfo.name||!customerInfo.email||!customerInfo.phone||!customerInfo.moveDate,className:\"w-full bg-gray-100 hover:bg-gray-200 disabled:bg-gray-100 text-gray-700 font-semibold py-3 px-4 rounded-xl transition-colors duration-200 disabled:cursor-not-allowed border border-gray-300\",children:\"Save & Continue Later\"})]})]})]})})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","calculateEstimate","GoogleMapsService","SimplePDFService","SaturnGPTService","ThemeToggle","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EstimatePage","navigate","location","state","customerInfo","setCustomerInfo","name","email","phone","moveDate","originAddress","setOriginAddress","address","destinationAddress","setDestinationAddress","detections","mapping","baseEstimate","estimate","crew","rate","travelMins","stairs","elevator","wrapping","safetyPct","hours","total","upsells","setUpsells","_state$estimate","initialUpsells","id","description","price","recommended","selected","reduce","sum","d","qty","length","tvDetections","filter","label","toLowerCase","includes","tvCount","push","concat","fragileDetections","fragileCount","specialtyDetections","specialtyCount","travelDistance","setTravelDistance","travelTime","setTravelTime","isCalculatingDistance","setIsCalculatingDistance","isCalculatingGPT","setIsCalculatingGPT","distanceError","setDistanceError","gptError","setGptError","finalEstimate","setFinalEstimate","_objectSpread","gptReasoning","setGptReasoning","gptBreakdown","setGptBreakdown","originType","setOriginType","destinationType","setDestinationType","stairsDestination","setStairsDestination","elevatorDestination","setElevatorDestination","floorOrigin","setFloorOrigin","floorDestination","setFloorDestination","parkingOrigin","setParkingOrigin","parkingDestination","setParkingDestination","calculateGPTEstimate","distanceResult","getDistance","Math","round","distance","duration","totalCubicFeet","_mapping$d$label","cf","cubicFeet","totalWeight","_mapping$d$label2","weight","console","log","toFixed","gptResult","calculateMoveTime","map","_mapping$d$label3","_mapping$d$label4","undefined","size","room","stairsOrigin","elevatorOrigin","hoursStandard","recommendedCrew","crewRate","totalBeforeTax","surchargesTotal","newUpsells","detectedUpsells","forEach","gptUpsell","existingIndex","findIndex","u","reason","required","specialtyItems","item","existingSpecialtyIndex","category","extraTime","surcharge","reasoning","breakdown","error","message","updatedEstimate","result","fallbackError","timer","setTimeout","clearTimeout","handleUpsellToggle","prev","handleSendQuote","totalUpsells","finalTotal","customerName","customerEmail","customerPhone","totalAmount","photos","handleDownloadPDF","downloadQuote","alert","handleContinue","totalItems","detection","_mapping$detection$la","_mapping$detection$la2","totalCf","warn","_mapping$detection$la3","_mapping$detection$la4","TRUCK_CAPACITY","needsMultipleTrucks","estimatedTrucks","ceil","className","children","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","type","value","onChange","e","target","placeholder","min","Date","toISOString","split","parseInt","checked","disabled","upsell","loadingHours","travelHours","unloadingHours","setupHours","bufferHours"],"sources":["/Users/admin/random/src/pages/EstimatePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Detection, MappingTable, Estimate } from '../types';\nimport { calculateEstimate } from '../lib/estimate';\nimport { GoogleMapsService } from '../lib/googleMapsService';\nimport { SimplePDFService } from '../lib/simplePDFService';\nimport { SaturnGPTService, SaturnMoveTimeResponse } from '../lib/saturnGPTService';\nimport ThemeToggle from '../components/ThemeToggle';\n\ninterface LocationState {\n  address: string;\n  detections: Detection[];\n  estimate: Estimate;\n  mapping: MappingTable;\n}\n\ninterface Upsell {\n  id: string;\n  name: string;\n  description: string;\n  price: number;\n  recommended: boolean;\n  selected: boolean;\n}\n\nexport default function EstimatePage() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const state = location.state as LocationState;\n\n  const [customerInfo, setCustomerInfo] = useState({\n    name: '',\n    email: '',\n    phone: '',\n    moveDate: ''\n  });\n\n  const [originAddress, setOriginAddress] = useState(state?.address || '');\n  const [destinationAddress, setDestinationAddress] = useState('');\n  const [detections] = useState<Detection[]>(state?.detections || []);\n  const [mapping] = useState<MappingTable>(state?.mapping || {});\n  const [baseEstimate] = useState<Estimate>(state?.estimate || {\n    crew: 3,\n    rate: 75,\n    travelMins: 30,\n    stairs: false,\n    elevator: false,\n    wrapping: false,\n    safetyPct: 10,\n    hours: 0,\n    total: 0\n  });\n\n  // Generate upsells based on detected items - auto-select items that need special care\n  const [upsells, setUpsells] = useState<Upsell[]>(() => {\n    const initialUpsells: Upsell[] = [\n      {\n        id: 'insurance',\n        name: 'Moving Insurance',\n        description: 'Protect your belongings during the move',\n        price: (state?.estimate?.total || 0) * 0.05, // 5% of total\n        recommended: true,\n        selected: false\n      },\n      {\n        id: 'packing',\n        name: 'Packing Service',\n        description: 'Professional packing of your items',\n        price: detections.reduce((sum, d) => sum + (d.qty * 25), 0), // $25 per item\n        recommended: detections.length > 10,\n        selected: false\n      },\n      {\n        id: 'unpacking',\n        name: 'Unpacking Service',\n        description: 'We unpack and organize at your new location',\n        price: detections.reduce((sum, d) => sum + (d.qty * 15), 0), // $15 per item\n        recommended: false,\n        selected: false\n      }\n    ];\n\n    // Detect TVs - AUTO-SELECT TV boxes (they NEED special boxes)\n    const tvDetections = detections.filter(d => \n      d.label.toLowerCase().includes('tv') || \n      d.label.toLowerCase().includes('television') ||\n      d.label.toLowerCase().includes('flat screen')\n    );\n    const tvCount = tvDetections.reduce((sum, d) => sum + d.qty, 0);\n\n    if (tvCount > 0) {\n      initialUpsells.push({\n        id: 'tv-boxes',\n        name: `TV Boxes (${tvCount} TV${tvCount > 1 ? 's' : ''})`,\n        description: 'Specialty boxes and protective wrapping - Required for safe transport',\n        price: tvCount * 35,\n        recommended: true,\n        selected: true // AUTO-SELECTED - TVs need boxes!\n      });\n    }\n\n    // Detect fragile items (art, pictures, mirrors) - recommend fragile packing\n    const fragileDetections = detections.filter(d => \n      d.label.toLowerCase().includes('art') ||\n      d.label.toLowerCase().includes('picture') ||\n      d.label.toLowerCase().includes('painting') ||\n      d.label.toLowerCase().includes('mirror') ||\n      d.label.toLowerCase().includes('glass')\n    );\n    const fragileCount = fragileDetections.reduce((sum, d) => sum + d.qty, 0);\n\n    if (fragileCount > 0) {\n      initialUpsells.push({\n        id: 'fragile-packing',\n        name: `Fragile Item Packing (${fragileCount} item${fragileCount > 1 ? 's' : ''})`,\n        description: 'Special wrapping and cushioning for fragile items',\n        price: fragileCount * 20,\n        recommended: true,\n        selected: false\n      });\n    }\n\n    // Detect specialty items - recommend specialty handling\n    const specialtyDetections = detections.filter(d => \n      d.label.toLowerCase().includes('piano') ||\n      d.label.toLowerCase().includes('treadmill') ||\n      d.label.toLowerCase().includes('pool table') ||\n      d.label.toLowerCase().includes('safe') ||\n      d.label.toLowerCase().includes('grandfather clock')\n    );\n    const specialtyCount = specialtyDetections.reduce((sum, d) => sum + d.qty, 0);\n\n    if (specialtyCount > 0) {\n      initialUpsells.push({\n        id: 'specialty-handling',\n        name: `Specialty Item Handling (${specialtyCount} item${specialtyCount > 1 ? 's' : ''})`,\n        description: 'Expert handling for heavy or delicate specialty items',\n        price: specialtyCount * 100,\n        recommended: true,\n        selected: false\n      });\n    }\n\n    return initialUpsells;\n  });\n\n  const [travelDistance, setTravelDistance] = useState(0);\n  const [travelTime, setTravelTime] = useState(0);\n  const [isCalculatingDistance, setIsCalculatingDistance] = useState(false);\n  const [isCalculatingGPT, setIsCalculatingGPT] = useState(false);\n  const [distanceError, setDistanceError] = useState<string | null>(null);\n  const [gptError, setGptError] = useState<string | null>(null);\n  const [finalEstimate, setFinalEstimate] = useState<Estimate>({ ...baseEstimate });\n  const [gptReasoning, setGptReasoning] = useState<string | null>(null);\n  const [gptBreakdown, setGptBreakdown] = useState<SaturnMoveTimeResponse['breakdown'] | null>(null);\n\n  // Building/Parking details for GPT calculation\n  const [originType, setOriginType] = useState<'house' | 'apartment' | 'condo' | 'business'>('house');\n  const [destinationType, setDestinationType] = useState<'house' | 'apartment' | 'condo' | 'business'>('house');\n  const [stairsDestination, setStairsDestination] = useState(false);\n  const [elevatorDestination, setElevatorDestination] = useState(false);\n  const [floorOrigin, setFloorOrigin] = useState<number | undefined>();\n  const [floorDestination, setFloorDestination] = useState<number | undefined>();\n  const [parkingOrigin, setParkingOrigin] = useState<'driveway' | 'street' | 'parking_lot' | 'difficult'>('driveway');\n  const [parkingDestination, setParkingDestination] = useState<'driveway' | 'street' | 'parking_lot' | 'difficult'>('driveway');\n\n  // Auto-calculate distance and GPT estimate when both addresses are provided\n  useEffect(() => {\n    const calculateGPTEstimate = async () => {\n      if (!originAddress || !destinationAddress || destinationAddress.length < 10) {\n        return; // Wait for complete addresses\n      }\n\n      if (detections.length === 0) {\n        return; // Need inventory first\n      }\n\n      setIsCalculatingDistance(true);\n      setIsCalculatingGPT(true);\n      setDistanceError(null);\n      setGptError(null);\n\n      try {\n        // Step 1: Get distance first\n        const distanceResult = await GoogleMapsService.getDistance(\n          originAddress,\n          destinationAddress\n        );\n\n        setTravelDistance(Math.round(distanceResult.distance));\n        setTravelTime(distanceResult.duration);\n\n        // Step 2: Calculate total cubic feet and weight from detections\n        const totalCubicFeet = detections.reduce((sum, d) => {\n          // Priority: detected value > mapping > 0 (shouldn't happen with estimator)\n          const cf = d.cubicFeet || mapping[d.label]?.cf || 0;\n          return sum + (cf * d.qty);\n        }, 0);\n\n        const totalWeight = detections.reduce((sum, d) => {\n          // Priority: detected weight > calculated from cubicFeet > mapping table > 0\n          let weight = 0;\n          if (d.weight && d.weight > 0) {\n            weight = d.weight;\n          } else if (d.cubicFeet && d.cubicFeet > 0) {\n            weight = d.cubicFeet * 7;\n          } else if (mapping[d.label]?.cf) {\n            weight = mapping[d.label].cf * 7;\n          }\n          return sum + (weight * d.qty);\n        }, 0);\n\n        console.log(` Volume Calculation: ${totalCubicFeet.toFixed(1)} cu ft, ${totalWeight.toFixed(0)} lbs total from ${detections.length} items`);\n\n        // Step 3: Call GPT for accurate move time calculation\n        const gptResult = await SaturnGPTService.calculateMoveTime({\n          detections: detections.map(d => ({\n            label: d.label,\n            qty: d.qty,\n            cubicFeet: d.cubicFeet || mapping[d.label]?.cf,\n            weight: d.weight || (mapping[d.label]?.cf ? mapping[d.label].cf * 7 : undefined),\n            size: d.size,\n            room: d.room\n          })),\n          distance: distanceResult.distance,\n          travelTime: distanceResult.duration,\n          originType,\n          destinationType,\n          stairsOrigin: baseEstimate.stairs,\n          stairsDestination,\n          elevatorOrigin: baseEstimate.elevator,\n          elevatorDestination,\n          floorOrigin,\n          floorDestination,\n          parkingOrigin,\n          parkingDestination\n        });\n\n        // Step 4: Update estimate with GPT results\n        setFinalEstimate({\n          ...baseEstimate,\n          hours: gptResult.hoursStandard,\n          crew: gptResult.recommendedCrew,\n          rate: gptResult.crewRate / gptResult.recommendedCrew,\n          total: gptResult.totalBeforeTax - gptResult.surchargesTotal,\n          travelMins: distanceResult.duration\n        });\n\n        // Step 5: Auto-apply detected upsells from GPT\n        const newUpsells = [...upsells];\n\n        // Update existing upsells with GPT recommendations\n        gptResult.detectedUpsells.forEach(gptUpsell => {\n          const existingIndex = newUpsells.findIndex(u => u.id === gptUpsell.id);\n          if (existingIndex >= 0) {\n            newUpsells[existingIndex] = {\n              ...newUpsells[existingIndex],\n              price: gptUpsell.price,\n              description: gptUpsell.reason,\n              recommended: true,\n              selected: gptUpsell.required || newUpsells[existingIndex].selected\n            };\n          } else {\n            // Add new upsell from GPT\n            newUpsells.push({\n              id: gptUpsell.id,\n              name: gptUpsell.name,\n              description: gptUpsell.reason,\n              price: gptUpsell.price,\n              recommended: true,\n              selected: gptUpsell.required\n            });\n          }\n        });\n\n        // Add specialty item surcharges as separate upsells\n        if (gptResult.specialtyItems.length > 0) {\n          gptResult.specialtyItems.forEach(item => {\n            const existingSpecialtyIndex = newUpsells.findIndex(u => u.id === `specialty-${item.category}`);\n            if (existingSpecialtyIndex < 0) {\n              newUpsells.push({\n                id: `specialty-${item.category}`,\n                name: `${item.item} Specialty Handling`,\n                description: `Specialty handling for ${item.item} (+${item.extraTime} min)`,\n                price: item.surcharge,\n                recommended: true,\n                selected: true\n              });\n            }\n          });\n        }\n\n        setUpsells(newUpsells);\n        setGptReasoning(gptResult.reasoning);\n        setGptBreakdown(gptResult.breakdown);\n\n      } catch (error: any) {\n        console.error('GPT Estimate Error:', error);\n        setGptError(error.message || 'Could not calculate estimate with GPT');\n\n        // Fallback to simple calculation if GPT fails\n        try {\n          const distanceResult = await GoogleMapsService.getDistance(\n            originAddress,\n            destinationAddress\n          );\n          const updatedEstimate = {\n            ...baseEstimate,\n            travelMins: distanceResult.duration\n          };\n          const result = calculateEstimate(detections, mapping, updatedEstimate);\n          setFinalEstimate({ ...updatedEstimate, ...result });\n        } catch (fallbackError: any) {\n          setDistanceError(fallbackError.message || 'Could not calculate distance');\n        }\n      } finally {\n        setIsCalculatingDistance(false);\n        setIsCalculatingGPT(false);\n      }\n    };\n\n    // Debounce to avoid too many API calls\n    const timer = setTimeout(() => {\n      calculateGPTEstimate();\n    }, 1500);\n\n    return () => clearTimeout(timer);\n  }, [originAddress, destinationAddress, detections, mapping, baseEstimate, originType, destinationType, stairsDestination, elevatorDestination, floorOrigin, floorDestination, parkingOrigin, parkingDestination]);\n\n  const handleUpsellToggle = (id: string) => {\n    setUpsells(prev => prev.map(u => \n      u.id === id ? { ...u, selected: !u.selected } : u\n    ));\n  };\n\n  const handleSendQuote = () => {\n    const totalUpsells = upsells.filter(u => u.selected).reduce((sum, u) => sum + u.price, 0);\n    const finalTotal = finalEstimate.total + totalUpsells;\n\n    navigate('/quote-preview', {\n      state: {\n        customerName: customerInfo.name,\n        customerEmail: customerInfo.email,\n        customerPhone: customerInfo.phone,\n        moveDate: customerInfo.moveDate,\n        originAddress,\n        destinationAddress,\n        detections,\n        estimate: finalEstimate,\n        upsells: upsells.filter(u => u.selected),\n        totalAmount: finalTotal,\n        photos: [] // Add photos if available\n      }\n    });\n  };\n\n  const handleDownloadPDF = async () => {\n    const totalUpsells = upsells.filter(u => u.selected).reduce((sum, u) => sum + u.price, 0);\n    const finalTotal = finalEstimate.total + totalUpsells;\n\n    try {\n      await SimplePDFService.downloadQuote({\n        customerName: customerInfo.name,\n        customerEmail: customerInfo.email,\n        customerPhone: customerInfo.phone,\n        moveDate: customerInfo.moveDate,\n        originAddress,\n        destinationAddress,\n        detections,\n        estimate: finalEstimate,\n        upsells: upsells.filter(u => u.selected),\n        totalAmount: finalTotal,\n        photos: [],\n        id: 'preview'\n      });\n    } catch (error) {\n      console.error('PDF download error:', error);\n      alert('Failed to download PDF. Please try again.');\n    }\n  };\n\n  const handleContinue = () => {\n    navigate('/dashboard');\n  };\n\n  const totalUpsells = upsells.filter(u => u.selected).reduce((sum, u) => sum + u.price, 0);\n  const finalTotal = finalEstimate.total + totalUpsells;\n\n  const totalItems = detections.reduce((sum, d) => sum + d.qty, 0);\n  const totalCubicFeet = detections.reduce((sum, detection) => {\n    const cf = detection.cubicFeet || mapping[detection.label]?.cf || 0;\n    const totalCf = cf * detection.qty;\n    \n    if (!detection.cubicFeet && !mapping[detection.label]?.cf) {\n      console.warn(` Missing cubicFeet for \"${detection.label}\" - using 0 as fallback`);\n    }\n    \n    return sum + totalCf;\n  }, 0);\n\n  const totalWeight = detections.reduce((sum, detection) => {\n    let weight = 0;\n    if (detection.weight && detection.weight > 0) {\n      weight = detection.weight;\n    } else if (detection.cubicFeet && detection.cubicFeet > 0) {\n      weight = detection.cubicFeet * 7;\n    } else if (mapping[detection.label]?.cf) {\n      weight = mapping[detection.label].cf * 7;\n    }\n    \n    const totalWeight = weight * detection.qty;\n    \n    if (!detection.weight && !detection.cubicFeet && !mapping[detection.label]?.cf) {\n      console.warn(` Missing weight for \"${detection.label}\" - using 0 as fallback`);\n    }\n    \n    return sum + totalWeight;\n  }, 0);\n\n  // Truck capacity check: 26ft truck = ~1,700 cubic feet\n  const TRUCK_CAPACITY = 1700;\n  const needsMultipleTrucks = totalCubicFeet > TRUCK_CAPACITY;\n  const estimatedTrucks = needsMultipleTrucks ? Math.ceil(totalCubicFeet / TRUCK_CAPACITY) : 1;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 transition-colors duration-200\">\n      {/* Header */}\n      <header className=\"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-b border-gray-200/50 dark:border-gray-700/50 sticky top-0 z-50 shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={() => navigate('/dashboard')}\n                className=\"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                </svg>\n              </button>\n              <div>\n                <h1 className=\"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent\">\n                  Complete Your Quote\n                </h1>\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">Review and finalize your moving estimate</p>\n              </div>\n            </div>\n            <ThemeToggle />\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8\">\n          {/* Left Column: Form */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            {/* Customer Information */}\n            <div className=\"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 p-6 lg:p-8 hover:shadow-xl transition-all duration-300\">\n              <div className=\"flex items-center space-x-3 mb-6\">\n                <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg\">\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                  </svg>\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-bold text-gray-900 dark:text-gray-100\">Customer Information</h2>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">Enter customer details for the quote</p>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-5\">\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                    Full Name <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={customerInfo.name}\n                    onChange={(e) => setCustomerInfo(prev => ({ ...prev, name: e.target.value }))}\n                    className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\"\n                    placeholder=\"John Doe\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                    Email Address <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"email\"\n                    value={customerInfo.email}\n                    onChange={(e) => setCustomerInfo(prev => ({ ...prev, email: e.target.value }))}\n                    className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\"\n                    placeholder=\"john@example.com\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                    Phone Number <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"tel\"\n                    value={customerInfo.phone}\n                    onChange={(e) => setCustomerInfo(prev => ({ ...prev, phone: e.target.value }))}\n                    className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\"\n                    placeholder=\"(555) 123-4567\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                    Move Date <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={customerInfo.moveDate}\n                    onChange={(e) => setCustomerInfo(prev => ({ ...prev, moveDate: e.target.value }))}\n                    className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100\"\n                    min={new Date().toISOString().split('T')[0]}\n                    required\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Origin & Destination */}\n            <div className=\"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 p-6 lg:p-8 hover:shadow-xl transition-all duration-300\">\n              <div className=\"flex items-center space-x-3 mb-6\">\n                <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-lg\">\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n                  </svg>\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-bold text-gray-900 dark:text-gray-100\">Origin & Destination</h2>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">Moving from and to locations</p>\n                </div>\n              </div>\n              <div className=\"space-y-5\">\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                    Origin Address\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={originAddress}\n                    onChange={(e) => setOriginAddress(e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\"\n                    placeholder=\"123 Main St, City, State\"\n                  />\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                      Origin Type\n                    </label>\n                    <select\n                      value={originType}\n                      onChange={(e) => setOriginType(e.target.value as any)}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\"\n                    >\n                      <option value=\"house\">House</option>\n                      <option value=\"apartment\">Apartment</option>\n                      <option value=\"condo\">Condo</option>\n                      <option value=\"business\">Business</option>\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                      Origin Floor (if applicable)\n                    </label>\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      value={floorOrigin || ''}\n                      onChange={(e) => setFloorOrigin(e.target.value ? parseInt(e.target.value) : undefined)}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\"\n                      placeholder=\"e.g. 3\"\n                    />\n                  </div>\n                </div>\n                <div className=\"flex flex-wrap gap-4\">\n                  <label className=\"flex items-center space-x-2 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={baseEstimate.stairs}\n                      disabled\n                      className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                    />\n                    <span className=\"text-sm text-gray-700\">Origin has stairs</span>\n                  </label>\n                  <label className=\"flex items-center space-x-2 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={baseEstimate.elevator}\n                      disabled\n                      className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                    />\n                    <span className=\"text-sm text-gray-700\">Origin has elevator</span>\n                  </label>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    Origin Parking\n                  </label>\n                  <select\n                    value={parkingOrigin}\n                    onChange={(e) => setParkingOrigin(e.target.value as any)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\"\n                  >\n                    <option value=\"driveway\">Driveway</option>\n                    <option value=\"street\">Street Parking</option>\n                    <option value=\"parking_lot\">Parking Lot</option>\n                    <option value=\"difficult\">Difficult/Limited</option>\n                  </select>\n                </div>\n\n                <div className=\"border-t border-gray-200 pt-5 mt-5\">\n                  <div className=\"mb-5\">\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                      Destination Address <span className=\"text-red-500\">*</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={destinationAddress}\n                      onChange={(e) => setDestinationAddress(e.target.value)}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\"\n                      placeholder=\"456 Oak Ave, City, State\"\n                      required\n                    />\n                  </div>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                        Destination Type\n                      </label>\n                      <select\n                        value={destinationType}\n                        onChange={(e) => setDestinationType(e.target.value as any)}\n                        className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\"\n                      >\n                        <option value=\"house\">House</option>\n                        <option value=\"apartment\">Apartment</option>\n                        <option value=\"condo\">Condo</option>\n                        <option value=\"business\">Business</option>\n                      </select>\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                        Destination Floor (if applicable)\n                      </label>\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={floorDestination || ''}\n                        onChange={(e) => setFloorDestination(e.target.value ? parseInt(e.target.value) : undefined)}\n                        className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\"\n                        placeholder=\"e.g. 5\"\n                      />\n                    </div>\n                  </div>\n                  <div className=\"flex flex-wrap gap-4 mt-4\">\n                    <label className=\"flex items-center space-x-2 cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={stairsDestination}\n                        onChange={(e) => setStairsDestination(e.target.checked)}\n                        className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700\">Destination has stairs</span>\n                    </label>\n                    <label className=\"flex items-center space-x-2 cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={elevatorDestination}\n                        onChange={(e) => setElevatorDestination(e.target.checked)}\n                        className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700\">Destination has elevator</span>\n                    </label>\n                  </div>\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                      Destination Parking\n                    </label>\n                    <select\n                      value={parkingDestination}\n                      onChange={(e) => setParkingDestination(e.target.value as any)}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white/50 hover:bg-white\"\n                    >\n                      <option value=\"driveway\">Driveway</option>\n                      <option value=\"street\">Street Parking</option>\n                      <option value=\"parking_lot\">Parking Lot</option>\n                      <option value=\"difficult\">Difficult/Limited</option>\n                    </select>\n                  </div>\n                </div>\n                \n                {/* Distance & Travel Time */}\n                <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-4 mt-5\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"text-sm font-semibold text-gray-700\">Travel Distance</div>\n                      {isCalculatingDistance ? (\n                        <div className=\"flex items-center space-x-2 mt-1\">\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"></div>\n                          <span className=\"text-xs text-gray-600\">Calculating...</span>\n                        </div>\n                      ) : travelDistance > 0 ? (\n                        <div className=\"text-lg font-bold text-gray-900 mt-1\">{travelDistance} miles</div>\n                      ) : (\n                        <div className=\"text-xs text-gray-500 mt-1\">Enter addresses to calculate</div>\n                      )}\n                    </div>\n                    {travelTime > 0 && (\n                      <div className=\"text-right\">\n                        <div className=\"text-sm font-semibold text-gray-700\">Travel Time</div>\n                        <div className=\"text-lg font-bold text-gray-900 mt-1\">{travelTime} min</div>\n                      </div>\n                    )}\n                  </div>\n                  {distanceError && (\n                    <p className=\"text-xs text-red-600 mt-2\">{distanceError}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Inventory Summary */}\n            <div className=\"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 p-6 lg:p-8 hover:shadow-xl transition-all duration-300\">\n              <div className=\"flex items-center space-x-3 mb-6\">\n                <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg\">\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\n                  </svg>\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-bold text-gray-900\">Detected Inventory</h2>\n                  <p className=\"text-sm text-gray-500\">{totalItems} items  {totalCubicFeet.toFixed(0)} cu ft  {totalWeight.toFixed(0)} lbs</p>\n                </div>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200\">\n                    <div className=\"text-xs font-semibold text-blue-700 uppercase mb-1\">Total Items</div>\n                    <div className=\"text-2xl font-bold text-blue-900\">{totalItems}</div>\n                  </div>\n                  <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200\">\n                    <div className=\"text-xs font-semibold text-purple-700 uppercase mb-1\">Total Volume</div>\n                    <div className=\"text-2xl font-bold text-purple-900\">{totalCubicFeet.toFixed(0)} <span className=\"text-sm\">cu ft</span></div>\n                  </div>\n                  <div className=\"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border border-orange-200\">\n                    <div className=\"text-xs font-semibold text-orange-700 uppercase mb-1\">Total Weight</div>\n                    <div className=\"text-2xl font-bold text-orange-900\">{totalWeight.toFixed(0)} <span className=\"text-sm\">lbs</span></div>\n                  </div>\n                </div>\n                \n                {/* Truck Capacity Warning */}\n                {needsMultipleTrucks && (\n                  <div className=\"bg-orange-50 border-2 border-orange-300 rounded-xl p-4\">\n                    <div className=\"flex items-start space-x-3\">\n                      <svg className=\"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                      </svg>\n                      <div>\n                        <div className=\"font-semibold text-orange-900 text-sm mb-1\">\n                           Truck Capacity Exceeded\n                        </div>\n                        <p className=\"text-xs text-orange-800 leading-relaxed\">\n                          Total volume ({totalCubicFeet.toFixed(0)} cu ft) exceeds 26ft truck capacity ({TRUCK_CAPACITY} cu ft).\n                          <br />\n                          <strong>Required: {estimatedTrucks} truck{estimatedTrucks > 1 ? 's' : ''} or multiple trips.</strong>\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {!needsMultipleTrucks && totalCubicFeet > 0 && (\n                  <div className=\"bg-green-50 border border-green-200 rounded-xl p-3\">\n                    <div className=\"flex items-center space-x-2 text-sm\">\n                      <svg className=\"w-4 h-4 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                      <span className=\"text-green-800 font-medium\">\n                         Fits in single 26ft truck ({totalCubicFeet.toFixed(0)} / {TRUCK_CAPACITY} cu ft)\n                      </span>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Additional Services / Upsells */}\n            <div className=\"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 p-6 lg:p-8 hover:shadow-xl transition-all duration-300\">\n              <div className=\"flex items-center space-x-3 mb-6\">\n                <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center shadow-lg\">\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z\" />\n                  </svg>\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-bold text-gray-900\">Additional Services</h2>\n                  <p className=\"text-sm text-gray-500\">Enhance your move with these services</p>\n                </div>\n              </div>\n              <div className=\"space-y-3\">\n                {upsells.map((upsell) => (\n                  <label\n                    key={upsell.id}\n                    className={`flex items-start p-4 border-2 rounded-xl cursor-pointer transition-all duration-200 ${\n                      upsell.selected\n                        ? 'border-green-500 bg-gradient-to-r from-green-50 to-emerald-50 shadow-md'\n                        : upsell.recommended\n                        ? 'border-yellow-300 bg-gradient-to-r from-yellow-50 to-amber-50 hover:border-yellow-400'\n                        : 'border-gray-200 bg-white/50 hover:border-gray-300 hover:bg-white'\n                    }`}\n                  >\n                    <input\n                      type=\"checkbox\"\n                      checked={upsell.selected}\n                      onChange={() => handleUpsellToggle(upsell.id)}\n                      className=\"mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                    />\n                    <div className=\"ml-3 flex-1\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-2 flex-wrap\">\n                            <span className=\"font-semibold text-gray-900\">{upsell.name}</span>\n                            {upsell.selected && (\n                              <span className=\"text-xs bg-green-200 text-green-800 px-2 py-0.5 rounded-full font-medium\">\n                                 Selected\n                              </span>\n                            )}\n                            {upsell.recommended && !upsell.selected && (\n                              <span className=\"text-xs bg-yellow-200 text-yellow-800 px-2 py-0.5 rounded-full font-medium\">\n                                 Recommended\n                              </span>\n                            )}\n                          </div>\n                          <p className=\"text-sm text-gray-600 mt-1\">{upsell.description}</p>\n                        </div>\n                        <span className=\"font-bold text-gray-900 ml-4 text-lg\">\n                          ${upsell.price.toFixed(2)}\n                        </span>\n                      </div>\n                    </div>\n                  </label>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* Right Column: Quote Summary */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 p-6 sticky top-24\">\n              <div className=\"flex items-center space-x-3 mb-6\">\n                <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg\">\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-bold text-gray-900\">Quote Summary</h2>\n                  <p className=\"text-sm text-gray-500\">Final pricing breakdown</p>\n                </div>\n              </div>\n              \n              <div className=\"space-y-4\">\n                {/* Truck Capacity Alert in Summary */}\n                {needsMultipleTrucks && (\n                  <div className=\"bg-orange-50 border-2 border-orange-400 rounded-xl p-3\">\n                    <div className=\"flex items-start space-x-2\">\n                      <svg className=\"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                      </svg>\n                      <div>\n                        <div className=\"text-sm font-bold text-orange-900 mb-1\">\n                          Multiple Trucks Required\n                        </div>\n                        <p className=\"text-xs text-orange-800\">\n                          Volume: <strong>{totalCubicFeet.toFixed(0)} cu ft</strong> exceeds single truck capacity.\n                          <br />\n                          <strong>{estimatedTrucks} truck{estimatedTrucks > 1 ? 's' : ''} needed</strong>\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {gptBreakdown && (\n                  <div className=\"bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200 rounded-xl p-4\">\n                    <div className=\"flex items-center space-x-2 mb-3\">\n                      <svg className=\"w-5 h-5 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                      </svg>\n                      <span className=\"text-sm font-semibold text-purple-900\">AI-Powered Estimate</span>\n                    </div>\n                    <div className=\"space-y-2 text-xs\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Loading:</span>\n                        <span className=\"font-semibold\">{gptBreakdown.loadingHours.toFixed(1)}h</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Travel:</span>\n                        <span className=\"font-semibold\">{gptBreakdown.travelHours.toFixed(1)}h</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Unloading:</span>\n                        <span className=\"font-semibold\">{gptBreakdown.unloadingHours.toFixed(1)}h</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Setup:</span>\n                        <span className=\"font-semibold\">{gptBreakdown.setupHours.toFixed(1)}h</span>\n                      </div>\n                      <div className=\"flex justify-between border-t pt-1 mt-1\">\n                        <span className=\"text-gray-600\">Buffer:</span>\n                        <span className=\"font-semibold\">{gptBreakdown.bufferHours.toFixed(1)}h</span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {gptReasoning && (\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\n                    <h3 className=\"text-xs font-semibold text-blue-900 mb-2\"> AI Analysis</h3>\n                    <p className=\"text-xs text-blue-800 leading-relaxed\">{gptReasoning}</p>\n                  </div>\n                )}\n\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-600\">Base Moving Cost:</span>\n                    <span className=\"font-semibold text-gray-900\">${finalEstimate.total.toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-600\">Estimated Time:</span>\n                    <span className=\"font-semibold text-gray-900\">{finalEstimate.hours.toFixed(1)} hours</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-600\">Crew Size:</span>\n                    <span className=\"font-semibold text-gray-900\">{finalEstimate.crew} people</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-600\">Travel Time:</span>\n                    <span className=\"font-semibold text-gray-900\">{finalEstimate.travelMins} min</span>\n                  </div>\n                </div>\n\n                {totalUpsells > 0 && (\n                  <div className=\"pt-4 border-t border-gray-200\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Additional Services:</span>\n                      <span className=\"font-semibold text-gray-900\">${totalUpsells.toFixed(2)}</span>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"pt-4 border-t-2 border-gray-300\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-lg font-bold text-gray-900\">Total:</span>\n                    <span className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\n                      ${finalTotal.toFixed(2)}\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"mt-6 space-y-3\">\n                  <button\n                    onClick={handleSendQuote}\n                    disabled={!destinationAddress || !customerInfo.name || !customerInfo.email || !customerInfo.phone || !customerInfo.moveDate || isCalculatingGPT}\n                    className=\"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold py-3.5 px-4 rounded-xl transition-all duration-200 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl disabled:shadow-none\"\n                  >\n                    {isCalculatingGPT ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\n                        <span>Calculating...</span>\n                      </>\n                    ) : (\n                      <>\n                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                        </svg>\n                        <span>Send Quote via Email</span>\n                      </>\n                    )}\n                  </button>\n                  \n                  <button\n                    onClick={handleDownloadPDF}\n                    disabled={!destinationAddress || !customerInfo.name || !customerInfo.email || !customerInfo.phone || !customerInfo.moveDate}\n                    className=\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold py-3.5 px-4 rounded-xl transition-all duration-200 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl disabled:shadow-none\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                    </svg>\n                    <span>Download PDF Quote</span>\n                  </button>\n                  \n                  <button\n                    onClick={handleContinue}\n                    disabled={!destinationAddress || !customerInfo.name || !customerInfo.email || !customerInfo.phone || !customerInfo.moveDate}\n                    className=\"w-full bg-gray-100 hover:bg-gray-200 disabled:bg-gray-100 text-gray-700 font-semibold py-3 px-4 rounded-xl transition-colors duration-200 disabled:cursor-not-allowed border border-gray-300\"\n                  >\n                    Save & Continue Later\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}