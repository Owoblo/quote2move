{"ast":null,"code":"/**\n * Quote Service for managing quotes in Supabase\n */\n\nimport { supabase } from './supabase';\nexport class QuoteService {\n  static async createQuote(quoteData) {\n    const {\n      data,\n      error\n    } = await supabase.from('quotes').insert({\n      customer_name: quoteData.customerName,\n      customer_email: quoteData.customerEmail,\n      customer_phone: quoteData.customerPhone,\n      move_date: quoteData.moveDate,\n      origin_address: quoteData.originAddress,\n      destination_address: quoteData.destinationAddress,\n      detections: quoteData.detections,\n      estimate: quoteData.estimate,\n      upsells: quoteData.upsells,\n      total_amount: quoteData.totalAmount,\n      photos: quoteData.photos || [],\n      status: quoteData.status || 'pending',\n      questions: quoteData.questions || []\n    }).select().single();\n    if (error) throw error;\n    return {\n      id: data.id,\n      customerName: data.customer_name,\n      customerEmail: data.customer_email,\n      customerPhone: data.customer_phone,\n      moveDate: data.move_date,\n      originAddress: data.origin_address,\n      destinationAddress: data.destination_address,\n      detections: data.detections,\n      estimate: data.estimate,\n      upsells: data.upsells,\n      totalAmount: data.total_amount,\n      photos: data.photos,\n      status: data.status,\n      questions: data.questions\n    };\n  }\n  static async getQuote(quoteId) {\n    const {\n      data,\n      error\n    } = await supabase.from('quotes').select('*').eq('id', quoteId).single();\n    if (error) {\n      if (error.code === 'PGRST116') return null; // Not found\n      throw error;\n    }\n    return {\n      id: data.id,\n      customerName: data.customer_name,\n      customerEmail: data.customer_email,\n      customerPhone: data.customer_phone,\n      moveDate: data.move_date,\n      originAddress: data.origin_address,\n      destinationAddress: data.destination_address,\n      detections: data.detections,\n      estimate: data.estimate,\n      upsells: data.upsells,\n      totalAmount: data.total_amount,\n      photos: data.photos,\n      status: data.status,\n      questions: data.questions\n    };\n  }\n  static async updateQuoteStatus(quoteId, status) {\n    const {\n      error\n    } = await supabase.from('quotes').update({\n      status\n    }).eq('id', quoteId);\n    if (error) throw error;\n  }\n  static async getUserQuotes() {\n    const {\n      data,\n      error\n    } = await supabase.from('quotes').select('*').order('created_at', {\n      ascending: false\n    });\n    if (error) throw error;\n    return data.map(quote => ({\n      id: quote.id,\n      customerName: quote.customer_name,\n      customerEmail: quote.customer_email,\n      customerPhone: quote.customer_phone,\n      moveDate: quote.move_date,\n      originAddress: quote.origin_address,\n      destinationAddress: quote.destination_address,\n      detections: quote.detections,\n      estimate: quote.estimate,\n      upsells: quote.upsells,\n      totalAmount: quote.total_amount,\n      photos: quote.photos,\n      status: quote.status,\n      questions: quote.questions\n    }));\n  }\n}","map":{"version":3,"names":["supabase","QuoteService","createQuote","quoteData","data","error","from","insert","customer_name","customerName","customer_email","customerEmail","customer_phone","customerPhone","move_date","moveDate","origin_address","originAddress","destination_address","destinationAddress","detections","estimate","upsells","total_amount","totalAmount","photos","status","questions","select","single","id","getQuote","quoteId","eq","code","updateQuoteStatus","update","getUserQuotes","order","ascending","map","quote"],"sources":["/Users/admin/random/src/lib/quoteService.ts"],"sourcesContent":["/**\n * Quote Service for managing quotes in Supabase\n */\n\nimport { supabase } from './supabase';\n\nexport interface QuoteData {\n  id?: string;\n  customerName: string;\n  customerEmail: string;\n  customerPhone: string;\n  moveDate: string;\n  originAddress: string;\n  destinationAddress: string;\n  detections: any[];\n  estimate: any;\n  upsells: any[];\n  totalAmount: number;\n  photos?: any[];\n  status?: 'pending' | 'accepted' | 'declined';\n  questions?: string[];\n}\n\nexport class QuoteService {\n  static async createQuote(quoteData: QuoteData): Promise<QuoteData> {\n    const { data, error } = await supabase\n      .from('quotes')\n      .insert({\n        customer_name: quoteData.customerName,\n        customer_email: quoteData.customerEmail,\n        customer_phone: quoteData.customerPhone,\n        move_date: quoteData.moveDate,\n        origin_address: quoteData.originAddress,\n        destination_address: quoteData.destinationAddress,\n        detections: quoteData.detections,\n        estimate: quoteData.estimate,\n        upsells: quoteData.upsells,\n        total_amount: quoteData.totalAmount,\n        photos: quoteData.photos || [],\n        status: quoteData.status || 'pending',\n        questions: quoteData.questions || []\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    return {\n      id: data.id,\n      customerName: data.customer_name,\n      customerEmail: data.customer_email,\n      customerPhone: data.customer_phone,\n      moveDate: data.move_date,\n      originAddress: data.origin_address,\n      destinationAddress: data.destination_address,\n      detections: data.detections,\n      estimate: data.estimate,\n      upsells: data.upsells,\n      totalAmount: data.total_amount,\n      photos: data.photos,\n      status: data.status,\n      questions: data.questions\n    };\n  }\n\n  static async getQuote(quoteId: string): Promise<QuoteData | null> {\n    const { data, error } = await supabase\n      .from('quotes')\n      .select('*')\n      .eq('id', quoteId)\n      .single();\n\n    if (error) {\n      if (error.code === 'PGRST116') return null; // Not found\n      throw error;\n    }\n\n    return {\n      id: data.id,\n      customerName: data.customer_name,\n      customerEmail: data.customer_email,\n      customerPhone: data.customer_phone,\n      moveDate: data.move_date,\n      originAddress: data.origin_address,\n      destinationAddress: data.destination_address,\n      detections: data.detections,\n      estimate: data.estimate,\n      upsells: data.upsells,\n      totalAmount: data.total_amount,\n      photos: data.photos,\n      status: data.status,\n      questions: data.questions\n    };\n  }\n\n  static async updateQuoteStatus(quoteId: string, status: 'pending' | 'accepted' | 'declined'): Promise<void> {\n    const { error } = await supabase\n      .from('quotes')\n      .update({ status })\n      .eq('id', quoteId);\n\n    if (error) throw error;\n  }\n\n  static async getUserQuotes(): Promise<QuoteData[]> {\n    const { data, error } = await supabase\n      .from('quotes')\n      .select('*')\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n\n    return data.map(quote => ({\n      id: quote.id,\n      customerName: quote.customer_name,\n      customerEmail: quote.customer_email,\n      customerPhone: quote.customer_phone,\n      moveDate: quote.move_date,\n      originAddress: quote.origin_address,\n      destinationAddress: quote.destination_address,\n      detections: quote.detections,\n      estimate: quote.estimate,\n      upsells: quote.upsells,\n      totalAmount: quote.total_amount,\n      photos: quote.photos,\n      status: quote.status,\n      questions: quote.questions\n    }));\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}