{"ast":null,"code":"export function calculateEstimate(detections,mapping,params){let totalMinutes=0;let totalCubicFeet=0;// Calculate total time and cubic feet based on detections\ndetections.forEach(detection=>{const mappingItem=mapping[detection.label];if(mappingItem){totalMinutes+=mappingItem.minutes*detection.qty;totalCubicFeet+=mappingItem.cf*detection.qty;}});// Add travel time\ntotalMinutes+=params.travelMins;// Apply stairs/elevator multipliers\nif(params.stairs){totalMinutes*=1.3;// 30% increase for stairs\n}if(params.elevator){totalMinutes*=1.1;// 10% increase for elevator\n}// Apply safety factor\nconst safetyMultiplier=1+params.safetyPct/100;totalMinutes*=safetyMultiplier;// Convert to hours\nconst hours=totalMinutes/60;// Suggest crew size based on cubic feet and complexity\nlet crewSuggestion=2;if(totalCubicFeet>1000)crewSuggestion=4;else if(totalCubicFeet>500)crewSuggestion=3;// Adjust for stairs/elevator\nif(params.stairs)crewSuggestion=Math.min(crewSuggestion+1,6);if(params.elevator)crewSuggestion=Math.min(crewSuggestion+1,6);// Calculate total cost\nconst total=hours*params.rate*params.crew;return{hours:Math.round(hours*10)/10,// Round to 1 decimal\ncrewSuggestion,total:Math.round(total)};}","map":{"version":3,"names":["calculateEstimate","detections","mapping","params","totalMinutes","totalCubicFeet","forEach","detection","mappingItem","label","minutes","qty","cf","travelMins","stairs","elevator","safetyMultiplier","safetyPct","hours","crewSuggestion","Math","min","total","rate","crew","round"],"sources":["/Users/admin/random/src/lib/estimate.ts"],"sourcesContent":["import { Detection, MappingTable, Estimate } from '../types';\n\nexport interface EstimateResult {\n  hours: number;\n  crewSuggestion: number;\n  total: number;\n}\n\nexport function calculateEstimate(\n  detections: Detection[],\n  mapping: MappingTable,\n  params: Omit<Estimate, 'hours' | 'total'>\n): EstimateResult {\n  let totalMinutes = 0;\n  let totalCubicFeet = 0;\n\n  // Calculate total time and cubic feet based on detections\n  detections.forEach(detection => {\n    const mappingItem = mapping[detection.label];\n    if (mappingItem) {\n      totalMinutes += mappingItem.minutes * detection.qty;\n      totalCubicFeet += mappingItem.cf * detection.qty;\n    }\n  });\n\n  // Add travel time\n  totalMinutes += params.travelMins;\n\n  // Apply stairs/elevator multipliers\n  if (params.stairs) {\n    totalMinutes *= 1.3; // 30% increase for stairs\n  }\n  if (params.elevator) {\n    totalMinutes *= 1.1; // 10% increase for elevator\n  }\n\n  // Apply safety factor\n  const safetyMultiplier = 1 + (params.safetyPct / 100);\n  totalMinutes *= safetyMultiplier;\n\n  // Convert to hours\n  const hours = totalMinutes / 60;\n\n  // Suggest crew size based on cubic feet and complexity\n  let crewSuggestion = 2;\n  if (totalCubicFeet > 1000) crewSuggestion = 4;\n  else if (totalCubicFeet > 500) crewSuggestion = 3;\n  \n  // Adjust for stairs/elevator\n  if (params.stairs) crewSuggestion = Math.min(crewSuggestion + 1, 6);\n  if (params.elevator) crewSuggestion = Math.min(crewSuggestion + 1, 6);\n\n  // Calculate total cost\n  const total = hours * params.rate * params.crew;\n\n  return {\n    hours: Math.round(hours * 10) / 10, // Round to 1 decimal\n    crewSuggestion,\n    total: Math.round(total)\n  };\n}\n\n"],"mappings":"AAQA,MAAO,SAAS,CAAAA,iBAAiBA,CAC/BC,UAAuB,CACvBC,OAAqB,CACrBC,MAAyC,CACzB,CAChB,GAAI,CAAAC,YAAY,CAAG,CAAC,CACpB,GAAI,CAAAC,cAAc,CAAG,CAAC,CAEtB;AACAJ,UAAU,CAACK,OAAO,CAACC,SAAS,EAAI,CAC9B,KAAM,CAAAC,WAAW,CAAGN,OAAO,CAACK,SAAS,CAACE,KAAK,CAAC,CAC5C,GAAID,WAAW,CAAE,CACfJ,YAAY,EAAII,WAAW,CAACE,OAAO,CAAGH,SAAS,CAACI,GAAG,CACnDN,cAAc,EAAIG,WAAW,CAACI,EAAE,CAAGL,SAAS,CAACI,GAAG,CAClD,CACF,CAAC,CAAC,CAEF;AACAP,YAAY,EAAID,MAAM,CAACU,UAAU,CAEjC;AACA,GAAIV,MAAM,CAACW,MAAM,CAAE,CACjBV,YAAY,EAAI,GAAG,CAAE;AACvB,CACA,GAAID,MAAM,CAACY,QAAQ,CAAE,CACnBX,YAAY,EAAI,GAAG,CAAE;AACvB,CAEA;AACA,KAAM,CAAAY,gBAAgB,CAAG,CAAC,CAAIb,MAAM,CAACc,SAAS,CAAG,GAAI,CACrDb,YAAY,EAAIY,gBAAgB,CAEhC;AACA,KAAM,CAAAE,KAAK,CAAGd,YAAY,CAAG,EAAE,CAE/B;AACA,GAAI,CAAAe,cAAc,CAAG,CAAC,CACtB,GAAId,cAAc,CAAG,IAAI,CAAEc,cAAc,CAAG,CAAC,CAAC,IACzC,IAAId,cAAc,CAAG,GAAG,CAAEc,cAAc,CAAG,CAAC,CAEjD;AACA,GAAIhB,MAAM,CAACW,MAAM,CAAEK,cAAc,CAAGC,IAAI,CAACC,GAAG,CAACF,cAAc,CAAG,CAAC,CAAE,CAAC,CAAC,CACnE,GAAIhB,MAAM,CAACY,QAAQ,CAAEI,cAAc,CAAGC,IAAI,CAACC,GAAG,CAACF,cAAc,CAAG,CAAC,CAAE,CAAC,CAAC,CAErE;AACA,KAAM,CAAAG,KAAK,CAAGJ,KAAK,CAAGf,MAAM,CAACoB,IAAI,CAAGpB,MAAM,CAACqB,IAAI,CAE/C,MAAO,CACLN,KAAK,CAAEE,IAAI,CAACK,KAAK,CAACP,KAAK,CAAG,EAAE,CAAC,CAAG,EAAE,CAAE;AACpCC,cAAc,CACdG,KAAK,CAAEF,IAAI,CAACK,KAAK,CAACH,KAAK,CACzB,CAAC,CACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}