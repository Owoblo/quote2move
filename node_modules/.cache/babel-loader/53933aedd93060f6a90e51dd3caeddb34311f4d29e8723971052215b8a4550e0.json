{"ast":null,"code":"// OpenAI GPT-4 Vision - PRIMARY AND ONLY detection method for maximum accuracy\nexport const detectFurniture = async photoUrls => {\n  console.log('Starting OpenAI GPT-4 Vision detection for', photoUrls.length, 'photos');\n  console.log('OpenAI API Key configured:', !!process.env.REACT_APP_OPENAI_API_KEY);\n  if (!process.env.REACT_APP_OPENAI_API_KEY) {\n    throw new Error('OpenAI API key not configured');\n  }\n  const allDetections = [];\n  for (const photoUrl of photoUrls) {\n    try {\n      console.log('Analyzing photo with OpenAI GPT-4 Vision:', photoUrl);\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${process.env.REACT_APP_OPENAI_API_KEY}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          // Using latest GPT-4o model for best accuracy\n          messages: [{\n            role: 'user',\n            content: [{\n              type: 'text',\n              text: `You are a professional MOVING COMPANY inventory specialist. Analyze this real estate photo and identify ONLY items that professional movers can physically move and transport.\n\nðŸšš MOVER'S INVENTORY - ONLY DETECT MOVABLE ITEMS:\n\nâœ… MOVABLE FURNITURE & ITEMS (DETECT THESE):\n- SEATING: Sofas, Sectionals, Loveseats, Recliners, Chairs (Dining, Office, Accent), Ottomans, Benches, Stools\n- TABLES: Dining Tables, Coffee Tables, End Tables, Console Tables, Side Tables, Kitchen Islands (if freestanding)\n- BEDS: King Beds, Queen Beds, Twin Beds, Bunk Beds, Daybeds, Futons, Mattresses, Box Springs\n- STORAGE: Dressers, Chests of Drawers, Nightstands, Bookshelves, Freestanding Cabinets, Wardrobes, Armoires\n- APPLIANCES: Refrigerators, Stoves, Ovens, Microwaves, Dishwashers, Washers, Dryers, Toasters, Coffee Makers\n- ELECTRONICS: TVs, Monitors, Computers, Laptops, Sound Systems, Gaming Consoles, Speakers\n- DECOR: Floor Lamps, Table Lamps, Mirrors (wall-mounted), Artwork, Plants, Vases, Clocks, Area Rugs\n- KITCHEN: Freestanding Pantries, Wine Racks, Bar Stools, Kitchen Carts\n- OUTDOOR: Patio Furniture, Grills, Outdoor Chairs/Tables\n\nâŒ DO NOT DETECT (FIXED INSTALLATIONS):\n- Built-in cabinets, Built-in shelving, Built-in vanities\n- Chandeliers, Ceiling fans, Light fixtures\n- Built-in appliances (dishwashers, built-in ovens)\n- Built-in bathroom vanities, Medicine cabinets\n- Built-in wardrobes, Built-in closets\n- Wall-mounted items (unless easily removable)\n- Built-in countertops, Built-in islands\n- Fixed mirrors, Built-in mirrors\n- Built-in seating, Built-in benches\n\nCRITICAL REQUIREMENTS:\n1. COUNT EXACT QUANTITIES - If you see 4 dining chairs, write qty: 4\n2. BE HIGHLY SPECIFIC - \"Large Oak Dining Table\", \"Sectional Sofa with Ottoman\", \"King Size Platform Bed\"\n3. INCLUDE ROOM CONTEXT - \"Master Bedroom Dresser\", \"Kitchen Island Stools\", \"Living Room Coffee Table\"\n4. DISTINGUISH SIMILAR ITEMS - \"Coffee Table\" vs \"End Table\" vs \"Console Table\"\n5. SIZE DESCRIPTORS - CRITICAL FOR MOVERS:\n   - TVs: Estimate screen size in inches (e.g., \"40-50 inch TV\", \"55-65 inch TV\", \"70+ inch TV\"). If unsure, provide a reasonable range based on visual scale compared to furniture nearby.\n   - Furniture: Provide dimensions or size range when possible (e.g., \"Large (7-8 ft)\", \"Small (4-5 ft)\", \"Queen Size\", \"King Size\"). Estimate based on visual scale or standard sizes.\n   - If exact size is unclear, provide a reasonable range (e.g., \"Medium-Large\", \"30-40 inches wide\")\n6. ONLY MOVABLE ITEMS - Skip anything permanently attached or built-in\n\nReturn ONLY a valid JSON array with objects containing:\n- label: VERY SPECIFIC movable furniture type with descriptors (string)\n- qty: EXACT quantity visible (number) \n- confidence: confidence score 0-1 (number)\n- notes: room location and specific details (string)\n- room: room type (string)\n- size: size descriptor with specific measurements or ranges - CRITICAL for TVs: estimate inches (e.g., \"55-inch\", \"65-75 inch range\"). For furniture: dimensions or size category with ranges (e.g., \"Large (7-8 ft)\", \"Queen Size\", \"30-40 inches wide\")\n\nEXAMPLE OUTPUT:\n[\n  {\n    \"label\": \"Large Oak Dining Table\",\n    \"qty\": 1,\n    \"confidence\": 0.98,\n    \"notes\": \"Dining room centerpiece, seats 6-8 people\",\n    \"room\": \"Dining Room\",\n    \"size\": \"Large\"\n  },\n  {\n    \"label\": \"Dining Chairs\",\n    \"qty\": 6,\n    \"confidence\": 0.95,\n    \"notes\": \"Matching upholstered dining chairs around table\",\n    \"room\": \"Dining Room\",\n    \"size\": \"Standard\"\n  }\n]\n\nRemember: Only detect items that professional movers can physically pick up and transport. Skip built-in, fixed, or permanently installed items.`\n            }, {\n              type: 'image_url',\n              image_url: {\n                url: photoUrl,\n                detail: 'high' // Maximum detail for best accuracy\n              }\n            }]\n          }],\n          max_tokens: 2000,\n          // Increased for detailed responses\n          temperature: 0.1 // Low temperature for consistent, accurate results\n        })\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('OpenAI API error:', response.status, errorText);\n        continue;\n      }\n      const data = await response.json();\n      const content = data.choices[0].message.content;\n      console.log('OpenAI response:', content);\n\n      // Parse the JSON response\n      try {\n        // Clean the response by removing markdown code blocks\n        let cleanContent = content.trim();\n        if (cleanContent.startsWith('```json')) {\n          cleanContent = cleanContent.replace(/^```json\\s*/, '').replace(/\\s*```$/, '');\n        } else if (cleanContent.startsWith('```')) {\n          cleanContent = cleanContent.replace(/^```\\s*/, '').replace(/\\s*```$/, '');\n        }\n        const analysis = JSON.parse(cleanContent);\n\n        // Add source photo ID to each detection\n        analysis.forEach(item => {\n          allDetections.push({\n            label: item.label,\n            qty: item.qty || 1,\n            confidence: item.confidence || 0.9,\n            sourcePhotoId: photoUrl,\n            notes: item.notes || `Detected by OpenAI GPT-4o`,\n            room: item.room || 'Unknown Room',\n            size: item.size || ''\n          });\n        });\n        console.log(`Detected ${analysis.length} items in photo`);\n      } catch (parseError) {\n        console.error('Failed to parse OpenAI response:', parseError);\n        console.log('Raw response:', content);\n      }\n    } catch (error) {\n      console.error('OpenAI Vision error:', error);\n      // Continue with other photos even if one fails\n    }\n  }\n  console.log(`Total detections before deduplication: ${allDetections.length}`);\n  const deduplicated = deduplicateDetections(allDetections);\n  console.log(`Total detections after deduplication: ${deduplicated.length}`);\n  console.log(`Duplicates removed: ${allDetections.length - deduplicated.length}`);\n  return deduplicated;\n};\n\n// Enhanced deduplication for maximum accuracy\nconst deduplicateDetections = detections => {\n  const deduplicated = [];\n  const seen = new Map();\n  let duplicatesFound = 0;\n  detections.forEach(detection => {\n    // Create a sophisticated key that includes room and size context\n    const normalizedLabel = detection.label.toLowerCase().replace(/\\b(large|small|big|little|tall|short|wide|narrow|standard|medium)\\b/g, '').replace(/\\s+/g, ' ').trim();\n    const key = `${normalizedLabel}-${detection.room}-${detection.sourcePhotoId}`;\n    if (!seen.has(key)) {\n      seen.set(key, detection);\n      deduplicated.push(detection);\n    } else {\n      // Merge quantities for similar items in the same photo and room\n      const existing = seen.get(key);\n      console.log(`ðŸ”„ Merging duplicate: \"${detection.label}\" (${detection.qty} + ${existing.qty} = ${detection.qty + existing.qty})`);\n      existing.qty += detection.qty;\n      existing.confidence = Math.max(existing.confidence, detection.confidence);\n      duplicatesFound++;\n\n      // Update notes to include both descriptions\n      if (detection.notes && detection.notes !== existing.notes) {\n        existing.notes = `${existing.notes}; ${detection.notes}`;\n      }\n    }\n  });\n  console.log(`âœ… Deduplication complete: ${deduplicated.length} unique items, ${duplicatesFound} duplicates merged`);\n  return deduplicated;\n};","map":{"version":3,"names":["detectFurniture","photoUrls","console","log","length","process","env","REACT_APP_OPENAI_API_KEY","Error","allDetections","photoUrl","response","fetch","method","headers","body","JSON","stringify","model","messages","role","content","type","text","image_url","url","detail","max_tokens","temperature","ok","errorText","error","status","data","json","choices","message","cleanContent","trim","startsWith","replace","analysis","parse","forEach","item","push","label","qty","confidence","sourcePhotoId","notes","room","size","parseError","deduplicated","deduplicateDetections","detections","seen","Map","duplicatesFound","detection","normalizedLabel","toLowerCase","key","has","set","existing","get","Math","max"],"sources":["/Users/admin/random/src/lib/aiDetectionServices.ts"],"sourcesContent":["import { Detection } from '../types';\n\n// OpenAI GPT-4 Vision - PRIMARY AND ONLY detection method for maximum accuracy\nexport const detectFurniture = async (photoUrls: string[]): Promise<Detection[]> => {\n  console.log('Starting OpenAI GPT-4 Vision detection for', photoUrls.length, 'photos');\n  console.log('OpenAI API Key configured:', !!process.env.REACT_APP_OPENAI_API_KEY);\n  \n  if (!process.env.REACT_APP_OPENAI_API_KEY) {\n    throw new Error('OpenAI API key not configured');\n  }\n\n  const allDetections: Detection[] = [];\n  \n  for (const photoUrl of photoUrls) {\n    try {\n      console.log('Analyzing photo with OpenAI GPT-4 Vision:', photoUrl);\n      \n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${process.env.REACT_APP_OPENAI_API_KEY}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o', // Using latest GPT-4o model for best accuracy\n          messages: [{\n            role: 'user',\n            content: [\n                {\n                  type: 'text',\n                  text: `You are a professional MOVING COMPANY inventory specialist. Analyze this real estate photo and identify ONLY items that professional movers can physically move and transport.\n\nðŸšš MOVER'S INVENTORY - ONLY DETECT MOVABLE ITEMS:\n\nâœ… MOVABLE FURNITURE & ITEMS (DETECT THESE):\n- SEATING: Sofas, Sectionals, Loveseats, Recliners, Chairs (Dining, Office, Accent), Ottomans, Benches, Stools\n- TABLES: Dining Tables, Coffee Tables, End Tables, Console Tables, Side Tables, Kitchen Islands (if freestanding)\n- BEDS: King Beds, Queen Beds, Twin Beds, Bunk Beds, Daybeds, Futons, Mattresses, Box Springs\n- STORAGE: Dressers, Chests of Drawers, Nightstands, Bookshelves, Freestanding Cabinets, Wardrobes, Armoires\n- APPLIANCES: Refrigerators, Stoves, Ovens, Microwaves, Dishwashers, Washers, Dryers, Toasters, Coffee Makers\n- ELECTRONICS: TVs, Monitors, Computers, Laptops, Sound Systems, Gaming Consoles, Speakers\n- DECOR: Floor Lamps, Table Lamps, Mirrors (wall-mounted), Artwork, Plants, Vases, Clocks, Area Rugs\n- KITCHEN: Freestanding Pantries, Wine Racks, Bar Stools, Kitchen Carts\n- OUTDOOR: Patio Furniture, Grills, Outdoor Chairs/Tables\n\nâŒ DO NOT DETECT (FIXED INSTALLATIONS):\n- Built-in cabinets, Built-in shelving, Built-in vanities\n- Chandeliers, Ceiling fans, Light fixtures\n- Built-in appliances (dishwashers, built-in ovens)\n- Built-in bathroom vanities, Medicine cabinets\n- Built-in wardrobes, Built-in closets\n- Wall-mounted items (unless easily removable)\n- Built-in countertops, Built-in islands\n- Fixed mirrors, Built-in mirrors\n- Built-in seating, Built-in benches\n\nCRITICAL REQUIREMENTS:\n1. COUNT EXACT QUANTITIES - If you see 4 dining chairs, write qty: 4\n2. BE HIGHLY SPECIFIC - \"Large Oak Dining Table\", \"Sectional Sofa with Ottoman\", \"King Size Platform Bed\"\n3. INCLUDE ROOM CONTEXT - \"Master Bedroom Dresser\", \"Kitchen Island Stools\", \"Living Room Coffee Table\"\n4. DISTINGUISH SIMILAR ITEMS - \"Coffee Table\" vs \"End Table\" vs \"Console Table\"\n5. SIZE DESCRIPTORS - CRITICAL FOR MOVERS:\n   - TVs: Estimate screen size in inches (e.g., \"40-50 inch TV\", \"55-65 inch TV\", \"70+ inch TV\"). If unsure, provide a reasonable range based on visual scale compared to furniture nearby.\n   - Furniture: Provide dimensions or size range when possible (e.g., \"Large (7-8 ft)\", \"Small (4-5 ft)\", \"Queen Size\", \"King Size\"). Estimate based on visual scale or standard sizes.\n   - If exact size is unclear, provide a reasonable range (e.g., \"Medium-Large\", \"30-40 inches wide\")\n6. ONLY MOVABLE ITEMS - Skip anything permanently attached or built-in\n\nReturn ONLY a valid JSON array with objects containing:\n- label: VERY SPECIFIC movable furniture type with descriptors (string)\n- qty: EXACT quantity visible (number) \n- confidence: confidence score 0-1 (number)\n- notes: room location and specific details (string)\n- room: room type (string)\n- size: size descriptor with specific measurements or ranges - CRITICAL for TVs: estimate inches (e.g., \"55-inch\", \"65-75 inch range\"). For furniture: dimensions or size category with ranges (e.g., \"Large (7-8 ft)\", \"Queen Size\", \"30-40 inches wide\")\n\nEXAMPLE OUTPUT:\n[\n  {\n    \"label\": \"Large Oak Dining Table\",\n    \"qty\": 1,\n    \"confidence\": 0.98,\n    \"notes\": \"Dining room centerpiece, seats 6-8 people\",\n    \"room\": \"Dining Room\",\n    \"size\": \"Large\"\n  },\n  {\n    \"label\": \"Dining Chairs\",\n    \"qty\": 6,\n    \"confidence\": 0.95,\n    \"notes\": \"Matching upholstered dining chairs around table\",\n    \"room\": \"Dining Room\",\n    \"size\": \"Standard\"\n  }\n]\n\nRemember: Only detect items that professional movers can physically pick up and transport. Skip built-in, fixed, or permanently installed items.`\n                },\n              {\n                type: 'image_url',\n                image_url: { \n                  url: photoUrl,\n                  detail: 'high' // Maximum detail for best accuracy\n                }\n              }\n            ]\n          }],\n          max_tokens: 2000, // Increased for detailed responses\n          temperature: 0.1 // Low temperature for consistent, accurate results\n        })\n      });\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('OpenAI API error:', response.status, errorText);\n        continue;\n      }\n      \n      const data = await response.json();\n      const content = data.choices[0].message.content;\n      \n      console.log('OpenAI response:', content);\n      \n      // Parse the JSON response\n      try {\n        // Clean the response by removing markdown code blocks\n        let cleanContent = content.trim();\n        if (cleanContent.startsWith('```json')) {\n          cleanContent = cleanContent.replace(/^```json\\s*/, '').replace(/\\s*```$/, '');\n        } else if (cleanContent.startsWith('```')) {\n          cleanContent = cleanContent.replace(/^```\\s*/, '').replace(/\\s*```$/, '');\n        }\n        \n        const analysis = JSON.parse(cleanContent);\n        \n        // Add source photo ID to each detection\n        analysis.forEach((item: any) => {\n          allDetections.push({\n            label: item.label,\n            qty: item.qty || 1,\n            confidence: item.confidence || 0.9,\n            sourcePhotoId: photoUrl,\n            notes: item.notes || `Detected by OpenAI GPT-4o`,\n            room: item.room || 'Unknown Room',\n            size: item.size || ''\n          });\n        });\n        \n        console.log(`Detected ${analysis.length} items in photo`);\n        \n      } catch (parseError) {\n        console.error('Failed to parse OpenAI response:', parseError);\n        console.log('Raw response:', content);\n      }\n      \n    } catch (error) {\n      console.error('OpenAI Vision error:', error);\n      // Continue with other photos even if one fails\n    }\n  }\n  \n  console.log(`Total detections before deduplication: ${allDetections.length}`);\n  const deduplicated = deduplicateDetections(allDetections);\n  console.log(`Total detections after deduplication: ${deduplicated.length}`);\n  console.log(`Duplicates removed: ${allDetections.length - deduplicated.length}`);\n  return deduplicated;\n};\n\n// Enhanced deduplication for maximum accuracy\nconst deduplicateDetections = (detections: Detection[]): Detection[] => {\n  const deduplicated: Detection[] = [];\n  const seen = new Map<string, Detection>();\n  let duplicatesFound = 0;\n  \n  detections.forEach(detection => {\n    // Create a sophisticated key that includes room and size context\n    const normalizedLabel = detection.label.toLowerCase()\n      .replace(/\\b(large|small|big|little|tall|short|wide|narrow|standard|medium)\\b/g, '')\n      .replace(/\\s+/g, ' ')\n      .trim();\n    \n    const key = `${normalizedLabel}-${detection.room}-${detection.sourcePhotoId}`;\n    \n    if (!seen.has(key)) {\n      seen.set(key, detection);\n      deduplicated.push(detection);\n    } else {\n      // Merge quantities for similar items in the same photo and room\n      const existing = seen.get(key)!;\n      console.log(`ðŸ”„ Merging duplicate: \"${detection.label}\" (${detection.qty} + ${existing.qty} = ${detection.qty + existing.qty})`);\n      existing.qty += detection.qty;\n      existing.confidence = Math.max(existing.confidence, detection.confidence);\n      duplicatesFound++;\n      \n      // Update notes to include both descriptions\n      if (detection.notes && detection.notes !== existing.notes) {\n        existing.notes = `${existing.notes}; ${detection.notes}`;\n      }\n    }\n  });\n  \n  console.log(`âœ… Deduplication complete: ${deduplicated.length} unique items, ${duplicatesFound} duplicates merged`);\n  return deduplicated;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}