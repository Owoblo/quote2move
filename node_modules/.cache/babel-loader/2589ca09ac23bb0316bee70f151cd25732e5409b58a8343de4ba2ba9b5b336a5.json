{"ast":null,"code":"/**\n * Simple PDF Service\n * Generate PDF quotes using a simpler approach\n */export class SimplePDFService{static async downloadQuote(quoteData){try{// For now, create a simple text-based PDF\nconst content=this.generateQuoteContent(quoteData);// Create a simple HTML content\nconst htmlContent=\"\\n        <!DOCTYPE html>\\n        <html>\\n        <head>\\n          <title>Quote \".concat(quoteData.id,\"</title>\\n          <style>\\n            body { font-family: Arial, sans-serif; margin: 40px; }\\n            .header { background: #2563eb; color: white; padding: 20px; text-align: center; margin-bottom: 30px; }\\n            .section { margin-bottom: 25px; padding: 15px; background: #f8fafc; border-radius: 8px; }\\n            .section h3 { color: #1e40af; margin-top: 0; }\\n            .item { margin: 8px 0; padding: 5px 0; border-bottom: 1px solid #e5e7eb; }\\n            .total { font-size: 18px; font-weight: bold; color: #1e40af; text-align: right; margin-top: 20px; }\\n            .footer { text-align: center; margin-top: 40px; color: #6b7280; font-size: 12px; }\\n          </style>\\n        </head>\\n        <body>\\n          <div class=\\\"header\\\">\\n            <h1>INSTANT QUOTE BUILDER</h1>\\n            <p>Professional Moving Services</p>\\n          </div>\\n          \\n          <div class=\\\"section\\\">\\n            <h3>Customer Information</h3>\\n            <p><strong>Name:</strong> \").concat(quoteData.customerName,\"</p>\\n            <p><strong>Email:</strong> \").concat(quoteData.customerEmail,\"</p>\\n            <p><strong>Phone:</strong> \").concat(quoteData.customerPhone,\"</p>\\n            <p><strong>Move Date:</strong> \").concat(quoteData.moveDate,\"</p>\\n          </div>\\n          \\n          <div class=\\\"section\\\">\\n            <h3>Move Details</h3>\\n            <p><strong>From:</strong> \").concat(quoteData.originAddress,\"</p>\\n            <p><strong>To:</strong> \").concat(quoteData.destinationAddress,\"</p>\\n          </div>\\n          \\n          <div class=\\\"section\\\">\\n            <h3>Inventory</h3>\\n            \").concat(this.generateInventoryHTML(quoteData.detections),\"\\n          </div>\\n          \\n          \").concat(quoteData.upsells.filter(u=>u.selected).length>0?\"\\n          <div class=\\\"section\\\">\\n            <h3>Additional Services</h3>\\n            \".concat(quoteData.upsells.filter(u=>u.selected).map(upsell=>\"<div class=\\\"item\\\">\".concat(upsell.name,\": $\").concat(upsell.price.toFixed(2),\"</div>\")).join(''),\"\\n          </div>\\n          \"):'',\"\\n          \\n          <div class=\\\"total\\\">\\n            Total: $\").concat(quoteData.totalAmount.toFixed(2),\"\\n          </div>\\n          \\n          <div class=\\\"footer\\\">\\n            <p>This quote is valid for 30 days from the date of generation.</p>\\n            <p>For support, contact us at support@instantquotebuilder.com</p>\\n          </div>\\n        </body>\\n        </html>\\n      \");// Create and download the HTML file (can be printed to PDF)\nconst blob=new Blob([htmlContent],{type:'text/html'});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"quote-\".concat(quoteData.id,\".html\");document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);}catch(error){console.error('Error generating PDF:',error);throw new Error('Failed to generate PDF');}}static generateQuoteContent(quoteData){// This method is kept for future use but not currently used\n// It generates a text-based quote content\nreturn\"QUOTE \".concat(quoteData.id,\" - \").concat(quoteData.customerName);}static generateInventoryHTML(detections){const grouped=detections.reduce((groups,item)=>{const room=item.room||'Other';if(!groups[room])groups[room]=[];groups[room].push(item);return groups;},{});let html='';Object.entries(grouped).forEach(_ref=>{let[room,items]=_ref;html+=\"<h4>\".concat(room,\"</h4>\");items.forEach(item=>{html+=\"<div class=\\\"item\\\">\".concat(item.label,\" (\").concat(item.qty,\"x)\");if(item.size)html+=\" - \".concat(item.size);html+='</div>';});});return html;}}","map":{"version":3,"names":["SimplePDFService","downloadQuote","quoteData","content","generateQuoteContent","htmlContent","concat","id","customerName","customerEmail","customerPhone","moveDate","originAddress","destinationAddress","generateInventoryHTML","detections","upsells","filter","u","selected","length","map","upsell","name","price","toFixed","join","totalAmount","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","error","console","Error","grouped","reduce","groups","item","room","push","html","Object","entries","forEach","_ref","items","label","qty","size"],"sources":["/Users/admin/random/src/lib/simplePDFService.ts"],"sourcesContent":["/**\n * Simple PDF Service\n * Generate PDF quotes using a simpler approach\n */\n\ninterface QuoteData {\n  id: string;\n  customerName: string;\n  customerEmail: string;\n  customerPhone: string;\n  moveDate: string;\n  originAddress: string;\n  destinationAddress: string;\n  detections: any[];\n  estimate: any;\n  upsells: any[];\n  totalAmount: number;\n  photos?: any[];\n}\n\nexport class SimplePDFService {\n  static async downloadQuote(quoteData: QuoteData): Promise<void> {\n    try {\n      // For now, create a simple text-based PDF\n      const content = this.generateQuoteContent(quoteData);\n      \n      // Create a simple HTML content\n      const htmlContent = `\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Quote ${quoteData.id}</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 40px; }\n            .header { background: #2563eb; color: white; padding: 20px; text-align: center; margin-bottom: 30px; }\n            .section { margin-bottom: 25px; padding: 15px; background: #f8fafc; border-radius: 8px; }\n            .section h3 { color: #1e40af; margin-top: 0; }\n            .item { margin: 8px 0; padding: 5px 0; border-bottom: 1px solid #e5e7eb; }\n            .total { font-size: 18px; font-weight: bold; color: #1e40af; text-align: right; margin-top: 20px; }\n            .footer { text-align: center; margin-top: 40px; color: #6b7280; font-size: 12px; }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1>INSTANT QUOTE BUILDER</h1>\n            <p>Professional Moving Services</p>\n          </div>\n          \n          <div class=\"section\">\n            <h3>Customer Information</h3>\n            <p><strong>Name:</strong> ${quoteData.customerName}</p>\n            <p><strong>Email:</strong> ${quoteData.customerEmail}</p>\n            <p><strong>Phone:</strong> ${quoteData.customerPhone}</p>\n            <p><strong>Move Date:</strong> ${quoteData.moveDate}</p>\n          </div>\n          \n          <div class=\"section\">\n            <h3>Move Details</h3>\n            <p><strong>From:</strong> ${quoteData.originAddress}</p>\n            <p><strong>To:</strong> ${quoteData.destinationAddress}</p>\n          </div>\n          \n          <div class=\"section\">\n            <h3>Inventory</h3>\n            ${this.generateInventoryHTML(quoteData.detections)}\n          </div>\n          \n          ${quoteData.upsells.filter(u => u.selected).length > 0 ? `\n          <div class=\"section\">\n            <h3>Additional Services</h3>\n            ${quoteData.upsells.filter(u => u.selected).map(upsell => \n              `<div class=\"item\">${upsell.name}: $${upsell.price.toFixed(2)}</div>`\n            ).join('')}\n          </div>\n          ` : ''}\n          \n          <div class=\"total\">\n            Total: $${quoteData.totalAmount.toFixed(2)}\n          </div>\n          \n          <div class=\"footer\">\n            <p>This quote is valid for 30 days from the date of generation.</p>\n            <p>For support, contact us at support@instantquotebuilder.com</p>\n          </div>\n        </body>\n        </html>\n      `;\n      \n      // Create and download the HTML file (can be printed to PDF)\n      const blob = new Blob([htmlContent], { type: 'text/html' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `quote-${quoteData.id}.html`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n      \n    } catch (error) {\n      console.error('Error generating PDF:', error);\n      throw new Error('Failed to generate PDF');\n    }\n  }\n\n  private static generateQuoteContent(quoteData: QuoteData): string {\n    // This method is kept for future use but not currently used\n    // It generates a text-based quote content\n    return `QUOTE ${quoteData.id} - ${quoteData.customerName}`;\n  }\n\n  private static generateInventoryHTML(detections: any[]): string {\n    const grouped = detections.reduce((groups, item) => {\n      const room = item.room || 'Other';\n      if (!groups[room]) groups[room] = [];\n      groups[room].push(item);\n      return groups;\n    }, {} as Record<string, any[]>);\n\n    let html = '';\n    Object.entries(grouped).forEach(([room, items]) => {\n      html += `<h4>${room}</h4>`;\n      (items as any[]).forEach((item: any) => {\n        html += `<div class=\"item\">${item.label} (${item.qty}x)`;\n        if (item.size) html += ` - ${item.size}`;\n        html += '</div>';\n      });\n    });\n\n    return html;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}