{"ast":null,"code":"import * as cocoSsd from '@tensorflow-models/coco-ssd';\n// YOLO-based furniture detection using COCO-SSD model\nexport class YOLODetectionService {\n  constructor() {\n    this.model = null;\n    this.isModelLoaded = false;\n  }\n  // Initialize and load the COCO-SSD model\n  async initialize() {\n    try {\n      console.log('Loading COCO-SSD model...');\n      this.model = await cocoSsd.load();\n      this.isModelLoaded = true;\n      console.log('COCO-SSD model loaded successfully');\n    } catch (error) {\n      console.error('Failed to load COCO-SSD model:', error);\n      throw error;\n    }\n  }\n\n  // Detect furniture in a single image\n  async detectFurnitureInImage(imageUrl) {\n    if (!this.isModelLoaded || !this.model) {\n      throw new Error('YOLO model not loaded');\n    }\n    try {\n      console.log('Detecting furniture in image:', imageUrl);\n\n      // Load image\n      const img = new Image();\n      img.crossOrigin = 'anonymous';\n      await new Promise((resolve, reject) => {\n        img.onload = resolve;\n        img.onerror = reject;\n        img.src = imageUrl;\n      });\n\n      // Run detection\n      const predictions = await this.model.detect(img);\n      console.log('YOLO predictions:', predictions);\n\n      // Filter and enhance furniture detections\n      const furnitureDetections = this.processYOLOPredictions(predictions, imageUrl);\n      return furnitureDetections;\n    } catch (error) {\n      console.error('YOLO detection error:', error);\n      return [];\n    }\n  }\n\n  // Process YOLO predictions and convert to our Detection format\n  processYOLOPredictions(predictions, imageUrl) {\n    const detections = [];\n\n    // Furniture-related COCO classes\n    const furnitureClasses = {\n      'person': 'Person',\n      'bicycle': 'Bicycle',\n      'car': 'Car',\n      'motorcycle': 'Motorcycle',\n      'airplane': 'Airplane',\n      'bus': 'Bus',\n      'train': 'Train',\n      'truck': 'Truck',\n      'boat': 'Boat',\n      'traffic light': 'Traffic Light',\n      'fire hydrant': 'Fire Hydrant',\n      'stop sign': 'Stop Sign',\n      'parking meter': 'Parking Meter',\n      'bench': 'Bench',\n      'bird': 'Bird',\n      'cat': 'Cat',\n      'dog': 'Dog',\n      'horse': 'Horse',\n      'sheep': 'Sheep',\n      'cow': 'Cow',\n      'elephant': 'Elephant',\n      'bear': 'Bear',\n      'zebra': 'Zebra',\n      'giraffe': 'Giraffe',\n      'backpack': 'Backpack',\n      'umbrella': 'Umbrella',\n      'handbag': 'Handbag',\n      'tie': 'Tie',\n      'suitcase': 'Suitcase',\n      'frisbee': 'Frisbee',\n      'skis': 'Skis',\n      'snowboard': 'Snowboard',\n      'sports ball': 'Sports Ball',\n      'kite': 'Kite',\n      'baseball bat': 'Baseball Bat',\n      'baseball glove': 'Baseball Glove',\n      'skateboard': 'Skateboard',\n      'surfboard': 'Surfboard',\n      'tennis racket': 'Tennis Racket',\n      'bottle': 'Bottle',\n      'wine glass': 'Wine Glass',\n      'cup': 'Cup',\n      'fork': 'Fork',\n      'knife': 'Knife',\n      'spoon': 'Spoon',\n      'bowl': 'Bowl',\n      'banana': 'Banana',\n      'apple': 'Apple',\n      'sandwich': 'Sandwich',\n      'orange': 'Orange',\n      'broccoli': 'Broccoli',\n      'carrot': 'Carrot',\n      'hot dog': 'Hot Dog',\n      'pizza': 'Pizza',\n      'donut': 'Donut',\n      'cake': 'Cake',\n      'chair': 'Chair',\n      'couch': 'Couch',\n      'potted plant': 'Potted Plant',\n      'bed': 'Bed',\n      'dining table': 'Dining Table',\n      'toilet': 'Toilet',\n      'tv': 'TV',\n      'laptop': 'Laptop',\n      'mouse': 'Mouse',\n      'remote': 'Remote',\n      'keyboard': 'Keyboard',\n      'cell phone': 'Cell Phone',\n      'microwave': 'Microwave',\n      'oven': 'Oven',\n      'toaster': 'Toaster',\n      'sink': 'Sink',\n      'refrigerator': 'Refrigerator',\n      'book': 'Book',\n      'clock': 'Clock',\n      'vase': 'Vase',\n      'scissors': 'Scissors',\n      'teddy bear': 'Teddy Bear',\n      'hair drier': 'Hair Drier',\n      'toothbrush': 'Toothbrush'\n    };\n\n    // Focus on furniture-related items\n    const furnitureKeywords = ['chair', 'couch', 'bed', 'dining table', 'tv', 'laptop', 'mouse', 'remote', 'keyboard', 'microwave', 'oven', 'toaster', 'sink', 'refrigerator', 'book', 'clock', 'vase', 'scissors', 'teddy bear', 'hair drier', 'toothbrush', 'bottle', 'wine glass', 'cup', 'bowl'];\n    predictions.forEach(prediction => {\n      const className = prediction.class.toLowerCase();\n      if (furnitureKeywords.some(keyword => className.includes(keyword))) {\n        const enhancedLabel = this.enhanceFurnitureLabel(prediction.class);\n        const roomContext = this.determineRoomContext(predictions);\n        detections.push({\n          label: enhancedLabel.label,\n          qty: enhancedLabel.qty,\n          confidence: prediction.score,\n          sourcePhotoId: imageUrl,\n          notes: enhancedLabel.notes,\n          room: roomContext,\n          size: enhancedLabel.size\n        });\n      }\n    });\n    return detections;\n  }\n\n  // Enhance furniture labels with specificity\n  enhanceFurnitureLabel(originalClass) {\n    const className = originalClass.toLowerCase();\n    let specificLabel = originalClass;\n    let qty = 1;\n    let notes = 'Detected by YOLO';\n    let size = '';\n\n    // Chair variations\n    if (className.includes('chair')) {\n      specificLabel = 'Chair';\n      notes = 'Dining or accent chair';\n    }\n\n    // Couch/Sofa variations\n    else if (className.includes('couch')) {\n      specificLabel = 'Sofa';\n      notes = 'Living room sofa or couch';\n    }\n\n    // Table variations\n    else if (className.includes('dining table')) {\n      specificLabel = 'Dining Table';\n      notes = 'Dining room table';\n    }\n\n    // Bed variations\n    else if (className.includes('bed')) {\n      specificLabel = 'Bed';\n      notes = 'Bedroom bed';\n    }\n\n    // TV variations\n    else if (className.includes('tv')) {\n      specificLabel = 'Television';\n      notes = 'TV or monitor';\n    }\n\n    // Kitchen appliances\n    else if (className.includes('refrigerator')) {\n      specificLabel = 'Refrigerator';\n      notes = 'Kitchen refrigerator';\n    } else if (className.includes('microwave')) {\n      specificLabel = 'Microwave';\n      notes = 'Kitchen microwave';\n    } else if (className.includes('oven')) {\n      specificLabel = 'Oven';\n      notes = 'Kitchen oven';\n    } else if (className.includes('toaster')) {\n      specificLabel = 'Toaster';\n      notes = 'Kitchen toaster';\n    } else if (className.includes('sink')) {\n      specificLabel = 'Sink';\n      notes = 'Kitchen or bathroom sink';\n    }\n\n    // Electronics\n    else if (className.includes('laptop')) {\n      specificLabel = 'Laptop';\n      notes = 'Computer laptop';\n    } else if (className.includes('keyboard')) {\n      specificLabel = 'Keyboard';\n      notes = 'Computer keyboard';\n    } else if (className.includes('mouse')) {\n      specificLabel = 'Computer Mouse';\n      notes = 'Computer mouse';\n    } else if (className.includes('remote')) {\n      specificLabel = 'Remote Control';\n      notes = 'TV or device remote';\n    }\n\n    // Other items\n    else if (className.includes('book')) {\n      specificLabel = 'Book';\n      notes = 'Book or magazine';\n    } else if (className.includes('clock')) {\n      specificLabel = 'Clock';\n      notes = 'Wall or table clock';\n    } else if (className.includes('vase')) {\n      specificLabel = 'Vase';\n      notes = 'Decorative vase';\n    } else if (className.includes('bottle')) {\n      specificLabel = 'Bottle';\n      notes = 'Glass or plastic bottle';\n    } else if (className.includes('cup')) {\n      specificLabel = 'Cup';\n      notes = 'Drinking cup or mug';\n    } else if (className.includes('bowl')) {\n      specificLabel = 'Bowl';\n      notes = 'Kitchen bowl';\n    }\n    return {\n      label: specificLabel,\n      qty: qty,\n      notes: notes,\n      size: size\n    };\n  }\n\n  // Determine room context from all detected objects\n  determineRoomContext(predictions) {\n    const classes = predictions.map(p => p.class.toLowerCase());\n\n    // Kitchen indicators\n    if (classes.some(c => ['refrigerator', 'microwave', 'oven', 'toaster', 'sink', 'bottle', 'cup', 'bowl'].includes(c))) {\n      return 'Kitchen';\n    }\n\n    // Bedroom indicators\n    if (classes.some(c => ['bed', 'teddy bear'].includes(c))) {\n      return 'Bedroom';\n    }\n\n    // Living room indicators\n    if (classes.some(c => ['couch', 'tv', 'remote', 'book', 'vase'].includes(c))) {\n      return 'Living Room';\n    }\n\n    // Office indicators\n    if (classes.some(c => ['laptop', 'keyboard', 'mouse', 'book'].includes(c))) {\n      return 'Office';\n    }\n\n    // Dining room indicators\n    if (classes.some(c => ['dining table', 'chair', 'cup', 'bowl'].includes(c))) {\n      return 'Dining Room';\n    }\n    return 'Unknown Room';\n  }\n\n  // Detect furniture in multiple images\n  async detectFurnitureInImages(imageUrls) {\n    if (!this.isModelLoaded) {\n      await this.initialize();\n    }\n    const allDetections = [];\n    for (const imageUrl of imageUrls) {\n      try {\n        const detections = await this.detectFurnitureInImage(imageUrl);\n        allDetections.push(...detections);\n      } catch (error) {\n        console.error(`Failed to detect furniture in ${imageUrl}:`, error);\n      }\n    }\n    return this.deduplicateDetections(allDetections);\n  }\n\n  // Deduplicate detections\n  deduplicateDetections(detections) {\n    const deduplicated = [];\n    const seen = new Map();\n    detections.forEach(detection => {\n      const normalizedLabel = detection.label.toLowerCase().replace(/\\b(large|small|big|little|tall|short|wide|narrow)\\b/g, '').replace(/\\s+/g, ' ').trim();\n      const key = `${normalizedLabel}-${detection.sourcePhotoId}`;\n      if (!seen.has(key)) {\n        seen.set(key, detection);\n        deduplicated.push(detection);\n      } else {\n        const existing = seen.get(key);\n        existing.qty += detection.qty;\n        existing.confidence = Math.max(existing.confidence, detection.confidence);\n        if (detection.notes && detection.notes !== existing.notes) {\n          existing.notes = `${existing.notes}; ${detection.notes}`;\n        }\n      }\n    });\n    return deduplicated;\n  }\n}\n\n// Export singleton instance\nexport const yoloDetectionService = new YOLODetectionService();","map":{"version":3,"names":["cocoSsd","YOLODetectionService","constructor","model","isModelLoaded","initialize","console","log","load","error","detectFurnitureInImage","imageUrl","Error","img","Image","crossOrigin","Promise","resolve","reject","onload","onerror","src","predictions","detect","furnitureDetections","processYOLOPredictions","detections","furnitureClasses","furnitureKeywords","forEach","prediction","className","class","toLowerCase","some","keyword","includes","enhancedLabel","enhanceFurnitureLabel","roomContext","determineRoomContext","push","label","qty","confidence","score","sourcePhotoId","notes","room","size","originalClass","specificLabel","classes","map","p","c","detectFurnitureInImages","imageUrls","allDetections","deduplicateDetections","deduplicated","seen","Map","detection","normalizedLabel","replace","trim","key","has","set","existing","get","Math","max","yoloDetectionService"],"sources":["/Users/admin/random/src/lib/yoloDetection.ts"],"sourcesContent":["import * as tf from '@tensorflow/tfjs';\nimport * as cocoSsd from '@tensorflow-models/coco-ssd';\nimport { Detection } from '../types';\n\n// YOLO-based furniture detection using COCO-SSD model\nexport class YOLODetectionService {\n  private model: cocoSsd.ObjectDetection | null = null;\n  private isModelLoaded = false;\n\n  // Initialize and load the COCO-SSD model\n  async initialize(): Promise<void> {\n    try {\n      console.log('Loading COCO-SSD model...');\n      this.model = await cocoSsd.load();\n      this.isModelLoaded = true;\n      console.log('COCO-SSD model loaded successfully');\n    } catch (error) {\n      console.error('Failed to load COCO-SSD model:', error);\n      throw error;\n    }\n  }\n\n  // Detect furniture in a single image\n  async detectFurnitureInImage(imageUrl: string): Promise<Detection[]> {\n    if (!this.isModelLoaded || !this.model) {\n      throw new Error('YOLO model not loaded');\n    }\n\n    try {\n      console.log('Detecting furniture in image:', imageUrl);\n      \n      // Load image\n      const img = new Image();\n      img.crossOrigin = 'anonymous';\n      \n      await new Promise((resolve, reject) => {\n        img.onload = resolve;\n        img.onerror = reject;\n        img.src = imageUrl;\n      });\n\n      // Run detection\n      const predictions = await this.model.detect(img);\n      console.log('YOLO predictions:', predictions);\n\n      // Filter and enhance furniture detections\n      const furnitureDetections = this.processYOLOPredictions(predictions, imageUrl);\n      \n      return furnitureDetections;\n    } catch (error) {\n      console.error('YOLO detection error:', error);\n      return [];\n    }\n  }\n\n  // Process YOLO predictions and convert to our Detection format\n  private processYOLOPredictions(predictions: cocoSsd.DetectedObject[], imageUrl: string): Detection[] {\n    const detections: Detection[] = [];\n    \n    // Furniture-related COCO classes\n    const furnitureClasses = {\n      'person': 'Person',\n      'bicycle': 'Bicycle',\n      'car': 'Car',\n      'motorcycle': 'Motorcycle',\n      'airplane': 'Airplane',\n      'bus': 'Bus',\n      'train': 'Train',\n      'truck': 'Truck',\n      'boat': 'Boat',\n      'traffic light': 'Traffic Light',\n      'fire hydrant': 'Fire Hydrant',\n      'stop sign': 'Stop Sign',\n      'parking meter': 'Parking Meter',\n      'bench': 'Bench',\n      'bird': 'Bird',\n      'cat': 'Cat',\n      'dog': 'Dog',\n      'horse': 'Horse',\n      'sheep': 'Sheep',\n      'cow': 'Cow',\n      'elephant': 'Elephant',\n      'bear': 'Bear',\n      'zebra': 'Zebra',\n      'giraffe': 'Giraffe',\n      'backpack': 'Backpack',\n      'umbrella': 'Umbrella',\n      'handbag': 'Handbag',\n      'tie': 'Tie',\n      'suitcase': 'Suitcase',\n      'frisbee': 'Frisbee',\n      'skis': 'Skis',\n      'snowboard': 'Snowboard',\n      'sports ball': 'Sports Ball',\n      'kite': 'Kite',\n      'baseball bat': 'Baseball Bat',\n      'baseball glove': 'Baseball Glove',\n      'skateboard': 'Skateboard',\n      'surfboard': 'Surfboard',\n      'tennis racket': 'Tennis Racket',\n      'bottle': 'Bottle',\n      'wine glass': 'Wine Glass',\n      'cup': 'Cup',\n      'fork': 'Fork',\n      'knife': 'Knife',\n      'spoon': 'Spoon',\n      'bowl': 'Bowl',\n      'banana': 'Banana',\n      'apple': 'Apple',\n      'sandwich': 'Sandwich',\n      'orange': 'Orange',\n      'broccoli': 'Broccoli',\n      'carrot': 'Carrot',\n      'hot dog': 'Hot Dog',\n      'pizza': 'Pizza',\n      'donut': 'Donut',\n      'cake': 'Cake',\n      'chair': 'Chair',\n      'couch': 'Couch',\n      'potted plant': 'Potted Plant',\n      'bed': 'Bed',\n      'dining table': 'Dining Table',\n      'toilet': 'Toilet',\n      'tv': 'TV',\n      'laptop': 'Laptop',\n      'mouse': 'Mouse',\n      'remote': 'Remote',\n      'keyboard': 'Keyboard',\n      'cell phone': 'Cell Phone',\n      'microwave': 'Microwave',\n      'oven': 'Oven',\n      'toaster': 'Toaster',\n      'sink': 'Sink',\n      'refrigerator': 'Refrigerator',\n      'book': 'Book',\n      'clock': 'Clock',\n      'vase': 'Vase',\n      'scissors': 'Scissors',\n      'teddy bear': 'Teddy Bear',\n      'hair drier': 'Hair Drier',\n      'toothbrush': 'Toothbrush'\n    };\n\n    // Focus on furniture-related items\n    const furnitureKeywords = [\n      'chair', 'couch', 'bed', 'dining table', 'tv', 'laptop', 'mouse', \n      'remote', 'keyboard', 'microwave', 'oven', 'toaster', 'sink', \n      'refrigerator', 'book', 'clock', 'vase', 'scissors', 'teddy bear',\n      'hair drier', 'toothbrush', 'bottle', 'wine glass', 'cup', 'bowl'\n    ];\n\n    predictions.forEach((prediction) => {\n      const className = prediction.class.toLowerCase();\n      \n      if (furnitureKeywords.some(keyword => className.includes(keyword))) {\n        const enhancedLabel = this.enhanceFurnitureLabel(prediction.class);\n        const roomContext = this.determineRoomContext(predictions);\n        \n        detections.push({\n          label: enhancedLabel.label,\n          qty: enhancedLabel.qty,\n          confidence: prediction.score,\n          sourcePhotoId: imageUrl,\n          notes: enhancedLabel.notes,\n          room: roomContext,\n          size: enhancedLabel.size\n        });\n      }\n    });\n\n    return detections;\n  }\n\n  // Enhance furniture labels with specificity\n  private enhanceFurnitureLabel(originalClass: string): {\n    label: string;\n    qty: number;\n    notes: string;\n    size?: string;\n  } {\n    const className = originalClass.toLowerCase();\n    \n    let specificLabel = originalClass;\n    let qty = 1;\n    let notes = 'Detected by YOLO';\n    let size = '';\n\n    // Chair variations\n    if (className.includes('chair')) {\n      specificLabel = 'Chair';\n      notes = 'Dining or accent chair';\n    }\n    \n    // Couch/Sofa variations\n    else if (className.includes('couch')) {\n      specificLabel = 'Sofa';\n      notes = 'Living room sofa or couch';\n    }\n    \n    // Table variations\n    else if (className.includes('dining table')) {\n      specificLabel = 'Dining Table';\n      notes = 'Dining room table';\n    }\n    \n    // Bed variations\n    else if (className.includes('bed')) {\n      specificLabel = 'Bed';\n      notes = 'Bedroom bed';\n    }\n    \n    // TV variations\n    else if (className.includes('tv')) {\n      specificLabel = 'Television';\n      notes = 'TV or monitor';\n    }\n    \n    // Kitchen appliances\n    else if (className.includes('refrigerator')) {\n      specificLabel = 'Refrigerator';\n      notes = 'Kitchen refrigerator';\n    }\n    else if (className.includes('microwave')) {\n      specificLabel = 'Microwave';\n      notes = 'Kitchen microwave';\n    }\n    else if (className.includes('oven')) {\n      specificLabel = 'Oven';\n      notes = 'Kitchen oven';\n    }\n    else if (className.includes('toaster')) {\n      specificLabel = 'Toaster';\n      notes = 'Kitchen toaster';\n    }\n    else if (className.includes('sink')) {\n      specificLabel = 'Sink';\n      notes = 'Kitchen or bathroom sink';\n    }\n    \n    // Electronics\n    else if (className.includes('laptop')) {\n      specificLabel = 'Laptop';\n      notes = 'Computer laptop';\n    }\n    else if (className.includes('keyboard')) {\n      specificLabel = 'Keyboard';\n      notes = 'Computer keyboard';\n    }\n    else if (className.includes('mouse')) {\n      specificLabel = 'Computer Mouse';\n      notes = 'Computer mouse';\n    }\n    else if (className.includes('remote')) {\n      specificLabel = 'Remote Control';\n      notes = 'TV or device remote';\n    }\n    \n    // Other items\n    else if (className.includes('book')) {\n      specificLabel = 'Book';\n      notes = 'Book or magazine';\n    }\n    else if (className.includes('clock')) {\n      specificLabel = 'Clock';\n      notes = 'Wall or table clock';\n    }\n    else if (className.includes('vase')) {\n      specificLabel = 'Vase';\n      notes = 'Decorative vase';\n    }\n    else if (className.includes('bottle')) {\n      specificLabel = 'Bottle';\n      notes = 'Glass or plastic bottle';\n    }\n    else if (className.includes('cup')) {\n      specificLabel = 'Cup';\n      notes = 'Drinking cup or mug';\n    }\n    else if (className.includes('bowl')) {\n      specificLabel = 'Bowl';\n      notes = 'Kitchen bowl';\n    }\n\n    return {\n      label: specificLabel,\n      qty: qty,\n      notes: notes,\n      size: size\n    };\n  }\n\n  // Determine room context from all detected objects\n  private determineRoomContext(predictions: cocoSsd.DetectedObject[]): string {\n    const classes = predictions.map(p => p.class.toLowerCase());\n    \n    // Kitchen indicators\n    if (classes.some(c => ['refrigerator', 'microwave', 'oven', 'toaster', 'sink', 'bottle', 'cup', 'bowl'].includes(c))) {\n      return 'Kitchen';\n    }\n    \n    // Bedroom indicators\n    if (classes.some(c => ['bed', 'teddy bear'].includes(c))) {\n      return 'Bedroom';\n    }\n    \n    // Living room indicators\n    if (classes.some(c => ['couch', 'tv', 'remote', 'book', 'vase'].includes(c))) {\n      return 'Living Room';\n    }\n    \n    // Office indicators\n    if (classes.some(c => ['laptop', 'keyboard', 'mouse', 'book'].includes(c))) {\n      return 'Office';\n    }\n    \n    // Dining room indicators\n    if (classes.some(c => ['dining table', 'chair', 'cup', 'bowl'].includes(c))) {\n      return 'Dining Room';\n    }\n    \n    return 'Unknown Room';\n  }\n\n  // Detect furniture in multiple images\n  async detectFurnitureInImages(imageUrls: string[]): Promise<Detection[]> {\n    if (!this.isModelLoaded) {\n      await this.initialize();\n    }\n\n    const allDetections: Detection[] = [];\n    \n    for (const imageUrl of imageUrls) {\n      try {\n        const detections = await this.detectFurnitureInImage(imageUrl);\n        allDetections.push(...detections);\n      } catch (error) {\n        console.error(`Failed to detect furniture in ${imageUrl}:`, error);\n      }\n    }\n\n    return this.deduplicateDetections(allDetections);\n  }\n\n  // Deduplicate detections\n  private deduplicateDetections(detections: Detection[]): Detection[] {\n    const deduplicated: Detection[] = [];\n    const seen = new Map<string, Detection>();\n    \n    detections.forEach(detection => {\n      const normalizedLabel = detection.label.toLowerCase()\n        .replace(/\\b(large|small|big|little|tall|short|wide|narrow)\\b/g, '')\n        .replace(/\\s+/g, ' ')\n        .trim();\n      \n      const key = `${normalizedLabel}-${detection.sourcePhotoId}`;\n      \n      if (!seen.has(key)) {\n        seen.set(key, detection);\n        deduplicated.push(detection);\n      } else {\n        const existing = seen.get(key)!;\n        existing.qty += detection.qty;\n        existing.confidence = Math.max(existing.confidence, detection.confidence);\n        \n        if (detection.notes && detection.notes !== existing.notes) {\n          existing.notes = `${existing.notes}; ${detection.notes}`;\n        }\n      }\n    });\n    \n    return deduplicated;\n  }\n}\n\n// Export singleton instance\nexport const yoloDetectionService = new YOLODetectionService();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}