{"ast":null,"code":"import { supabase } from './supabase';\nexport class SupabaseService {\n  // Search listings with autocomplete\n  static async searchListings(query, limit = 10) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('listings').select('*').or(`address.ilike.%${query}%, city.ilike.%${query}%, state.ilike.%${query}%`).limit(limit);\n      if (error) {\n        console.error('Error searching listings:', error);\n        return [];\n      }\n      return data || [];\n    } catch (error) {\n      console.error('Error in searchListings:', error);\n      return [];\n    }\n  }\n\n  // Get sold listings\n  static async getSoldListings(query, limit = 10) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('sold_listings').select('*').or(`address.ilike.%${query}%, city.ilike.%${query}%, state.ilike.%${query}%`).limit(limit);\n      if (error) {\n        console.error('Error searching sold listings:', error);\n        return [];\n      }\n      return data || [];\n    } catch (error) {\n      console.error('Error in getSoldListings:', error);\n      return [];\n    }\n  }\n\n  // Get carousel images for a specific listing\n  static async getCarouselImages(listingId) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('carousel_images') // Assuming this is your carousel table name\n      .select('*').eq('listing_id', listingId).order('image_order', {\n        ascending: true\n      });\n      if (error) {\n        console.error('Error fetching carousel images:', error);\n        return [];\n      }\n      return data || [];\n    } catch (error) {\n      console.error('Error in getCarouselImages:', error);\n      return [];\n    }\n  }\n\n  // Get a specific listing by ID\n  static async getListingById(id) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('listings').select('*').eq('id', id).single();\n      if (error) {\n        console.error('Error fetching listing:', error);\n        return null;\n      }\n      return data;\n    } catch (error) {\n      console.error('Error in getListingById:', error);\n      return null;\n    }\n  }\n\n  // Get recent searches (you might want to store these in a separate table)\n  static async getRecentSearches() {\n    // For now, return empty array - you can implement this based on your needs\n    return [];\n  }\n\n  // Save recent search\n  static async saveRecentSearch(address) {\n    // Implement this if you want to persist recent searches\n    console.log('Saving recent search:', address);\n  }\n}","map":{"version":3,"names":["supabase","SupabaseService","searchListings","query","limit","data","error","from","select","or","console","getSoldListings","getCarouselImages","listingId","eq","order","ascending","getListingById","id","single","getRecentSearches","saveRecentSearch","address","log"],"sources":["/Users/admin/random/src/lib/supabaseService.ts"],"sourcesContent":["import { supabase } from './supabase';\n\nexport interface Listing {\n  id: string;\n  address: string;\n  city: string;\n  state: string;\n  zip_code?: string;\n  price?: number;\n  bedrooms?: number;\n  bathrooms?: number;\n  square_feet?: number;\n  listing_date?: string;\n  status?: string;\n  // Add other fields as needed based on your schema\n  [key: string]: any;\n}\n\nexport interface CarouselImage {\n  id: string;\n  listing_id: string;\n  image_url: string;\n  image_order?: number;\n  alt_text?: string;\n  // Add other fields as needed\n  [key: string]: any;\n}\n\nexport class SupabaseService {\n  // Search listings with autocomplete\n  static async searchListings(query: string, limit: number = 10): Promise<Listing[]> {\n    try {\n      const { data, error } = await supabase\n        .from('listings')\n        .select('*')\n        .or(`address.ilike.%${query}%, city.ilike.%${query}%, state.ilike.%${query}%`)\n        .limit(limit);\n\n      if (error) {\n        console.error('Error searching listings:', error);\n        return [];\n      }\n\n      return data || [];\n    } catch (error) {\n      console.error('Error in searchListings:', error);\n      return [];\n    }\n  }\n\n  // Get sold listings\n  static async getSoldListings(query: string, limit: number = 10): Promise<Listing[]> {\n    try {\n      const { data, error } = await supabase\n        .from('sold_listings')\n        .select('*')\n        .or(`address.ilike.%${query}%, city.ilike.%${query}%, state.ilike.%${query}%`)\n        .limit(limit);\n\n      if (error) {\n        console.error('Error searching sold listings:', error);\n        return [];\n      }\n\n      return data || [];\n    } catch (error) {\n      console.error('Error in getSoldListings:', error);\n      return [];\n    }\n  }\n\n  // Get carousel images for a specific listing\n  static async getCarouselImages(listingId: string): Promise<CarouselImage[]> {\n    try {\n      const { data, error } = await supabase\n        .from('carousel_images') // Assuming this is your carousel table name\n        .select('*')\n        .eq('listing_id', listingId)\n        .order('image_order', { ascending: true });\n\n      if (error) {\n        console.error('Error fetching carousel images:', error);\n        return [];\n      }\n\n      return data || [];\n    } catch (error) {\n      console.error('Error in getCarouselImages:', error);\n      return [];\n    }\n  }\n\n  // Get a specific listing by ID\n  static async getListingById(id: string): Promise<Listing | null> {\n    try {\n      const { data, error } = await supabase\n        .from('listings')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error) {\n        console.error('Error fetching listing:', error);\n        return null;\n      }\n\n      return data;\n    } catch (error) {\n      console.error('Error in getListingById:', error);\n      return null;\n    }\n  }\n\n  // Get recent searches (you might want to store these in a separate table)\n  static async getRecentSearches(): Promise<string[]> {\n    // For now, return empty array - you can implement this based on your needs\n    return [];\n  }\n\n  // Save recent search\n  static async saveRecentSearch(address: string): Promise<void> {\n    // Implement this if you want to persist recent searches\n    console.log('Saving recent search:', address);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}