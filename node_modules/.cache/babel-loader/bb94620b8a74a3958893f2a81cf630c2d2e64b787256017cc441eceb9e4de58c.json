{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Navigate}from'react-router-dom';import{supabase}from'../lib/supabase';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProtectedRoute(_ref){let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{// Get initial session\nsupabase.auth.getSession().then(_ref2=>{var _session$user;let{data:{session}}=_ref2;setUser((_session$user=session===null||session===void 0?void 0:session.user)!==null&&_session$user!==void 0?_session$user:null);setLoading(false);});// Listen for changes on auth state (signed in, signed out, etc.)\nconst{data:{subscription}}=supabase.auth.onAuthStateChange((_event,session)=>{var _session$user2;setUser((_session$user2=session===null||session===void 0?void 0:session.user)!==null&&_session$user2!==void 0?_session$user2:null);setLoading(false);});return()=>subscription.unsubscribe();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading...\"})]})});}if(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}return/*#__PURE__*/_jsx(_Fragment,{children:children});}","map":{"version":3,"names":["React","useEffect","useState","Navigate","supabase","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProtectedRoute","_ref","children","user","setUser","loading","setLoading","auth","getSession","then","_ref2","_session$user","data","session","subscription","onAuthStateChange","_event","_session$user2","unsubscribe","className","to","replace"],"sources":["/Users/admin/random/src/components/ProtectedRoute.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabase';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport default function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const [user, setUser] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Get initial session\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      setUser(session?.user ?? null);\n      setLoading(false);\n    });\n\n    // Listen for changes on auth state (signed in, signed out, etc.)\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      setUser(session?.user ?? null);\n      setLoading(false);\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  return <>{children}</>;\n}\n\n\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,QAAQ,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAM3C,cAAe,SAAS,CAAAC,cAAcA,CAAAC,IAAA,CAAoC,IAAnC,CAAEC,QAA8B,CAAC,CAAAD,IAAA,CACtE,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAM,IAAI,CAAC,CAC3C,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd;AACAG,QAAQ,CAACc,IAAI,CAACC,UAAU,CAAC,CAAC,CAACC,IAAI,CAACC,KAAA,EAA2B,KAAAC,aAAA,IAA1B,CAAEC,IAAI,CAAE,CAAEC,OAAQ,CAAE,CAAC,CAAAH,KAAA,CACpDN,OAAO,EAAAO,aAAA,CAACE,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEV,IAAI,UAAAQ,aAAA,UAAAA,aAAA,CAAI,IAAI,CAAC,CAC9BL,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CAEF;AACA,KAAM,CACJM,IAAI,CAAE,CAAEE,YAAa,CACvB,CAAC,CAAGrB,QAAQ,CAACc,IAAI,CAACQ,iBAAiB,CAAC,CAACC,MAAM,CAAEH,OAAO,GAAK,KAAAI,cAAA,CACvDb,OAAO,EAAAa,cAAA,CAACJ,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEV,IAAI,UAAAc,cAAA,UAAAA,cAAA,CAAI,IAAI,CAAC,CAC9BX,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CAEF,MAAO,IAAMQ,YAAY,CAACI,WAAW,CAAC,CAAC,CACzC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIb,OAAO,CAAE,CACX,mBACEV,IAAA,QAAKwB,SAAS,CAAC,qGAAqG,CAAAjB,QAAA,cAClHL,KAAA,QAAKsB,SAAS,CAAC,aAAa,CAAAjB,QAAA,eAC1BP,IAAA,QAAKwB,SAAS,CAAC,6EAA6E,CAAM,CAAC,cACnGxB,IAAA,MAAGwB,SAAS,CAAC,eAAe,CAAAjB,QAAA,CAAC,YAAU,CAAG,CAAC,EACxC,CAAC,CACH,CAAC,CAEV,CAEA,GAAI,CAACC,IAAI,CAAE,CACT,mBAAOR,IAAA,CAACH,QAAQ,EAAC4B,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CAEA,mBAAO1B,IAAA,CAAAI,SAAA,EAAAG,QAAA,CAAGA,QAAQ,CAAG,CAAC,CACxB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}