{"ast":null,"code":"// AI Furniture Detection Service\nexport class FurnitureDetectionService {\n  // Mock AI detection - replace with real AI service\n  static async detectFurniture(photoUrls) {\n    console.log('Starting AI furniture detection for', photoUrls.length, 'photos');\n\n    // Simulate AI processing delay\n    await new Promise(resolve => setTimeout(resolve, 2000));\n\n    // Mock detection results - replace with real AI API call\n    const mockDetections = [{\n      label: 'Sofa',\n      qty: 1,\n      confidence: 0.95,\n      sourcePhotoId: 'photo-0',\n      notes: 'Large sectional sofa in living room'\n    }, {\n      label: 'Dining Table',\n      qty: 1,\n      confidence: 0.87,\n      sourcePhotoId: 'photo-2',\n      notes: 'Wooden dining table with 6 chairs'\n    }, {\n      label: 'Refrigerator',\n      qty: 1,\n      confidence: 0.92,\n      sourcePhotoId: 'photo-5',\n      notes: 'Stainless steel refrigerator'\n    }, {\n      label: 'Bed',\n      qty: 2,\n      confidence: 0.89,\n      sourcePhotoId: 'photo-8',\n      notes: 'Queen size beds in bedrooms'\n    }, {\n      label: 'Dresser',\n      qty: 3,\n      confidence: 0.78,\n      sourcePhotoId: 'photo-12',\n      notes: 'Wooden dressers in bedrooms'\n    }, {\n      label: 'TV',\n      qty: 2,\n      confidence: 0.85,\n      sourcePhotoId: 'photo-15',\n      notes: 'Flat screen TVs'\n    }, {\n      label: 'Bookshelf',\n      qty: 1,\n      confidence: 0.73,\n      sourcePhotoId: 'photo-18',\n      notes: 'Tall wooden bookshelf'\n    }, {\n      label: 'Chair',\n      qty: 8,\n      confidence: 0.81,\n      sourcePhotoId: 'photo-22',\n      notes: 'Various chairs throughout house'\n    }];\n    console.log('AI detection completed. Found', mockDetections.length, 'items');\n    return mockDetections;\n  }\n\n  // Real AI detection using external service (placeholder)\n  static async detectFurnitureReal(photoUrls) {\n    try {\n      // This would be replaced with actual AI service like:\n      // - Google Vision API\n      // - AWS Rekognition\n      // - Azure Computer Vision\n      // - Custom ML model\n\n      const response = await fetch('/api/detect-furniture', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          photoUrls\n        })\n      });\n      if (!response.ok) {\n        throw new Error('AI detection failed');\n      }\n      const data = await response.json();\n      return data.detections;\n    } catch (error) {\n      console.error('AI detection error:', error);\n      // Fallback to mock detection\n      return this.detectFurniture(photoUrls);\n    }\n  }\n\n  // Deduplicate detections based on similarity\n  static deduplicateDetections(detections) {\n    const deduplicated = [];\n    const seen = new Set();\n    detections.forEach(detection => {\n      const key = `${detection.label.toLowerCase()}-${detection.qty}`;\n      if (!seen.has(key)) {\n        seen.add(key);\n        deduplicated.push(detection);\n      } else {\n        // Merge quantities for similar items\n        const existing = deduplicated.find(d => d.label.toLowerCase() === detection.label.toLowerCase());\n        if (existing) {\n          existing.qty += detection.qty;\n          existing.confidence = Math.max(existing.confidence, detection.confidence);\n        }\n      }\n    });\n    return deduplicated;\n  }\n\n  // Analyze photos for furniture detection\n  static async analyzePhotos(photos) {\n    if (photos.length === 0) {\n      return [];\n    }\n    const photoUrls = photos.map(photo => photo.url);\n    const detections = await this.detectFurniture(photoUrls);\n    const deduplicated = this.deduplicateDetections(detections);\n    return deduplicated;\n  }\n}","map":{"version":3,"names":["FurnitureDetectionService","detectFurniture","photoUrls","console","log","length","Promise","resolve","setTimeout","mockDetections","label","qty","confidence","sourcePhotoId","notes","detectFurnitureReal","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","detections","error","deduplicateDetections","deduplicated","seen","Set","forEach","detection","key","toLowerCase","has","add","push","existing","find","d","Math","max","analyzePhotos","photos","map","photo","url"],"sources":["/Users/admin/random/src/lib/furnitureDetection.ts"],"sourcesContent":["import { Detection } from '../types';\n\n// AI Furniture Detection Service\nexport class FurnitureDetectionService {\n  // Mock AI detection - replace with real AI service\n  static async detectFurniture(photoUrls: string[]): Promise<Detection[]> {\n    console.log('Starting AI furniture detection for', photoUrls.length, 'photos');\n    \n    // Simulate AI processing delay\n    await new Promise(resolve => setTimeout(resolve, 2000));\n    \n    // Mock detection results - replace with real AI API call\n    const mockDetections: Detection[] = [\n      {\n        label: 'Sofa',\n        qty: 1,\n        confidence: 0.95,\n        sourcePhotoId: 'photo-0',\n        notes: 'Large sectional sofa in living room'\n      },\n      {\n        label: 'Dining Table',\n        qty: 1,\n        confidence: 0.87,\n        sourcePhotoId: 'photo-2',\n        notes: 'Wooden dining table with 6 chairs'\n      },\n      {\n        label: 'Refrigerator',\n        qty: 1,\n        confidence: 0.92,\n        sourcePhotoId: 'photo-5',\n        notes: 'Stainless steel refrigerator'\n      },\n      {\n        label: 'Bed',\n        qty: 2,\n        confidence: 0.89,\n        sourcePhotoId: 'photo-8',\n        notes: 'Queen size beds in bedrooms'\n      },\n      {\n        label: 'Dresser',\n        qty: 3,\n        confidence: 0.78,\n        sourcePhotoId: 'photo-12',\n        notes: 'Wooden dressers in bedrooms'\n      },\n      {\n        label: 'TV',\n        qty: 2,\n        confidence: 0.85,\n        sourcePhotoId: 'photo-15',\n        notes: 'Flat screen TVs'\n      },\n      {\n        label: 'Bookshelf',\n        qty: 1,\n        confidence: 0.73,\n        sourcePhotoId: 'photo-18',\n        notes: 'Tall wooden bookshelf'\n      },\n      {\n        label: 'Chair',\n        qty: 8,\n        confidence: 0.81,\n        sourcePhotoId: 'photo-22',\n        notes: 'Various chairs throughout house'\n      }\n    ];\n    \n    console.log('AI detection completed. Found', mockDetections.length, 'items');\n    return mockDetections;\n  }\n  \n  // Real AI detection using external service (placeholder)\n  static async detectFurnitureReal(photoUrls: string[]): Promise<Detection[]> {\n    try {\n      // This would be replaced with actual AI service like:\n      // - Google Vision API\n      // - AWS Rekognition\n      // - Azure Computer Vision\n      // - Custom ML model\n      \n      const response = await fetch('/api/detect-furniture', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ photoUrls })\n      });\n      \n      if (!response.ok) {\n        throw new Error('AI detection failed');\n      }\n      \n      const data = await response.json();\n      return data.detections;\n    } catch (error) {\n      console.error('AI detection error:', error);\n      // Fallback to mock detection\n      return this.detectFurniture(photoUrls);\n    }\n  }\n  \n  // Deduplicate detections based on similarity\n  static deduplicateDetections(detections: Detection[]): Detection[] {\n    const deduplicated: Detection[] = [];\n    const seen = new Set<string>();\n    \n    detections.forEach(detection => {\n      const key = `${detection.label.toLowerCase()}-${detection.qty}`;\n      \n      if (!seen.has(key)) {\n        seen.add(key);\n        deduplicated.push(detection);\n      } else {\n        // Merge quantities for similar items\n        const existing = deduplicated.find(d => \n          d.label.toLowerCase() === detection.label.toLowerCase()\n        );\n        if (existing) {\n          existing.qty += detection.qty;\n          existing.confidence = Math.max(existing.confidence, detection.confidence);\n        }\n      }\n    });\n    \n    return deduplicated;\n  }\n  \n  // Analyze photos for furniture detection\n  static async analyzePhotos(photos: any[]): Promise<Detection[]> {\n    if (photos.length === 0) {\n      return [];\n    }\n    \n    const photoUrls = photos.map(photo => photo.url);\n    const detections = await this.detectFurniture(photoUrls);\n    const deduplicated = this.deduplicateDetections(detections);\n    \n    return deduplicated;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}