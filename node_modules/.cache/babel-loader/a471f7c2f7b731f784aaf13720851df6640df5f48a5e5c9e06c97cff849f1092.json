{"ast":null,"code":"/**\n * Email Service for sending quotes\n * Uses EmailJS for client-side email sending\n * \n * Setup:\n * 1. Sign up at https://www.emailjs.com/\n * 2. Create email template\n * 3. Add service ID, template ID, and public key to .env\n */\n\nexport class EmailService {\n  static async sendQuote(data) {\n    if (!this.SERVICE_ID || !this.TEMPLATE_ID || !this.PUBLIC_KEY) {\n      throw new Error('EmailJS configuration missing. Please add EMAILJS_* variables to .env');\n    }\n    try {\n      // Load EmailJS dynamically\n      const emailjs = await import('@emailjs/browser');\n      const templateParams = {\n        to_email: data.customerEmail,\n        customer_name: data.customerName,\n        customer_phone: data.customerPhone,\n        move_date: data.moveDate,\n        origin_address: data.originAddress,\n        destination_address: data.destinationAddress,\n        total_amount: data.totalAmount.toFixed(2),\n        quote_id: data.quoteId,\n        quote_url: data.quoteUrl,\n        company_name: 'Instant Quote Builder',\n        // Add some common alternative variable names\n        from_name: 'Instant Quote Builder',\n        reply_to: 'noreply@instantquotebuilder.com',\n        subject: `Moving Quote - ${data.customerName}`\n      };\n      console.log('Sending email with params:', {\n        serviceId: this.SERVICE_ID,\n        templateId: this.TEMPLATE_ID,\n        publicKey: this.PUBLIC_KEY ? 'Present' : 'Missing',\n        templateParams\n      });\n      const result = await emailjs.send(this.SERVICE_ID, this.TEMPLATE_ID, templateParams, this.PUBLIC_KEY);\n      console.log('Email sent successfully:', result);\n      return true;\n    } catch (error) {\n      console.error('Email sending failed:', error);\n      console.error('Error details:', {\n        message: error.message,\n        status: error.status,\n        text: error.text\n      });\n      throw new Error(`EmailJS Error: ${error.message || error.text || 'Unknown error'}`);\n    }\n  }\n\n  // Fallback: Generate mailto link\n  static generateMailtoLink(data) {\n    const subject = `Moving Quote - ${data.customerName}`;\n    const body = `Hi ${data.customerName},\n\nThank you for choosing Instant Quote Builder for your move!\n\nMove Details:\n- From: ${data.originAddress}\n- To: ${data.destinationAddress}\n- Move Date: ${data.moveDate}\n- Total Estimate: $${data.totalAmount.toFixed(2)}\n\nView your detailed quote: ${data.quoteUrl}\n\nBest regards,\nInstant Quote Builder Team`;\n    return `mailto:${data.customerEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n  }\n}\nEmailService.SERVICE_ID = process.env.REACT_APP_EMAILJS_SERVICE_ID;\nEmailService.TEMPLATE_ID = process.env.REACT_APP_EMAILJS_TEMPLATE_ID;\nEmailService.PUBLIC_KEY = process.env.REACT_APP_EMAILJS_PUBLIC_KEY;","map":{"version":3,"names":["EmailService","sendQuote","data","SERVICE_ID","TEMPLATE_ID","PUBLIC_KEY","Error","emailjs","templateParams","to_email","customerEmail","customer_name","customerName","customer_phone","customerPhone","move_date","moveDate","origin_address","originAddress","destination_address","destinationAddress","total_amount","totalAmount","toFixed","quote_id","quoteId","quote_url","quoteUrl","company_name","from_name","reply_to","subject","console","log","serviceId","templateId","publicKey","result","send","error","message","status","text","generateMailtoLink","body","encodeURIComponent","process","env","REACT_APP_EMAILJS_SERVICE_ID","REACT_APP_EMAILJS_TEMPLATE_ID","REACT_APP_EMAILJS_PUBLIC_KEY"],"sources":["/Users/admin/random/src/lib/emailService.ts"],"sourcesContent":["/**\n * Email Service for sending quotes\n * Uses EmailJS for client-side email sending\n * \n * Setup:\n * 1. Sign up at https://www.emailjs.com/\n * 2. Create email template\n * 3. Add service ID, template ID, and public key to .env\n */\n\ninterface QuoteEmailData {\n  customerName: string;\n  customerEmail: string;\n  customerPhone: string;\n  moveDate: string;\n  originAddress: string;\n  destinationAddress: string;\n  totalAmount: number;\n  quoteId: string;\n  quoteUrl: string;\n}\n\nexport class EmailService {\n  private static readonly SERVICE_ID = process.env.REACT_APP_EMAILJS_SERVICE_ID;\n  private static readonly TEMPLATE_ID = process.env.REACT_APP_EMAILJS_TEMPLATE_ID;\n  private static readonly PUBLIC_KEY = process.env.REACT_APP_EMAILJS_PUBLIC_KEY;\n\n  static async sendQuote(data: QuoteEmailData): Promise<boolean> {\n    if (!this.SERVICE_ID || !this.TEMPLATE_ID || !this.PUBLIC_KEY) {\n      throw new Error('EmailJS configuration missing. Please add EMAILJS_* variables to .env');\n    }\n\n    try {\n      // Load EmailJS dynamically\n      const emailjs = await import('@emailjs/browser');\n      \n      const templateParams = {\n        to_email: data.customerEmail,\n        customer_name: data.customerName,\n        customer_phone: data.customerPhone,\n        move_date: data.moveDate,\n        origin_address: data.originAddress,\n        destination_address: data.destinationAddress,\n        total_amount: data.totalAmount.toFixed(2),\n        quote_id: data.quoteId,\n        quote_url: data.quoteUrl,\n        company_name: 'Instant Quote Builder',\n        // Add some common alternative variable names\n        from_name: 'Instant Quote Builder',\n        reply_to: 'noreply@instantquotebuilder.com',\n        subject: `Moving Quote - ${data.customerName}`\n      };\n\n      console.log('Sending email with params:', {\n        serviceId: this.SERVICE_ID,\n        templateId: this.TEMPLATE_ID,\n        publicKey: this.PUBLIC_KEY ? 'Present' : 'Missing',\n        templateParams\n      });\n\n      const result = await emailjs.send(\n        this.SERVICE_ID,\n        this.TEMPLATE_ID,\n        templateParams,\n        this.PUBLIC_KEY\n      );\n\n      console.log('Email sent successfully:', result);\n      return true;\n    } catch (error: any) {\n      console.error('Email sending failed:', error);\n      console.error('Error details:', {\n        message: error.message,\n        status: error.status,\n        text: error.text\n      });\n      throw new Error(`EmailJS Error: ${error.message || error.text || 'Unknown error'}`);\n    }\n  }\n\n  // Fallback: Generate mailto link\n  static generateMailtoLink(data: QuoteEmailData): string {\n    const subject = `Moving Quote - ${data.customerName}`;\n    const body = `Hi ${data.customerName},\n\nThank you for choosing Instant Quote Builder for your move!\n\nMove Details:\n- From: ${data.originAddress}\n- To: ${data.destinationAddress}\n- Move Date: ${data.moveDate}\n- Total Estimate: $${data.totalAmount.toFixed(2)}\n\nView your detailed quote: ${data.quoteUrl}\n\nBest regards,\nInstant Quote Builder Team`;\n\n    return `mailto:${data.customerEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}