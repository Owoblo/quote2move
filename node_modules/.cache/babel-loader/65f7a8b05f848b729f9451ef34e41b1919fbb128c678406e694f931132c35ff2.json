{"ast":null,"code":"/**\n * Simple PDF Service\n * Generate PDF quotes using a simpler approach\n */\n\nexport class SimplePDFService {\n  static async downloadQuote(quoteData) {\n    try {\n      // For now, create a simple text-based PDF\n      const content = this.generateQuoteContent(quoteData);\n\n      // Create a simple HTML content\n      const htmlContent = `\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Quote ${quoteData.id}</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 40px; }\n            .header { background: #2563eb; color: white; padding: 20px; text-align: center; margin-bottom: 30px; }\n            .section { margin-bottom: 25px; padding: 15px; background: #f8fafc; border-radius: 8px; }\n            .section h3 { color: #1e40af; margin-top: 0; }\n            .item { margin: 8px 0; padding: 5px 0; border-bottom: 1px solid #e5e7eb; }\n            .total { font-size: 18px; font-weight: bold; color: #1e40af; text-align: right; margin-top: 20px; }\n            .footer { text-align: center; margin-top: 40px; color: #6b7280; font-size: 12px; }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1>INSTANT QUOTE BUILDER</h1>\n            <p>Professional Moving Services</p>\n          </div>\n          \n          <div class=\"section\">\n            <h3>Customer Information</h3>\n            <p><strong>Name:</strong> ${quoteData.customerName}</p>\n            <p><strong>Email:</strong> ${quoteData.customerEmail}</p>\n            <p><strong>Phone:</strong> ${quoteData.customerPhone}</p>\n            <p><strong>Move Date:</strong> ${quoteData.moveDate}</p>\n          </div>\n          \n          <div class=\"section\">\n            <h3>Move Details</h3>\n            <p><strong>From:</strong> ${quoteData.originAddress}</p>\n            <p><strong>To:</strong> ${quoteData.destinationAddress}</p>\n          </div>\n          \n          <div class=\"section\">\n            <h3>Inventory</h3>\n            ${this.generateInventoryHTML(quoteData.detections)}\n          </div>\n          \n          ${quoteData.upsells.filter(u => u.selected).length > 0 ? `\n          <div class=\"section\">\n            <h3>Additional Services</h3>\n            ${quoteData.upsells.filter(u => u.selected).map(upsell => `<div class=\"item\">${upsell.name}: $${upsell.price.toFixed(2)}</div>`).join('')}\n          </div>\n          ` : ''}\n          \n          <div class=\"total\">\n            Total: $${quoteData.totalAmount.toFixed(2)}\n          </div>\n          \n          <div class=\"footer\">\n            <p>This quote is valid for 30 days from the date of generation.</p>\n            <p>For support, contact us at support@instantquotebuilder.com</p>\n          </div>\n        </body>\n        </html>\n      `;\n\n      // Create and download the HTML file (can be printed to PDF)\n      const blob = new Blob([htmlContent], {\n        type: 'text/html'\n      });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `quote-${quoteData.id}.html`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Error generating PDF:', error);\n      throw new Error('Failed to generate PDF');\n    }\n  }\n  static generateQuoteContent(quoteData) {\n    let content = `QUOTE ${quoteData.id}\\n`;\n    content += `Instant Quote Builder - Professional Moving Services\\n\\n`;\n    content += `Customer: ${quoteData.customerName}\\n`;\n    content += `Email: ${quoteData.customerEmail}\\n`;\n    content += `Phone: ${quoteData.customerPhone}\\n`;\n    content += `Move Date: ${quoteData.moveDate}\\n\\n`;\n    content += `From: ${quoteData.originAddress}\\n`;\n    content += `To: ${quoteData.destinationAddress}\\n\\n`;\n    content += `INVENTORY:\\n`;\n\n    // Group by room\n    const grouped = quoteData.detections.reduce((groups, item) => {\n      const room = item.room || 'Other';\n      if (!groups[room]) groups[room] = [];\n      groups[room].push(item);\n      return groups;\n    }, {});\n    Object.entries(grouped).forEach(([room, items]) => {\n      content += `\\n${room}:\\n`;\n      items.forEach(item => {\n        content += `  - ${item.label} (${item.qty}x)`;\n        if (item.size) content += ` - ${item.size}`;\n        content += '\\n';\n      });\n    });\n    const selectedUpsells = quoteData.upsells.filter(u => u.selected);\n    if (selectedUpsells.length > 0) {\n      content += `\\nADDITIONAL SERVICES:\\n`;\n      selectedUpsells.forEach(upsell => {\n        content += `  - ${upsell.name}: $${upsell.price.toFixed(2)}\\n`;\n      });\n    }\n    content += `\\nTOTAL: $${quoteData.totalAmount.toFixed(2)}\\n`;\n    content += `\\nThis quote is valid for 30 days from the date of generation.`;\n    return content;\n  }\n  static generateInventoryHTML(detections) {\n    const grouped = detections.reduce((groups, item) => {\n      const room = item.room || 'Other';\n      if (!groups[room]) groups[room] = [];\n      groups[room].push(item);\n      return groups;\n    }, {});\n    let html = '';\n    Object.entries(grouped).forEach(([room, items]) => {\n      html += `<h4>${room}</h4>`;\n      items.forEach(item => {\n        html += `<div class=\"item\">${item.label} (${item.qty}x)`;\n        if (item.size) html += ` - ${item.size}`;\n        html += '</div>';\n      });\n    });\n    return html;\n  }\n}","map":{"version":3,"names":["SimplePDFService","downloadQuote","quoteData","content","generateQuoteContent","htmlContent","id","customerName","customerEmail","customerPhone","moveDate","originAddress","destinationAddress","generateInventoryHTML","detections","upsells","filter","u","selected","length","map","upsell","name","price","toFixed","join","totalAmount","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","error","console","Error","grouped","reduce","groups","item","room","push","Object","entries","forEach","items","label","qty","size","selectedUpsells","html"],"sources":["/Users/admin/random/src/lib/simplePDFService.ts"],"sourcesContent":["/**\n * Simple PDF Service\n * Generate PDF quotes using a simpler approach\n */\n\ninterface QuoteData {\n  id: string;\n  customerName: string;\n  customerEmail: string;\n  customerPhone: string;\n  moveDate: string;\n  originAddress: string;\n  destinationAddress: string;\n  detections: any[];\n  estimate: any;\n  upsells: any[];\n  totalAmount: number;\n  photos?: any[];\n}\n\nexport class SimplePDFService {\n  static async downloadQuote(quoteData: QuoteData): Promise<void> {\n    try {\n      // For now, create a simple text-based PDF\n      const content = this.generateQuoteContent(quoteData);\n      \n      // Create a simple HTML content\n      const htmlContent = `\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Quote ${quoteData.id}</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 40px; }\n            .header { background: #2563eb; color: white; padding: 20px; text-align: center; margin-bottom: 30px; }\n            .section { margin-bottom: 25px; padding: 15px; background: #f8fafc; border-radius: 8px; }\n            .section h3 { color: #1e40af; margin-top: 0; }\n            .item { margin: 8px 0; padding: 5px 0; border-bottom: 1px solid #e5e7eb; }\n            .total { font-size: 18px; font-weight: bold; color: #1e40af; text-align: right; margin-top: 20px; }\n            .footer { text-align: center; margin-top: 40px; color: #6b7280; font-size: 12px; }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1>INSTANT QUOTE BUILDER</h1>\n            <p>Professional Moving Services</p>\n          </div>\n          \n          <div class=\"section\">\n            <h3>Customer Information</h3>\n            <p><strong>Name:</strong> ${quoteData.customerName}</p>\n            <p><strong>Email:</strong> ${quoteData.customerEmail}</p>\n            <p><strong>Phone:</strong> ${quoteData.customerPhone}</p>\n            <p><strong>Move Date:</strong> ${quoteData.moveDate}</p>\n          </div>\n          \n          <div class=\"section\">\n            <h3>Move Details</h3>\n            <p><strong>From:</strong> ${quoteData.originAddress}</p>\n            <p><strong>To:</strong> ${quoteData.destinationAddress}</p>\n          </div>\n          \n          <div class=\"section\">\n            <h3>Inventory</h3>\n            ${this.generateInventoryHTML(quoteData.detections)}\n          </div>\n          \n          ${quoteData.upsells.filter(u => u.selected).length > 0 ? `\n          <div class=\"section\">\n            <h3>Additional Services</h3>\n            ${quoteData.upsells.filter(u => u.selected).map(upsell => \n              `<div class=\"item\">${upsell.name}: $${upsell.price.toFixed(2)}</div>`\n            ).join('')}\n          </div>\n          ` : ''}\n          \n          <div class=\"total\">\n            Total: $${quoteData.totalAmount.toFixed(2)}\n          </div>\n          \n          <div class=\"footer\">\n            <p>This quote is valid for 30 days from the date of generation.</p>\n            <p>For support, contact us at support@instantquotebuilder.com</p>\n          </div>\n        </body>\n        </html>\n      `;\n      \n      // Create and download the HTML file (can be printed to PDF)\n      const blob = new Blob([htmlContent], { type: 'text/html' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `quote-${quoteData.id}.html`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n      \n    } catch (error) {\n      console.error('Error generating PDF:', error);\n      throw new Error('Failed to generate PDF');\n    }\n  }\n\n  private static generateQuoteContent(quoteData: QuoteData): string {\n    let content = `QUOTE ${quoteData.id}\\n`;\n    content += `Instant Quote Builder - Professional Moving Services\\n\\n`;\n    content += `Customer: ${quoteData.customerName}\\n`;\n    content += `Email: ${quoteData.customerEmail}\\n`;\n    content += `Phone: ${quoteData.customerPhone}\\n`;\n    content += `Move Date: ${quoteData.moveDate}\\n\\n`;\n    content += `From: ${quoteData.originAddress}\\n`;\n    content += `To: ${quoteData.destinationAddress}\\n\\n`;\n    content += `INVENTORY:\\n`;\n    \n    // Group by room\n    const grouped = quoteData.detections.reduce((groups, item) => {\n      const room = item.room || 'Other';\n      if (!groups[room]) groups[room] = [];\n      groups[room].push(item);\n      return groups;\n    }, {} as Record<string, any[]>);\n\n    Object.entries(grouped).forEach(([room, items]) => {\n      content += `\\n${room}:\\n`;\n      (items as any[]).forEach((item: any) => {\n        content += `  - ${item.label} (${item.qty}x)`;\n        if (item.size) content += ` - ${item.size}`;\n        content += '\\n';\n      });\n    });\n\n    const selectedUpsells = quoteData.upsells.filter(u => u.selected);\n    if (selectedUpsells.length > 0) {\n      content += `\\nADDITIONAL SERVICES:\\n`;\n      selectedUpsells.forEach(upsell => {\n        content += `  - ${upsell.name}: $${upsell.price.toFixed(2)}\\n`;\n      });\n    }\n\n    content += `\\nTOTAL: $${quoteData.totalAmount.toFixed(2)}\\n`;\n    content += `\\nThis quote is valid for 30 days from the date of generation.`;\n    \n    return content;\n  }\n\n  private static generateInventoryHTML(detections: any[]): string {\n    const grouped = detections.reduce((groups, item) => {\n      const room = item.room || 'Other';\n      if (!groups[room]) groups[room] = [];\n      groups[room].push(item);\n      return groups;\n    }, {} as Record<string, any[]>);\n\n    let html = '';\n    Object.entries(grouped).forEach(([room, items]) => {\n      html += `<h4>${room}</h4>`;\n      items.forEach(item => {\n        html += `<div class=\"item\">${item.label} (${item.qty}x)`;\n        if (item.size) html += ` - ${item.size}`;\n        html += '</div>';\n      });\n    });\n\n    return html;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}