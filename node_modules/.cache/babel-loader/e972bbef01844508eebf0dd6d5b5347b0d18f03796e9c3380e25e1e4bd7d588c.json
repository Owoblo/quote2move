{"ast":null,"code":"/**\n * Email Service for sending quotes\n * Uses EmailJS for client-side email sending\n * \n * Setup:\n * 1. Sign up at https://www.emailjs.com/\n * 2. Create email template\n * 3. Add service ID, template ID, and public key to .env\n */export class EmailService{static async sendQuote(data){if(!this.SERVICE_ID||!this.TEMPLATE_ID||!this.PUBLIC_KEY){throw new Error('EmailJS configuration missing. Please add EMAILJS_* variables to .env');}try{// Load EmailJS dynamically\nconst emailjs=await import('@emailjs/browser');const templateParams={to_email:data.customerEmail,customer_name:data.customerName,customer_phone:data.customerPhone,move_date:data.moveDate,origin_address:data.originAddress,destination_address:data.destinationAddress,total_amount:data.totalAmount.toFixed(2),quote_id:data.quoteId,quote_url:data.quoteUrl,company_name:'Instant Quote Builder',// Add some common alternative variable names\nfrom_name:'Instant Quote Builder',reply_to:'noreply@instantquotebuilder.com',subject:\"Moving Quote - \".concat(data.customerName)};console.log('Sending email with params:',{serviceId:this.SERVICE_ID,templateId:this.TEMPLATE_ID,publicKey:this.PUBLIC_KEY?'Present':'Missing',templateParams});const result=await emailjs.send(this.SERVICE_ID,this.TEMPLATE_ID,templateParams,this.PUBLIC_KEY);console.log('Email sent successfully:',result);return true;}catch(error){console.error('Email sending failed:',error);console.error('Error details:',{message:error.message,status:error.status,text:error.text});throw new Error(\"EmailJS Error: \".concat(error.message||error.text||'Unknown error'));}}// Fallback: Generate mailto link\nstatic generateMailtoLink(data){const subject=\"Moving Quote - \".concat(data.customerName);const body=\"Hi \".concat(data.customerName,\",\\n\\nThank you for choosing Instant Quote Builder for your move!\\n\\nMove Details:\\n- From: \").concat(data.originAddress,\"\\n- To: \").concat(data.destinationAddress,\"\\n- Move Date: \").concat(data.moveDate,\"\\n- Total Estimate: $\").concat(data.totalAmount.toFixed(2),\"\\n\\nView your detailed quote: \").concat(data.quoteUrl,\"\\n\\nBest regards,\\nInstant Quote Builder Team\");return\"mailto:\".concat(data.customerEmail,\"?subject=\").concat(encodeURIComponent(subject),\"&body=\").concat(encodeURIComponent(body));}}EmailService.SERVICE_ID=process.env.REACT_APP_EMAILJS_SERVICE_ID;EmailService.TEMPLATE_ID=process.env.REACT_APP_EMAILJS_TEMPLATE_ID;EmailService.PUBLIC_KEY=process.env.REACT_APP_EMAILJS_PUBLIC_KEY;","map":{"version":3,"names":["EmailService","sendQuote","data","SERVICE_ID","TEMPLATE_ID","PUBLIC_KEY","Error","emailjs","templateParams","to_email","customerEmail","customer_name","customerName","customer_phone","customerPhone","move_date","moveDate","origin_address","originAddress","destination_address","destinationAddress","total_amount","totalAmount","toFixed","quote_id","quoteId","quote_url","quoteUrl","company_name","from_name","reply_to","subject","concat","console","log","serviceId","templateId","publicKey","result","send","error","message","status","text","generateMailtoLink","body","encodeURIComponent","process","env","REACT_APP_EMAILJS_SERVICE_ID","REACT_APP_EMAILJS_TEMPLATE_ID","REACT_APP_EMAILJS_PUBLIC_KEY"],"sources":["/Users/admin/random/src/lib/emailService.ts"],"sourcesContent":["/**\n * Email Service for sending quotes\n * Uses EmailJS for client-side email sending\n * \n * Setup:\n * 1. Sign up at https://www.emailjs.com/\n * 2. Create email template\n * 3. Add service ID, template ID, and public key to .env\n */\n\ninterface QuoteEmailData {\n  customerName: string;\n  customerEmail: string;\n  customerPhone: string;\n  moveDate: string;\n  originAddress: string;\n  destinationAddress: string;\n  totalAmount: number;\n  quoteId: string;\n  quoteUrl: string;\n}\n\nexport class EmailService {\n  private static readonly SERVICE_ID = process.env.REACT_APP_EMAILJS_SERVICE_ID;\n  private static readonly TEMPLATE_ID = process.env.REACT_APP_EMAILJS_TEMPLATE_ID;\n  private static readonly PUBLIC_KEY = process.env.REACT_APP_EMAILJS_PUBLIC_KEY;\n\n  static async sendQuote(data: QuoteEmailData): Promise<boolean> {\n    if (!this.SERVICE_ID || !this.TEMPLATE_ID || !this.PUBLIC_KEY) {\n      throw new Error('EmailJS configuration missing. Please add EMAILJS_* variables to .env');\n    }\n\n    try {\n      // Load EmailJS dynamically\n      const emailjs = await import('@emailjs/browser');\n      \n      const templateParams = {\n        to_email: data.customerEmail,\n        customer_name: data.customerName,\n        customer_phone: data.customerPhone,\n        move_date: data.moveDate,\n        origin_address: data.originAddress,\n        destination_address: data.destinationAddress,\n        total_amount: data.totalAmount.toFixed(2),\n        quote_id: data.quoteId,\n        quote_url: data.quoteUrl,\n        company_name: 'Instant Quote Builder',\n        // Add some common alternative variable names\n        from_name: 'Instant Quote Builder',\n        reply_to: 'noreply@instantquotebuilder.com',\n        subject: `Moving Quote - ${data.customerName}`\n      };\n\n      console.log('Sending email with params:', {\n        serviceId: this.SERVICE_ID,\n        templateId: this.TEMPLATE_ID,\n        publicKey: this.PUBLIC_KEY ? 'Present' : 'Missing',\n        templateParams\n      });\n\n      const result = await emailjs.send(\n        this.SERVICE_ID,\n        this.TEMPLATE_ID,\n        templateParams,\n        this.PUBLIC_KEY\n      );\n\n      console.log('Email sent successfully:', result);\n      return true;\n    } catch (error: any) {\n      console.error('Email sending failed:', error);\n      console.error('Error details:', {\n        message: error.message,\n        status: error.status,\n        text: error.text\n      });\n      throw new Error(`EmailJS Error: ${error.message || error.text || 'Unknown error'}`);\n    }\n  }\n\n  // Fallback: Generate mailto link\n  static generateMailtoLink(data: QuoteEmailData): string {\n    const subject = `Moving Quote - ${data.customerName}`;\n    const body = `Hi ${data.customerName},\n\nThank you for choosing Instant Quote Builder for your move!\n\nMove Details:\n- From: ${data.originAddress}\n- To: ${data.destinationAddress}\n- Move Date: ${data.moveDate}\n- Total Estimate: $${data.totalAmount.toFixed(2)}\n\nView your detailed quote: ${data.quoteUrl}\n\nBest regards,\nInstant Quote Builder Team`;\n\n    return `mailto:${data.customerEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}