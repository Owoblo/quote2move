{"ast":null,"code":"var _jsxFileName = \"/Users/admin/random/src/pages/DashboardPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport SearchPanel from '../components/SearchPanel';\nimport PhotoGallery from '../components/PhotoGallery';\nimport InventoryTable from '../components/InventoryTable';\nimport ProjectHistory from '../components/ProjectHistory';\nimport ThemeToggle from '../components/ThemeToggle';\nimport { calculateEstimate } from '../lib/estimate';\nimport { toCSV, generatePdf, downloadFile } from '../lib/export';\nimport { parseZillowPhotos } from '../lib/zillowPhotos';\nimport { FurnitureDetectionService } from '../lib/furnitureDetection';\nimport { supabase } from '../lib/supabase';\nimport { ProjectService } from '../lib/projectService';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst mockMapping = {\n  'Sofa': {\n    cf: 25,\n    minutes: 30,\n    wrap: true\n  },\n  'Dining Table': {\n    cf: 15,\n    minutes: 20,\n    wrap: true\n  },\n  'Refrigerator': {\n    cf: 35,\n    minutes: 45,\n    wrap: false\n  },\n  'Chair': {\n    cf: 3,\n    minutes: 5,\n    wrap: true\n  },\n  'Bed': {\n    cf: 20,\n    minutes: 25,\n    wrap: true\n  },\n  'Dresser': {\n    cf: 12,\n    minutes: 15,\n    wrap: true\n  },\n  'TV': {\n    cf: 8,\n    minutes: 10,\n    wrap: true\n  },\n  'Bookshelf': {\n    cf: 10,\n    minutes: 12,\n    wrap: false\n  }\n};\nexport default function DashboardPage() {\n  _s();\n  const navigate = useNavigate();\n  const [state, setState] = useState({\n    address: '',\n    photos: [],\n    detections: [],\n    mapping: mockMapping,\n    estimate: {\n      crew: 3,\n      rate: 75,\n      travelMins: 30,\n      stairs: false,\n      elevator: false,\n      wrapping: false,\n      safetyPct: 10,\n      hours: 0,\n      total: 0\n    }\n  });\n  const [selectedPhotos, setSelectedPhotos] = useState([]);\n  const [selectedListing, setSelectedListing] = useState(null);\n  const [isDetecting, setIsDetecting] = useState(false);\n  const [toasts, setToasts] = useState([]);\n  const [showProjectHistory, setShowProjectHistory] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [currentProjectId, setCurrentProjectId] = useState(null);\n\n  // Update estimate when detections or estimate params change\n  useEffect(() => {\n    if (state.detections.length > 0) {\n      const result = calculateEstimate(state.detections, state.mapping, {\n        crew: state.estimate.crew,\n        rate: state.estimate.rate,\n        travelMins: state.estimate.travelMins,\n        stairs: state.estimate.stairs,\n        elevator: state.estimate.elevator,\n        wrapping: state.estimate.wrapping,\n        safetyPct: state.estimate.safetyPct\n      });\n      setState(prev => ({\n        ...prev,\n        estimate: {\n          ...prev.estimate,\n          hours: result.hours,\n          total: result.total\n        }\n      }));\n    }\n  }, [state.detections, state.mapping, state.estimate.crew, state.estimate.rate, state.estimate.travelMins, state.estimate.stairs, state.estimate.elevator, state.estimate.wrapping, state.estimate.safetyPct]);\n  const addToast = (message, type) => {\n    const id = Date.now().toString();\n    setToasts(prev => [...prev, {\n      id,\n      message,\n      type\n    }]);\n    setTimeout(() => {\n      setToasts(prev => prev.filter(toast => toast.id !== id));\n    }, 3000);\n  };\n  const handleAddressChange = address => {\n    setState(prev => ({\n      ...prev,\n      address\n    }));\n  };\n  const handleListingSelect = listing => {\n    setSelectedListing(listing);\n  };\n  const handleFetchPhotos = async () => {\n    if (!selectedListing) {\n      addToast('Please select a listing from the autocomplete first', 'error');\n      return;\n    }\n    try {\n      console.log('Fetching photos for selected listing:', selectedListing.address);\n      console.log('Has carousel_photos_composable:', !!selectedListing.carousel_photos_composable);\n\n      // Check if the listing has carousel_photos_composable data\n      if (selectedListing.carousel_photos_composable) {\n        try {\n          // Use the utility function to parse Zillow photos\n          const photoUrls = parseZillowPhotos(selectedListing.carousel_photos_composable);\n          console.log('Parsed photo URLs:', photoUrls.length);\n          if (photoUrls.length > 0) {\n            // Convert URLs to Photo format\n            const photos = photoUrls.map((url, index) => ({\n              id: `photo-${index}`,\n              url: url,\n              thumbnailUrl: url,\n              // Zillow URLs are already optimized\n              filename: `property-photo-${index + 1}.jpg`,\n              uploadedAt: new Date()\n            }));\n            setState(prev => ({\n              ...prev,\n              photos\n            }));\n            addToast(`Found ${photos.length} photos - Starting AI detection...`, 'success');\n\n            // Automatically select all photos and start detection\n            const allPhotoIds = photos.map(photo => photo.id);\n            setSelectedPhotos(allPhotoIds);\n\n            // Start AI detection automatically\n            await runAutomaticDetection(photos);\n          } else {\n            // No photos found\n            setState(prev => ({\n              ...prev,\n              photos: []\n            }));\n            addToast('No photos found for this listing', 'error');\n          }\n        } catch (error) {\n          console.error('Error parsing carousel_photos_composable:', error);\n          // No fallback - show error\n          setState(prev => ({\n            ...prev,\n            photos: []\n          }));\n          addToast('Error parsing carousel data', 'error');\n        }\n      } else {\n        // No carousel_photos_composable data - try to fetch from database\n        console.log('No carousel data in selected listing, searching database...');\n        await fetchPhotosFromDatabase(selectedListing.address);\n      }\n    } catch (error) {\n      console.error('Error fetching photos:', error);\n      // No fallback - show error\n      setState(prev => ({\n        ...prev,\n        photos: []\n      }));\n      addToast('Error fetching photos', 'error');\n    }\n  };\n  const fetchPhotosFromDatabase = async address => {\n    try {\n      var _currentListings$data2, _soldListings$data2, _currentListings$data3, _soldListings$data3;\n      console.log('ðŸ” Searching database for photos:', address);\n\n      // Optimized search strategy for 40,000+ records\n      const addressParts = address.split(' ');\n      const houseNumber = addressParts[0];\n      const streetName = addressParts.slice(1, 3).join(' '); // First 2 words after house number\n\n      // Prioritize more specific searches first to reduce database load\n      const searchTerms = [`${houseNumber} ${streetName}`,\n      // Most specific: house + street\n      address.split(',')[0],\n      // Street address only\n      houseNumber,\n      // Just house number (fastest search)\n      address,\n      // Full address (least likely to match)\n      streetName,\n      // Just street name (broader search)\n      address.replace(/[,\\s]+/g, ' ').trim() // Cleaned address\n      ].filter(term => term && term.length > 0);\n      console.log('ðŸ” Search terms to try:', searchTerms);\n\n      // Search both tables with simpler queries to avoid URL encoding issues\n      let currentListings = {\n        data: null,\n        error: null\n      };\n      let soldListings = {\n        data: null,\n        error: null\n      };\n\n      // Try each search term until we find results\n      for (const term of searchTerms) {\n        console.log(`ðŸ” Trying search term: \"${term}\"`);\n        if (!currentListings.data || currentListings.data.length === 0) {\n          console.log(`ðŸ” Searching just_listed for: \"${term}\"`);\n          try {\n            // Use timeout to prevent hanging on large datasets\n            const searchPromise = supabase.from('just_listed').select('id, address, addresscity, addressstate, carousel_photos_composable').ilike('address', `%${term}%`).limit(3); // Reduced limit for faster queries\n\n            const timeoutPromise = new Promise((_, reject) => setTimeout(() => reject(new Error('Search timeout')), 10000));\n            currentListings = await Promise.race([searchPromise, timeoutPromise]);\n            if (currentListings.error) {\n              console.error('âŒ Error searching just_listed:', currentListings.error);\n            } else {\n              var _currentListings$data;\n              console.log(`ðŸ“Š just_listed results: ${((_currentListings$data = currentListings.data) === null || _currentListings$data === void 0 ? void 0 : _currentListings$data.length) || 0} found`);\n            }\n          } catch (error) {\n            console.error('âŒ Timeout or error searching just_listed:', error);\n            currentListings = {\n              data: null,\n              error\n            };\n          }\n        }\n        if (!soldListings.data || soldListings.data.length === 0) {\n          console.log(`ðŸ” Searching sold_listings for: \"${term}\"`);\n          try {\n            // Use timeout to prevent hanging on large datasets\n            const searchPromise = supabase.from('sold_listings').select('id, address, addresscity, addressstate, carousel_photos_composable').ilike('address', `%${term}%`).limit(3); // Reduced limit for faster queries\n\n            const timeoutPromise = new Promise((_, reject) => setTimeout(() => reject(new Error('Search timeout')), 10000));\n            soldListings = await Promise.race([searchPromise, timeoutPromise]);\n            if (soldListings.error) {\n              console.error('âŒ Error searching sold_listings:', soldListings.error);\n            } else {\n              var _soldListings$data;\n              console.log(`ðŸ“Š sold_listings results: ${((_soldListings$data = soldListings.data) === null || _soldListings$data === void 0 ? void 0 : _soldListings$data.length) || 0} found`);\n            }\n          } catch (error) {\n            console.error('âŒ Timeout or error searching sold_listings:', error);\n            soldListings = {\n              data: null,\n              error\n            };\n          }\n        }\n\n        // If we found results, break\n        if (currentListings.data && currentListings.data.length > 0 || soldListings.data && soldListings.data.length > 0) {\n          console.log(`âœ… Found results with term: \"${term}\"`);\n          break;\n        }\n      }\n\n      // If no results found with partial matching, try exact matching for better performance\n      if ((!currentListings.data || currentListings.data.length === 0) && (!soldListings.data || soldListings.data.length === 0)) {\n        console.log('ðŸ” No results with partial matching, trying exact matching...');\n        try {\n          const exactSearchPromise = Promise.all([supabase.from('just_listed').select('id, address, addresscity, addressstate, carousel_photos_composable').eq('address', address).limit(1), supabase.from('sold_listings').select('id, address, addresscity, addressstate, carousel_photos_composable').eq('address', address).limit(1)]);\n          const timeoutPromise = new Promise((_, reject) => setTimeout(() => reject(new Error('Exact search timeout')), 5000));\n          const result = await Promise.race([exactSearchPromise, timeoutPromise]);\n          const [exactCurrent, exactSold] = result;\n          if (exactCurrent.data && exactCurrent.data.length > 0) {\n            currentListings = exactCurrent;\n            console.log('âœ… Found exact match in just_listed');\n          }\n          if (exactSold.data && exactSold.data.length > 0) {\n            soldListings = exactSold;\n            console.log('âœ… Found exact match in sold_listings');\n          }\n        } catch (error) {\n          console.log('âŒ Exact search failed:', error);\n        }\n      }\n      console.log('ðŸ“Š Database search results:');\n      console.log('Current listings found:', ((_currentListings$data2 = currentListings.data) === null || _currentListings$data2 === void 0 ? void 0 : _currentListings$data2.length) || 0);\n      console.log('Sold listings found:', ((_soldListings$data2 = soldListings.data) === null || _soldListings$data2 === void 0 ? void 0 : _soldListings$data2.length) || 0);\n      if (currentListings.data && currentListings.data.length > 0) {\n        console.log('Current listings:', currentListings.data.map(l => ({\n          id: l.id,\n          address: l.address,\n          city: l.addresscity,\n          state: l.addressstate\n        })));\n      }\n      if (soldListings.data && soldListings.data.length > 0) {\n        console.log('Sold listings:', soldListings.data.map(l => ({\n          id: l.id,\n          address: l.address,\n          city: l.addresscity,\n          state: l.addressstate\n        })));\n      }\n      const listing = ((_currentListings$data3 = currentListings.data) === null || _currentListings$data3 === void 0 ? void 0 : _currentListings$data3[0]) || ((_soldListings$data3 = soldListings.data) === null || _soldListings$data3 === void 0 ? void 0 : _soldListings$data3[0]);\n      if (listing) {\n        console.log('âœ… Found listing:', {\n          id: listing.id,\n          address: listing.address,\n          city: listing.addresscity,\n          state: listing.addressstate,\n          hasPhotos: !!listing.carousel_photos_composable\n        });\n        if (listing.carousel_photos_composable) {\n          console.log('ðŸ“¸ Listing has photos, parsing...');\n          try {\n            // Use the utility function to parse Zillow photos\n            const photoUrls = parseZillowPhotos(listing.carousel_photos_composable);\n            console.log('Parsed photo URLs from database:', photoUrls.length);\n            if (photoUrls.length > 0) {\n              // Convert URLs to Photo format\n              const photos = photoUrls.map((url, index) => ({\n                id: `photo-${index}`,\n                url: url,\n                thumbnailUrl: url,\n                // Zillow URLs are already optimized\n                filename: `property-photo-${index + 1}.jpg`,\n                uploadedAt: new Date()\n              }));\n              setState(prev => ({\n                ...prev,\n                photos\n              }));\n              addToast(`Found ${photos.length} photos from database - Starting AI detection...`, 'success');\n\n              // Automatically select all photos and start detection\n              const allPhotoIds = photos.map(photo => photo.id);\n              setSelectedPhotos(allPhotoIds);\n\n              // Start AI detection automatically\n              await runAutomaticDetection(photos);\n            } else {\n              // No photos found\n              setState(prev => ({\n                ...prev,\n                photos: []\n              }));\n              addToast('No photos found for this listing', 'error');\n            }\n          } catch (error) {\n            console.error('Error parsing carousel_photos_composable from database:', error);\n            setState(prev => ({\n              ...prev,\n              photos: []\n            }));\n            addToast('Error parsing carousel data', 'error');\n          }\n        } else {\n          console.log('âŒ Listing found but no photos data');\n          setState(prev => ({\n            ...prev,\n            photos: []\n          }));\n          addToast('No photos found for this listing', 'error');\n        }\n      } else {\n        console.log('âŒ No listing found in database for address:', address);\n        setState(prev => ({\n          ...prev,\n          photos: []\n        }));\n        addToast('No listing found in database for this address', 'error');\n      }\n    } catch (error) {\n      console.error('Error searching database for photos:', error);\n      setState(prev => ({\n        ...prev,\n        photos: []\n      }));\n      addToast('Error searching database', 'error');\n    }\n  };\n  const handleClear = () => {\n    setState(prev => ({\n      ...prev,\n      address: '',\n      photos: [],\n      detections: []\n    }));\n    setSelectedPhotos([]);\n    setSelectedListing(null);\n    addToast('Cleared all data', 'success');\n  };\n  const handlePhotoSelect = photoId => {\n    setSelectedPhotos(prev => prev.includes(photoId) ? prev.filter(id => id !== photoId) : [...prev, photoId]);\n  };\n  const handleSelectAllPhotos = () => {\n    const allPhotoIds = state.photos.map(photo => photo.id);\n    setSelectedPhotos(allPhotoIds);\n  };\n  const handleDeselectAllPhotos = () => {\n    setSelectedPhotos([]);\n  };\n  const runAutomaticDetection = async photos => {\n    try {\n      setIsDetecting(true);\n      setState(prev => ({\n        ...prev,\n        detections: []\n      })); // Clear previous detections\n      console.log('Starting automatic AI detection on', photos.length, 'photos');\n\n      // Process photos one by one for real-time updates\n      for (let i = 0; i < photos.length; i++) {\n        const photo = photos[i];\n        console.log(`Processing photo ${i + 1}/${photos.length}:`, photo.url);\n        try {\n          // Detect furniture in this single photo\n          const photoDetections = await FurnitureDetectionService.detectFurniture([photo.url]);\n          if (photoDetections.length > 0) {\n            // Add new detections to existing ones\n            setState(prev => ({\n              ...prev,\n              detections: [...prev.detections, ...photoDetections]\n            }));\n            console.log(`Photo ${i + 1}: Detected ${photoDetections.length} items`);\n\n            // Show real-time toast for each photo\n            addToast(`Photo ${i + 1}: Found ${photoDetections.length} items`, 'success');\n          }\n\n          // Small delay to show real-time updates\n          await new Promise(resolve => setTimeout(resolve, 500));\n        } catch (error) {\n          console.error(`Error processing photo ${i + 1}:`, error);\n          // Continue with next photo\n        }\n      }\n      console.log('Automatic AI detection completed');\n      addToast(`AI detection completed! Found ${state.detections.length} total items`, 'success');\n    } catch (error) {\n      console.error('Automatic AI detection error:', error);\n      addToast('AI detection failed. Please try again.', 'error');\n    } finally {\n      setIsDetecting(false);\n    }\n  };\n  const handleRunDetection = async () => {\n    if (selectedPhotos.length === 0) {\n      addToast('Please select photos first', 'error');\n      return;\n    }\n    if (state.photos.length === 0) {\n      addToast('No photos available for detection', 'error');\n      return;\n    }\n    try {\n      setIsDetecting(true);\n      addToast('Starting AI furniture detection...', 'success');\n\n      // Get selected photo objects\n      const selectedPhotoObjects = state.photos.filter(photo => selectedPhotos.includes(photo.id));\n      console.log('Running AI detection on', selectedPhotoObjects.length, 'photos');\n\n      // Run AI detection\n      const detections = await FurnitureDetectionService.analyzePhotos(selectedPhotoObjects);\n      console.log('AI detection results:', detections);\n\n      // Update state with detections\n      setState(prev => ({\n        ...prev,\n        detections\n      }));\n      addToast(`AI detection completed! Found ${detections.length} furniture items`, 'success');\n    } catch (error) {\n      console.error('AI detection error:', error);\n      addToast('AI detection failed. Please try again.', 'error');\n    } finally {\n      setIsDetecting(false);\n    }\n  };\n  const handleQuantityChange = (detectionIndex, quantity) => {\n    setState(prev => ({\n      ...prev,\n      detections: prev.detections.map((detection, index) => index === detectionIndex ? {\n        ...detection,\n        qty: quantity\n      } : detection)\n    }));\n  };\n  const handleNotesChange = (detectionIndex, notes) => {\n    setState(prev => ({\n      ...prev,\n      detections: prev.detections.map((detection, index) => index === detectionIndex ? {\n        ...detection,\n        notes\n      } : detection)\n    }));\n  };\n  const handleRemove = detectionIndex => {\n    setState(prev => ({\n      ...prev,\n      detections: prev.detections.filter((_, index) => index !== detectionIndex)\n    }));\n    addToast('Item removed from inventory', 'success');\n  };\n  const handleSendSMS = () => {\n    addToast('SMS quote sent successfully', 'success');\n  };\n  const handleSendEmail = () => {\n    addToast('Email quote sent successfully', 'success');\n  };\n  const handleDownloadPDF = async () => {\n    const quotePayload = {\n      address: state.address,\n      detections: state.detections,\n      estimate: state.estimate,\n      timestamp: new Date()\n    };\n    const pdfBlob = await generatePdf(quotePayload);\n    downloadFile(pdfBlob, 'quote.pdf', 'application/pdf');\n    addToast('PDF downloaded successfully', 'success');\n  };\n  const handleCopyCSV = () => {\n    const csvContent = toCSV(state.detections);\n    navigator.clipboard.writeText(csvContent);\n    addToast('CSV copied to clipboard', 'success');\n  };\n  const handleSaveProject = async () => {\n    if (!state.address && state.detections.length === 0) {\n      addToast('Please add an address or detections before saving', 'error');\n      return;\n    }\n    try {\n      setIsSaving(true);\n      // Automatically use address as project name, fallback to \"Untitled Project\"\n      const projectName = state.address || 'Untitled Project';\n      if (currentProjectId) {\n        // Update existing project\n        await ProjectService.updateProject(currentProjectId, state.address, state.detections, state.estimate, projectName);\n        addToast('Project updated successfully', 'success');\n      } else {\n        // Save new project\n        const project = await ProjectService.saveProject(state.address, state.detections, state.estimate, projectName);\n        setCurrentProjectId(project.id);\n        addToast('Project saved successfully', 'success');\n      }\n    } catch (error) {\n      console.error('Error saving project:', error);\n      addToast(`Failed to save project: ${error.message}`, 'error');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  const handleLoadProject = project => {\n    setState({\n      address: project.address,\n      photos: [],\n      // Photos aren't saved, user will need to reload\n      detections: project.detections,\n      mapping: state.mapping,\n      // Keep current mapping\n      estimate: project.estimate\n    });\n    setCurrentProjectId(project.id);\n    setSelectedPhotos([]);\n    addToast('Project loaded successfully', 'success');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 transition-colors duration-200\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between h-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5 text-white\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 598,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 597,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 596,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-xl font-semibold text-gray-900 dark:text-gray-100 tracking-tight\",\n              children: \"Instant Quote Builder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowProjectHistory(true),\n              className: \"text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors flex items-center space-x-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-4 h-4\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Project History\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSaveProject,\n              disabled: isSaving || !state.address && state.detections.length === 0,\n              className: \"text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-1 disabled:cursor-not-allowed\",\n              children: isSaving ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Saving...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 621,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 626,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 625,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: currentProjectId ? 'Update Project' : 'Save Project'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 628,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-px h-6 bg-gray-200 dark:bg-gray-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"text-sm font-medium text-gray-700 dark:text-gray-300 bg-transparent border-none focus:outline-none cursor-pointer\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"San Francisco, CA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Los Angeles, CA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 635,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"New York, NY\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 636,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Chicago, IL\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ThemeToggle, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 594,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-200\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-6 py-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 lg:grid-cols-2 gap-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(SearchPanel, {\n              address: state.address,\n              onAddressChange: handleAddressChange,\n              onFetchPhotos: handleFetchPhotos,\n              onClear: handleClear,\n              recentSearches: [],\n              onListingSelect: handleListingSelect\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(PhotoGallery, {\n              photos: state.photos,\n              selectedPhotos: selectedPhotos,\n              onPhotoSelect: handlePhotoSelect,\n              onRunDetection: handleRunDetection,\n              isDetecting: isDetecting,\n              onSelectAll: handleSelectAllPhotos,\n              onDeselectAll: handleDeselectAllPhotos\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 659,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(InventoryTable, {\n              detections: state.detections,\n              mapping: state.mapping,\n              onQuantityChange: handleQuantityChange,\n              onNotesChange: handleNotesChange,\n              onRemove: handleRemove,\n              isDetecting: isDetecting\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-2xl shadow-sm border border-gray-100 p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-lg font-semibold text-gray-900 mb-2\",\n                  children: \"Export & Actions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 688,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600\",\n                  children: \"Export inventory data and send quotes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 689,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 687,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 686,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4 pb-4 border-b border-gray-200\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  if (state.detections.length === 0) {\n                    addToast('Please detect items first before creating a quote', 'error');\n                    return;\n                  }\n                  navigate('/estimate', {\n                    state: {\n                      address: state.address,\n                      detections: state.detections,\n                      estimate: state.estimate,\n                      mapping: state.mapping\n                    }\n                  });\n                },\n                disabled: state.detections.length === 0,\n                className: \"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 px-6 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2 disabled:cursor-not-allowed shadow-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-5 h-5\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 713,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 712,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Continue to Complete Quote\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 715,\n                  columnNumber: 17\n                }, this), state.detections.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2 bg-white bg-opacity-20 px-2 py-1 rounded text-sm\",\n                  children: [state.detections.length, \" items\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 717,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 694,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleSendSMS,\n                className: \"bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 730,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 729,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Send SMS Quote\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 732,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleSendEmail,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 739,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 738,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Send Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 741,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 734,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleDownloadPDF,\n                className: \"bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-4 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 748,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 747,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Download PDF\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 750,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 743,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleCopyCSV,\n                className: \"bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-4 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 757,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 756,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Copy CSV\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 759,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 752,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 684,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed top-4 right-4 space-y-2 z-50\",\n      children: toasts.map(toast => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `px-4 py-2 rounded-md shadow-lg text-sm font-medium ${toast.type === 'success' ? 'bg-green-100 text-green-800 border border-green-200' : 'bg-red-100 text-red-800 border border-red-200'}`,\n        children: toast.message\n      }, toast.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 770,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 768,\n      columnNumber: 7\n    }, this), showProjectHistory && /*#__PURE__*/_jsxDEV(ProjectHistory, {\n      onLoadProject: handleLoadProject,\n      onClose: () => setShowProjectHistory(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 785,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 590,\n    columnNumber: 5\n  }, this);\n}\n_s(DashboardPage, \"3TE66Qj0zsXpHBlmhLTGdwntpEo=\", false, function () {\n  return [useNavigate];\n});\n_c = DashboardPage;\nvar _c;\n$RefreshReg$(_c, \"DashboardPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","SearchPanel","PhotoGallery","InventoryTable","ProjectHistory","ThemeToggle","calculateEstimate","toCSV","generatePdf","downloadFile","parseZillowPhotos","FurnitureDetectionService","supabase","ProjectService","jsxDEV","_jsxDEV","Fragment","_Fragment","mockMapping","cf","minutes","wrap","DashboardPage","_s","navigate","state","setState","address","photos","detections","mapping","estimate","crew","rate","travelMins","stairs","elevator","wrapping","safetyPct","hours","total","selectedPhotos","setSelectedPhotos","selectedListing","setSelectedListing","isDetecting","setIsDetecting","toasts","setToasts","showProjectHistory","setShowProjectHistory","isSaving","setIsSaving","currentProjectId","setCurrentProjectId","length","result","prev","addToast","message","type","id","Date","now","toString","setTimeout","filter","toast","handleAddressChange","handleListingSelect","listing","handleFetchPhotos","console","log","carousel_photos_composable","photoUrls","map","url","index","thumbnailUrl","filename","uploadedAt","allPhotoIds","photo","runAutomaticDetection","error","fetchPhotosFromDatabase","_currentListings$data2","_soldListings$data2","_currentListings$data3","_soldListings$data3","addressParts","split","houseNumber","streetName","slice","join","searchTerms","replace","trim","term","currentListings","data","soldListings","searchPromise","from","select","ilike","limit","timeoutPromise","Promise","_","reject","Error","race","_currentListings$data","_soldListings$data","exactSearchPromise","all","eq","exactCurrent","exactSold","l","city","addresscity","addressstate","hasPhotos","handleClear","handlePhotoSelect","photoId","includes","handleSelectAllPhotos","handleDeselectAllPhotos","i","photoDetections","detectFurniture","resolve","handleRunDetection","selectedPhotoObjects","analyzePhotos","handleQuantityChange","detectionIndex","quantity","detection","qty","handleNotesChange","notes","handleRemove","handleSendSMS","handleSendEmail","handleDownloadPDF","quotePayload","timestamp","pdfBlob","handleCopyCSV","csvContent","navigator","clipboard","writeText","handleSaveProject","projectName","updateProject","project","saveProject","handleLoadProject","className","children","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","onAddressChange","onFetchPhotos","onClear","recentSearches","onListingSelect","onPhotoSelect","onRunDetection","onSelectAll","onDeselectAll","onQuantityChange","onNotesChange","onRemove","onLoadProject","onClose","_c","$RefreshReg$"],"sources":["/Users/admin/random/src/pages/DashboardPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport SearchPanel from '../components/SearchPanel';\nimport PhotoGallery from '../components/PhotoGallery';\nimport InventoryTable from '../components/InventoryTable';\nimport ProjectHistory from '../components/ProjectHistory';\nimport ThemeToggle from '../components/ThemeToggle';\nimport { AppState, Photo, MappingTable, QuotePayload } from '../types';\nimport { calculateEstimate } from '../lib/estimate';\nimport { toCSV, generatePdf, downloadFile } from '../lib/export';\nimport { parseZillowPhotos } from '../lib/zillowPhotos';\nimport { FurnitureDetectionService } from '../lib/furnitureDetection';\nimport { supabase } from '../lib/supabase';\nimport { ProjectService, Project } from '../lib/projectService';\n\nconst mockMapping: MappingTable = {\n  'Sofa': { cf: 25, minutes: 30, wrap: true },\n  'Dining Table': { cf: 15, minutes: 20, wrap: true },\n  'Refrigerator': { cf: 35, minutes: 45, wrap: false },\n  'Chair': { cf: 3, minutes: 5, wrap: true },\n  'Bed': { cf: 20, minutes: 25, wrap: true },\n  'Dresser': { cf: 12, minutes: 15, wrap: true },\n  'TV': { cf: 8, minutes: 10, wrap: true },\n  'Bookshelf': { cf: 10, minutes: 12, wrap: false }\n};\n\nexport default function DashboardPage() {\n  const navigate = useNavigate();\n  const [state, setState] = useState<AppState>({\n    address: '',\n    photos: [],\n    detections: [],\n    mapping: mockMapping,\n    estimate: {\n      crew: 3,\n      rate: 75,\n      travelMins: 30,\n      stairs: false,\n      elevator: false,\n      wrapping: false,\n      safetyPct: 10,\n      hours: 0,\n      total: 0\n    }\n  });\n\n  const [selectedPhotos, setSelectedPhotos] = useState<string[]>([]);\n  const [selectedListing, setSelectedListing] = useState<any>(null);\n  const [isDetecting, setIsDetecting] = useState(false);\n  const [toasts, setToasts] = useState<Array<{ id: string; message: string; type: 'success' | 'error' }>>([]);\n  const [showProjectHistory, setShowProjectHistory] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [currentProjectId, setCurrentProjectId] = useState<string | null>(null);\n\n  // Update estimate when detections or estimate params change\n  useEffect(() => {\n    if (state.detections.length > 0) {\n      const result = calculateEstimate(state.detections, state.mapping, {\n        crew: state.estimate.crew,\n        rate: state.estimate.rate,\n        travelMins: state.estimate.travelMins,\n        stairs: state.estimate.stairs,\n        elevator: state.estimate.elevator,\n        wrapping: state.estimate.wrapping,\n        safetyPct: state.estimate.safetyPct\n      });\n\n      setState(prev => ({\n        ...prev,\n        estimate: {\n          ...prev.estimate,\n          hours: result.hours,\n          total: result.total\n        }\n      }));\n    }\n  }, [state.detections, state.mapping, state.estimate.crew, state.estimate.rate, state.estimate.travelMins, state.estimate.stairs, state.estimate.elevator, state.estimate.wrapping, state.estimate.safetyPct]);\n\n  const addToast = (message: string, type: 'success' | 'error') => {\n    const id = Date.now().toString();\n    setToasts(prev => [...prev, { id, message, type }]);\n    setTimeout(() => {\n      setToasts(prev => prev.filter(toast => toast.id !== id));\n    }, 3000);\n  };\n\n  const handleAddressChange = (address: string) => {\n    setState(prev => ({ ...prev, address }));\n  };\n\n  const handleListingSelect = (listing: any) => {\n    setSelectedListing(listing);\n  };\n\n  const handleFetchPhotos = async () => {\n    if (!selectedListing) {\n      addToast('Please select a listing from the autocomplete first', 'error');\n      return;\n    }\n    \n    try {\n      console.log('Fetching photos for selected listing:', selectedListing.address);\n      console.log('Has carousel_photos_composable:', !!selectedListing.carousel_photos_composable);\n      \n      // Check if the listing has carousel_photos_composable data\n      if (selectedListing.carousel_photos_composable) {\n        try {\n          // Use the utility function to parse Zillow photos\n          const photoUrls = parseZillowPhotos(selectedListing.carousel_photos_composable);\n          \n          console.log('Parsed photo URLs:', photoUrls.length);\n          \n          if (photoUrls.length > 0) {\n            // Convert URLs to Photo format\n            const photos: Photo[] = photoUrls.map((url: string, index: number) => ({\n              id: `photo-${index}`,\n              url: url,\n              thumbnailUrl: url, // Zillow URLs are already optimized\n              filename: `property-photo-${index + 1}.jpg`,\n              uploadedAt: new Date()\n            }));\n            \n            setState(prev => ({ ...prev, photos }));\n            addToast(`Found ${photos.length} photos - Starting AI detection...`, 'success');\n            \n            // Automatically select all photos and start detection\n            const allPhotoIds = photos.map(photo => photo.id);\n            setSelectedPhotos(allPhotoIds);\n            \n            // Start AI detection automatically\n            await runAutomaticDetection(photos);\n            \n          } else {\n            // No photos found\n            setState(prev => ({ ...prev, photos: [] }));\n            addToast('No photos found for this listing', 'error');\n          }\n        } catch (error) {\n          console.error('Error parsing carousel_photos_composable:', error);\n          // No fallback - show error\n          setState(prev => ({ ...prev, photos: [] }));\n          addToast('Error parsing carousel data', 'error');\n        }\n      } else {\n        // No carousel_photos_composable data - try to fetch from database\n        console.log('No carousel data in selected listing, searching database...');\n        await fetchPhotosFromDatabase(selectedListing.address);\n      }\n    } catch (error) {\n      console.error('Error fetching photos:', error);\n      // No fallback - show error\n      setState(prev => ({ ...prev, photos: [] }));\n      addToast('Error fetching photos', 'error');\n    }\n  };\n\n  const fetchPhotosFromDatabase = async (address: string) => {\n    try {\n      console.log('ðŸ” Searching database for photos:', address);\n      \n      // Optimized search strategy for 40,000+ records\n      const addressParts = address.split(' ');\n      const houseNumber = addressParts[0];\n      const streetName = addressParts.slice(1, 3).join(' '); // First 2 words after house number\n      \n      // Prioritize more specific searches first to reduce database load\n      const searchTerms = [\n        `${houseNumber} ${streetName}`, // Most specific: house + street\n        address.split(',')[0], // Street address only\n        houseNumber, // Just house number (fastest search)\n        address, // Full address (least likely to match)\n        streetName, // Just street name (broader search)\n        address.replace(/[,\\s]+/g, ' ').trim() // Cleaned address\n      ].filter(term => term && term.length > 0);\n      \n      console.log('ðŸ” Search terms to try:', searchTerms);\n      \n      // Search both tables with simpler queries to avoid URL encoding issues\n      let currentListings: any = { data: null, error: null };\n      let soldListings: any = { data: null, error: null };\n      \n      // Try each search term until we find results\n      for (const term of searchTerms) {\n        console.log(`ðŸ” Trying search term: \"${term}\"`);\n        \n        if (!currentListings.data || currentListings.data.length === 0) {\n          console.log(`ðŸ” Searching just_listed for: \"${term}\"`);\n          try {\n            // Use timeout to prevent hanging on large datasets\n            const searchPromise = supabase\n              .from('just_listed')\n              .select('id, address, addresscity, addressstate, carousel_photos_composable')\n              .ilike('address', `%${term}%`)\n              .limit(3); // Reduced limit for faster queries\n            \n            const timeoutPromise = new Promise((_, reject) => \n              setTimeout(() => reject(new Error('Search timeout')), 10000)\n            );\n            \n            currentListings = await Promise.race([searchPromise, timeoutPromise]);\n            \n            if (currentListings.error) {\n              console.error('âŒ Error searching just_listed:', currentListings.error);\n            } else {\n              console.log(`ðŸ“Š just_listed results: ${currentListings.data?.length || 0} found`);\n            }\n          } catch (error) {\n            console.error('âŒ Timeout or error searching just_listed:', error);\n            currentListings = { data: null, error };\n          }\n        }\n        \n        if (!soldListings.data || soldListings.data.length === 0) {\n          console.log(`ðŸ” Searching sold_listings for: \"${term}\"`);\n          try {\n            // Use timeout to prevent hanging on large datasets\n            const searchPromise = supabase\n              .from('sold_listings')\n              .select('id, address, addresscity, addressstate, carousel_photos_composable')\n              .ilike('address', `%${term}%`)\n              .limit(3); // Reduced limit for faster queries\n            \n            const timeoutPromise = new Promise((_, reject) => \n              setTimeout(() => reject(new Error('Search timeout')), 10000)\n            );\n            \n            soldListings = await Promise.race([searchPromise, timeoutPromise]);\n            \n            if (soldListings.error) {\n              console.error('âŒ Error searching sold_listings:', soldListings.error);\n            } else {\n              console.log(`ðŸ“Š sold_listings results: ${soldListings.data?.length || 0} found`);\n            }\n          } catch (error) {\n            console.error('âŒ Timeout or error searching sold_listings:', error);\n            soldListings = { data: null, error };\n          }\n        }\n        \n        // If we found results, break\n        if ((currentListings.data && currentListings.data.length > 0) || \n            (soldListings.data && soldListings.data.length > 0)) {\n          console.log(`âœ… Found results with term: \"${term}\"`);\n          break;\n        }\n      }\n      \n      // If no results found with partial matching, try exact matching for better performance\n      if ((!currentListings.data || currentListings.data.length === 0) && \n          (!soldListings.data || soldListings.data.length === 0)) {\n        console.log('ðŸ” No results with partial matching, trying exact matching...');\n        \n        try {\n          const exactSearchPromise = Promise.all([\n            supabase\n              .from('just_listed')\n              .select('id, address, addresscity, addressstate, carousel_photos_composable')\n              .eq('address', address)\n              .limit(1),\n            supabase\n              .from('sold_listings')\n              .select('id, address, addresscity, addressstate, carousel_photos_composable')\n              .eq('address', address)\n              .limit(1)\n          ]);\n          \n          const timeoutPromise = new Promise((_, reject) => \n            setTimeout(() => reject(new Error('Exact search timeout')), 5000)\n          );\n          \n          const result = await Promise.race([exactSearchPromise, timeoutPromise]) as any;\n          const [exactCurrent, exactSold] = result;\n          \n          if (exactCurrent.data && exactCurrent.data.length > 0) {\n            currentListings = exactCurrent;\n            console.log('âœ… Found exact match in just_listed');\n          }\n          if (exactSold.data && exactSold.data.length > 0) {\n            soldListings = exactSold;\n            console.log('âœ… Found exact match in sold_listings');\n          }\n        } catch (error) {\n          console.log('âŒ Exact search failed:', error);\n        }\n      }\n\n      console.log('ðŸ“Š Database search results:');\n      console.log('Current listings found:', currentListings.data?.length || 0);\n      console.log('Sold listings found:', soldListings.data?.length || 0);\n      \n      if (currentListings.data && currentListings.data.length > 0) {\n        console.log('Current listings:', currentListings.data.map((l: any) => ({ id: l.id, address: l.address, city: l.addresscity, state: l.addressstate })));\n      }\n      if (soldListings.data && soldListings.data.length > 0) {\n        console.log('Sold listings:', soldListings.data.map((l: any) => ({ id: l.id, address: l.address, city: l.addresscity, state: l.addressstate })));\n      }\n\n      const listing = currentListings.data?.[0] || soldListings.data?.[0];\n      \n      if (listing) {\n        console.log('âœ… Found listing:', {\n          id: listing.id,\n          address: listing.address,\n          city: listing.addresscity,\n          state: listing.addressstate,\n          hasPhotos: !!listing.carousel_photos_composable\n        });\n        \n        if (listing.carousel_photos_composable) {\n          console.log('ðŸ“¸ Listing has photos, parsing...');\n        \n        try {\n          // Use the utility function to parse Zillow photos\n          const photoUrls = parseZillowPhotos(listing.carousel_photos_composable);\n          \n          console.log('Parsed photo URLs from database:', photoUrls.length);\n          \n          if (photoUrls.length > 0) {\n            // Convert URLs to Photo format\n            const photos: Photo[] = photoUrls.map((url: string, index: number) => ({\n              id: `photo-${index}`,\n              url: url,\n              thumbnailUrl: url, // Zillow URLs are already optimized\n              filename: `property-photo-${index + 1}.jpg`,\n              uploadedAt: new Date()\n            }));\n            \n            setState(prev => ({ ...prev, photos }));\n            addToast(`Found ${photos.length} photos from database - Starting AI detection...`, 'success');\n            \n            // Automatically select all photos and start detection\n            const allPhotoIds = photos.map(photo => photo.id);\n            setSelectedPhotos(allPhotoIds);\n            \n            // Start AI detection automatically\n            await runAutomaticDetection(photos);\n            \n          } else {\n            // No photos found\n            setState(prev => ({ ...prev, photos: [] }));\n            addToast('No photos found for this listing', 'error');\n          }\n        } catch (error) {\n          console.error('Error parsing carousel_photos_composable from database:', error);\n          setState(prev => ({ ...prev, photos: [] }));\n          addToast('Error parsing carousel data', 'error');\n        }\n        } else {\n          console.log('âŒ Listing found but no photos data');\n          setState(prev => ({ ...prev, photos: [] }));\n          addToast('No photos found for this listing', 'error');\n        }\n      } else {\n        console.log('âŒ No listing found in database for address:', address);\n        setState(prev => ({ ...prev, photos: [] }));\n        addToast('No listing found in database for this address', 'error');\n      }\n    } catch (error) {\n      console.error('Error searching database for photos:', error);\n      setState(prev => ({ ...prev, photos: [] }));\n      addToast('Error searching database', 'error');\n    }\n  };\n\n  const handleClear = () => {\n    setState(prev => ({\n      ...prev,\n      address: '',\n      photos: [],\n      detections: []\n    }));\n    setSelectedPhotos([]);\n    setSelectedListing(null);\n    addToast('Cleared all data', 'success');\n  };\n\n  const handlePhotoSelect = (photoId: string) => {\n    setSelectedPhotos(prev => \n      prev.includes(photoId) \n        ? prev.filter(id => id !== photoId)\n        : [...prev, photoId]\n    );\n  };\n\n  const handleSelectAllPhotos = () => {\n    const allPhotoIds = state.photos.map(photo => photo.id);\n    setSelectedPhotos(allPhotoIds);\n  };\n\n  const handleDeselectAllPhotos = () => {\n    setSelectedPhotos([]);\n  };\n\n  const runAutomaticDetection = async (photos: Photo[]) => {\n    try {\n      setIsDetecting(true);\n      setState(prev => ({ ...prev, detections: [] })); // Clear previous detections\n      console.log('Starting automatic AI detection on', photos.length, 'photos');\n      \n      // Process photos one by one for real-time updates\n      for (let i = 0; i < photos.length; i++) {\n        const photo = photos[i];\n        console.log(`Processing photo ${i + 1}/${photos.length}:`, photo.url);\n        \n        try {\n          // Detect furniture in this single photo\n          const photoDetections = await FurnitureDetectionService.detectFurniture([photo.url]);\n          \n          if (photoDetections.length > 0) {\n            // Add new detections to existing ones\n            setState(prev => ({\n              ...prev,\n              detections: [...prev.detections, ...photoDetections]\n            }));\n            \n            console.log(`Photo ${i + 1}: Detected ${photoDetections.length} items`);\n            \n            // Show real-time toast for each photo\n            addToast(`Photo ${i + 1}: Found ${photoDetections.length} items`, 'success');\n          }\n          \n          // Small delay to show real-time updates\n          await new Promise(resolve => setTimeout(resolve, 500));\n          \n        } catch (error) {\n          console.error(`Error processing photo ${i + 1}:`, error);\n          // Continue with next photo\n        }\n      }\n      \n      console.log('Automatic AI detection completed');\n      addToast(`AI detection completed! Found ${state.detections.length} total items`, 'success');\n      \n    } catch (error) {\n      console.error('Automatic AI detection error:', error);\n      addToast('AI detection failed. Please try again.', 'error');\n    } finally {\n      setIsDetecting(false);\n    }\n  };\n\n  const handleRunDetection = async () => {\n    if (selectedPhotos.length === 0) {\n      addToast('Please select photos first', 'error');\n      return;\n    }\n    \n    if (state.photos.length === 0) {\n      addToast('No photos available for detection', 'error');\n      return;\n    }\n    \n    try {\n      setIsDetecting(true);\n      addToast('Starting AI furniture detection...', 'success');\n      \n      // Get selected photo objects\n      const selectedPhotoObjects = state.photos.filter(photo => \n        selectedPhotos.includes(photo.id)\n      );\n      \n      console.log('Running AI detection on', selectedPhotoObjects.length, 'photos');\n      \n      // Run AI detection\n      const detections = await FurnitureDetectionService.analyzePhotos(selectedPhotoObjects);\n      \n      console.log('AI detection results:', detections);\n      \n      // Update state with detections\n      setState(prev => ({ ...prev, detections }));\n      \n      addToast(`AI detection completed! Found ${detections.length} furniture items`, 'success');\n      \n    } catch (error) {\n      console.error('AI detection error:', error);\n      addToast('AI detection failed. Please try again.', 'error');\n    } finally {\n      setIsDetecting(false);\n    }\n  };\n\n  const handleQuantityChange = (detectionIndex: number, quantity: number) => {\n    setState(prev => ({\n      ...prev,\n      detections: prev.detections.map((detection, index) =>\n        index === detectionIndex ? { ...detection, qty: quantity } : detection\n      )\n    }));\n  };\n\n  const handleNotesChange = (detectionIndex: number, notes: string) => {\n    setState(prev => ({\n      ...prev,\n      detections: prev.detections.map((detection, index) =>\n        index === detectionIndex ? { ...detection, notes } : detection\n      )\n    }));\n  };\n\n\n  const handleRemove = (detectionIndex: number) => {\n    setState(prev => ({\n      ...prev,\n      detections: prev.detections.filter((_, index) => index !== detectionIndex)\n    }));\n    addToast('Item removed from inventory', 'success');\n  };\n\n  const handleSendSMS = () => {\n    addToast('SMS quote sent successfully', 'success');\n  };\n\n  const handleSendEmail = () => {\n    addToast('Email quote sent successfully', 'success');\n  };\n\n  const handleDownloadPDF = async () => {\n    const quotePayload: QuotePayload = {\n      address: state.address,\n      detections: state.detections,\n      estimate: state.estimate,\n      timestamp: new Date()\n    };\n    \n    const pdfBlob = await generatePdf(quotePayload);\n    downloadFile(pdfBlob, 'quote.pdf', 'application/pdf');\n    addToast('PDF downloaded successfully', 'success');\n  };\n\n  const handleCopyCSV = () => {\n    const csvContent = toCSV(state.detections);\n    navigator.clipboard.writeText(csvContent);\n    addToast('CSV copied to clipboard', 'success');\n  };\n\n  const handleSaveProject = async () => {\n    if (!state.address && state.detections.length === 0) {\n      addToast('Please add an address or detections before saving', 'error');\n      return;\n    }\n\n    try {\n      setIsSaving(true);\n      // Automatically use address as project name, fallback to \"Untitled Project\"\n      const projectName = state.address || 'Untitled Project';\n\n      if (currentProjectId) {\n        // Update existing project\n        await ProjectService.updateProject(\n          currentProjectId,\n          state.address,\n          state.detections,\n          state.estimate,\n          projectName\n        );\n        addToast('Project updated successfully', 'success');\n      } else {\n        // Save new project\n        const project = await ProjectService.saveProject(\n          state.address,\n          state.detections,\n          state.estimate,\n          projectName\n        );\n        setCurrentProjectId(project.id);\n        addToast('Project saved successfully', 'success');\n      }\n    } catch (error: any) {\n      console.error('Error saving project:', error);\n      addToast(`Failed to save project: ${error.message}`, 'error');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleLoadProject = (project: Project) => {\n    setState({\n      address: project.address,\n      photos: [], // Photos aren't saved, user will need to reload\n      detections: project.detections,\n      mapping: state.mapping, // Keep current mapping\n      estimate: project.estimate\n    });\n    setCurrentProjectId(project.id);\n    setSelectedPhotos([]);\n    addToast('Project loaded successfully', 'success');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200\">\n      {/* Header */}\n      <header className=\"bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 transition-colors duration-200\">\n        <div className=\"max-w-7xl mx-auto px-6\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center\">\n                <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              </div>\n              <h1 className=\"text-xl font-semibold text-gray-900 dark:text-gray-100 tracking-tight\">Instant Quote Builder</h1>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={() => setShowProjectHistory(true)}\n                className=\"text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors flex items-center space-x-1\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <span>Project History</span>\n              </button>\n              <button\n                onClick={handleSaveProject}\n                disabled={isSaving || (!state.address && state.detections.length === 0)}\n                className=\"text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-1 disabled:cursor-not-allowed\"\n              >\n                {isSaving ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\"></div>\n                    <span>Saving...</span>\n                  </>\n                ) : (\n                  <>\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\" />\n                    </svg>\n                    <span>{currentProjectId ? 'Update Project' : 'Save Project'}</span>\n                  </>\n                )}\n              </button>\n              <div className=\"w-px h-6 bg-gray-200 dark:bg-gray-700\"></div>\n              <select className=\"text-sm font-medium text-gray-700 dark:text-gray-300 bg-transparent border-none focus:outline-none cursor-pointer\">\n                <option>San Francisco, CA</option>\n                <option>Los Angeles, CA</option>\n                <option>New York, NY</option>\n                <option>Chicago, IL</option>\n              </select>\n              <ThemeToggle />\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-200\">\n        <div className=\"max-w-7xl mx-auto px-6 py-8\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            {/* Left Column: Search + Photos */}\n            <div className=\"space-y-6\">\n              <SearchPanel\n                address={state.address}\n                onAddressChange={handleAddressChange}\n                onFetchPhotos={handleFetchPhotos}\n                onClear={handleClear}\n                recentSearches={[]}\n                onListingSelect={handleListingSelect}\n              />\n              <PhotoGallery\n                photos={state.photos}\n                selectedPhotos={selectedPhotos}\n                onPhotoSelect={handlePhotoSelect}\n                onRunDetection={handleRunDetection}\n                isDetecting={isDetecting}\n                onSelectAll={handleSelectAllPhotos}\n                onDeselectAll={handleDeselectAllPhotos}\n              />\n            </div>\n\n            {/* Right Column: Inventory (Standalone) */}\n            <div>\n              <InventoryTable\n                detections={state.detections}\n                mapping={state.mapping}\n                onQuantityChange={handleQuantityChange}\n                onNotesChange={handleNotesChange}\n                onRemove={handleRemove}\n                isDetecting={isDetecting}\n              />\n            </div>\n          </div>\n        \n        {/* Action Buttons - Full Width Below */}\n        <div className=\"mt-8\">\n          <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">Export & Actions</h2>\n                <p className=\"text-sm text-gray-600\">Export inventory data and send quotes</p>\n              </div>\n            </div>\n            \n            <div className=\"mb-4 pb-4 border-b border-gray-200\">\n              <button\n                onClick={() => {\n                  if (state.detections.length === 0) {\n                    addToast('Please detect items first before creating a quote', 'error');\n                    return;\n                  }\n                  navigate('/estimate', {\n                    state: {\n                      address: state.address,\n                      detections: state.detections,\n                      estimate: state.estimate,\n                      mapping: state.mapping\n                    }\n                  });\n                }}\n                disabled={state.detections.length === 0}\n                className=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 px-6 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2 disabled:cursor-not-allowed shadow-lg\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n                <span>Continue to Complete Quote</span>\n                {state.detections.length > 0 && (\n                  <span className=\"ml-2 bg-white bg-opacity-20 px-2 py-1 rounded text-sm\">\n                    {state.detections.length} items\n                  </span>\n                )}\n              </button>\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\">\n              <button\n                onClick={handleSendSMS}\n                className=\"bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                </svg>\n                <span>Send SMS Quote</span>\n              </button>\n              <button\n                onClick={handleSendEmail}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                </svg>\n                <span>Send Email</span>\n              </button>\n              <button\n                onClick={handleDownloadPDF}\n                className=\"bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-4 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n                <span>Download PDF</span>\n              </button>\n              <button\n                onClick={handleCopyCSV}\n                className=\"bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-4 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n                <span>Copy CSV</span>\n              </button>\n            </div>\n          </div>\n        </div>\n        </div>\n      </main>\n\n      {/* Toast Notifications */}\n      <div className=\"fixed top-4 right-4 space-y-2 z-50\">\n        {toasts.map(toast => (\n          <div\n            key={toast.id}\n            className={`px-4 py-2 rounded-md shadow-lg text-sm font-medium ${\n              toast.type === 'success' \n                ? 'bg-green-100 text-green-800 border border-green-200' \n                : 'bg-red-100 text-red-800 border border-red-200'\n            }`}\n          >\n            {toast.message}\n          </div>\n        ))}\n      </div>\n\n      {/* Project History Modal */}\n      {showProjectHistory && (\n        <ProjectHistory\n          onLoadProject={handleLoadProject}\n          onClose={() => setShowProjectHistory(false)}\n        />\n      )}\n    </div>\n  );\n}\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}